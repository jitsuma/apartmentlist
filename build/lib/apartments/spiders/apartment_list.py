import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/gastonia-nc-28052/1000-to-2000',
        'https://www.apartments.com/jacksonville-fl-32211/1000-to-2000',
        'https://www.apartments.com/monticello-ky-42633/1000-to-2000',
        'https://www.apartments.com/greensboro-nc-27406/1000-to-2000',
        'https://www.apartments.com/dadeville-al-36853/1000-to-2000',
        'https://www.apartments.com/dowagiac-mi-49047/1000-to-2000',
        'https://www.apartments.com/fort-mohave-az-86426/1000-to-2000',
        'https://www.apartments.com/augusta-ga-30906/1000-to-2000',
        'https://www.apartments.com/quincy-fl-32351/1000-to-2000',
        'https://www.apartments.com/baltimore-md-21215/1000-to-2000',
        'https://www.apartments.com/franklin-ga-30217/1000-to-2000',
        'https://www.apartments.com/niles-mi-49120/1000-to-2000',
        'https://www.apartments.com/monroe-ga-30655/1000-to-2000',
        'https://www.apartments.com/dallas-tx-75241/1000-to-2000',
        'https://www.apartments.com/lexington-ky-40508/1000-to-2000',
        'https://www.apartments.com/gainesville-ga-30501/1000-to-2000',
        'https://www.apartments.com/fayetteville-nc-28303/1000-to-2000',
        'https://www.apartments.com/west-jordan-ut-84088/1000-to-2000',
        'https://www.apartments.com/detroit-mi-48234/1000-to-2000',
        'https://www.apartments.com/chester-va-23831/1000-to-2000',
        'https://www.apartments.com/pittsburgh-pa-15210/1000-to-2000',
        'https://www.apartments.com/buffalo-ny-14223/1000-to-2000',
        'https://www.apartments.com/fort-pierce-fl-34949/1000-to-2000',
        'https://www.apartments.com/eden-nc-27288/1000-to-2000',
        'https://www.apartments.com/flat-rock-mi-48134/1000-to-2000',
        'https://www.apartments.com/covington-ga-30014/1000-to-2000',
        'https://www.apartments.com/benton-ar-72019/1000-to-2000',
        'https://www.apartments.com/indianapolis-in-46235/1000-to-2000',
        'https://www.apartments.com/rockville-md-20852/1000-to-2000',
        'https://www.apartments.com/del-valle-tx-78617/1000-to-2000',
        'https://www.apartments.com/spartanburg-sc-29301/1000-to-2000',
        'https://www.apartments.com/fresno-ca-93702/1000-to-2000',
        'https://www.apartments.com/elkhart-in-46516/1000-to-2000',
        'https://www.apartments.com/indianapolis-in-46229/1000-to-2000',
        'https://www.apartments.com/homestead-fl-33035/1000-to-2000',
        'https://www.apartments.com/fort-worth-tx-76137/1000-to-2000',
        'https://www.apartments.com/merrimack-nh-03054/1000-to-2000',
        'https://www.apartments.com/washington-dc-20020/1000-to-2000',
        'https://www.apartments.com/westminster-md-21157/1000-to-2000',
        'https://www.apartments.com/warsaw-nc-28398/1000-to-2000',
        'https://www.apartments.com/havelock-nc-28532/1000-to-2000',
        'https://www.apartments.com/akron-oh-44305/1000-to-2000',
        'https://www.apartments.com/reisterstown-md-21136/1000-to-2000',
        'https://www.apartments.com/watertown-ny-13601/1000-to-2000',
        'https://www.apartments.com/fond-du-lac-wi-54935/1000-to-2000',
        'https://www.apartments.com/phenix-city-al-36867/1000-to-2000',
        'https://www.apartments.com/millsboro-de-19966/1000-to-2000',
        'https://www.apartments.com/nan-nan-85075/1000-to-2000',
        'https://www.apartments.com/miami-fl-33150/1000-to-2000',
        'https://www.apartments.com/viroqua-wi-54665/1000-to-2000',
        'https://www.apartments.com/wichita-falls-tx-76310/1000-to-2000',
        'https://www.apartments.com/buffalo-ny-14228/1000-to-2000',
        'https://www.apartments.com/martinsburg-wv-25401/1000-to-2000',
        'https://www.apartments.com/tucson-az-85712/1000-to-2000',
        'https://www.apartments.com/hollandale-ms-38748/1000-to-2000',
        'https://www.apartments.com/lakewood-oh-44107/1000-to-2000',
        'https://www.apartments.com/chicago-il-60651/1000-to-2000',
        'https://www.apartments.com/taylors-sc-29687/1000-to-2000',
        'https://www.apartments.com/stockton-ca-95205/1000-to-2000',
        'https://www.apartments.com/fort-smith-ar-72903/1000-to-2000',
        'https://www.apartments.com/clearwater-fl-33761/1000-to-2000',
        'https://www.apartments.com/las-cruces-nm-88012/1000-to-2000',
        'https://www.apartments.com/baltimore-md-21212/1000-to-2000',
        'https://www.apartments.com/goldsboro-nc-27534/1000-to-2000',
        'https://www.apartments.com/san-antonio-tx-78209/1000-to-2000',
        'https://www.apartments.com/columbia-pa-17512/1000-to-2000',
        'https://www.apartments.com/madison-al-35758/1000-to-2000',
        'https://www.apartments.com/knoxville-tn-37921/1000-to-2000',
        'https://www.apartments.com/riverdale-ga-30274/1000-to-2000',
        'https://www.apartments.com/thorndale-pa-19372/1000-to-2000',
        'https://www.apartments.com/macon-ga-31206/1000-to-2000',
        'https://www.apartments.com/douglasville-ga-30135/1000-to-2000',
        'https://www.apartments.com/canton-oh-44710/1000-to-2000',
        'https://www.apartments.com/lake-city-fl-32025/1000-to-2000',
        'https://www.apartments.com/harrisonburg-va-22802/1000-to-2000',
        'https://www.apartments.com/washington-pa-15301/1000-to-2000',
        'https://www.apartments.com/huntington-wv-25704/1000-to-2000',
        'https://www.apartments.com/philadelphia-pa-19152/1000-to-2000',
        'https://www.apartments.com/phoenix-az-85051/1000-to-2000',
        'https://www.apartments.com/las-vegas-nv-89115/1000-to-2000',
        'https://www.apartments.com/las-cruces-nm-88001/1000-to-2000',
        'https://www.apartments.com/richmond-va-23224/1000-to-2000',
        'https://www.apartments.com/lakeland-fl-33801/1000-to-2000',
        'https://www.apartments.com/livonia-mi-48150/1000-to-2000',
        'https://www.apartments.com/brunswick-ga-31520/1000-to-2000',
        'https://www.apartments.com/orangeburg-sc-29115/1000-to-2000',
        'https://www.apartments.com/albany-ny-12205/1000-to-2000',
        'https://www.apartments.com/nan-nan-28815/1000-to-2000',
        'https://www.apartments.com/lansing-mi-48911/1000-to-2000',
        'https://www.apartments.com/oakhurst-ok-74050/1000-to-2000',
        'https://www.apartments.com/new-britain-ct-06051/1000-to-2000',
        'https://www.apartments.com/oliver-springs-tn-37840/1000-to-2000',
        'https://www.apartments.com/fort-wayne-in-46845/1000-to-2000',
        'https://www.apartments.com/port-huron-mi-48060/1000-to-2000',
        'https://www.apartments.com/lapeer-mi-48446/1000-to-2000',
        'https://www.apartments.com/manchester-tn-37355/1000-to-2000',
        'https://www.apartments.com/plant-city-fl-33565/1000-to-2000',
        'https://www.apartments.com/highwood-il-60040/1000-to-2000',
        'https://www.apartments.com/harpers-ferry-wv-25425/1000-to-2000',
        'https://www.apartments.com/clarksville-tn-37040/1000-to-2000',
        'https://www.apartments.com/fresno-ca-93726/1000-to-2000',
        'https://www.apartments.com/nashville-tn-37210/1000-to-2000',
        'https://www.apartments.com/bowling-green-ky-42101/1000-to-2000',
        'https://www.apartments.com/rocklin-ca-95765/1000-to-2000',
        'https://www.apartments.com/pueblo-co-81004/1000-to-2000',
        'https://www.apartments.com/tacoma-wa-98405/1000-to-2000',
        'https://www.apartments.com/ava-ny-13303/1000-to-2000',
        'https://www.apartments.com/columbus-oh-43207/1000-to-2000',
        'https://www.apartments.com/columbus-ga-31903/1000-to-2000',
        'https://www.apartments.com/greenville-sc-29617/1000-to-2000',
        'https://www.apartments.com/anaheim-ca-92804/1000-to-2000',
        'https://www.apartments.com/baltimore-md-21231/1000-to-2000',
        'https://www.apartments.com/lynchburg-va-24501/1000-to-2000',
        'https://www.apartments.com/marietta-ga-30064/1000-to-2000',
        'https://www.apartments.com/midland-ga-31820/1000-to-2000',
        'https://www.apartments.com/nan-nan-99267/1000-to-2000',
        'https://www.apartments.com/tucson-az-85705/1000-to-2000',
        'https://www.apartments.com/bladensburg-md-20710/1000-to-2000',
        'https://www.apartments.com/clearwater-fl-33760/1000-to-2000',
        'https://www.apartments.com/greeley-co-80634/1000-to-2000',
        'https://www.apartments.com/modesto-ca-95350/1000-to-2000',
        'https://www.apartments.com/bradenton-fl-34203/1000-to-2000',
        'https://www.apartments.com/ashland-va-23005/1000-to-2000',
        'https://www.apartments.com/bronx-ny-10460/1000-to-2000',
        'https://www.apartments.com/houston-tx-77069/1000-to-2000',
        'https://www.apartments.com/indianapolis-in-46205/1000-to-2000',
        'https://www.apartments.com/salem-or-97301/1000-to-2000',
        'https://www.apartments.com/altus-ok-73521/1000-to-2000',
        'https://www.apartments.com/sacramento-ca-95832/1000-to-2000',
        'https://www.apartments.com/albuquerque-nm-87102/1000-to-2000',
        'https://www.apartments.com/chandler-az-85224/1000-to-2000',
        'https://www.apartments.com/roswell-nm-88203/1000-to-2000',
        'https://www.apartments.com/winston-salem-nc-27127/1000-to-2000',
        'https://www.apartments.com/avon-park-fl-33825/1000-to-2000',
        'https://www.apartments.com/hermosa-beach-ca-90254/1000-to-2000',
        'https://www.apartments.com/portsmouth-va-23704/1000-to-2000',
        'https://www.apartments.com/manchester-pa-17345/1000-to-2000',
        'https://www.apartments.com/danbury-ct-06810/1000-to-2000',
        'https://www.apartments.com/denver-co-80219/1000-to-2000',
        'https://www.apartments.com/troy-oh-45373/1000-to-2000',
        'https://www.apartments.com/mount-vernon-ny-10550/1000-to-2000',
        'https://www.apartments.com/idaho-falls-id-83402/1000-to-2000',
        'https://www.apartments.com/miami-fl-33166/1000-to-2000',
        'https://www.apartments.com/edinburg-tx-78539/1000-to-2000',
        'https://www.apartments.com/chicago-il-60621/1000-to-2000',
        'https://www.apartments.com/conway-sc-29526/1000-to-2000',
        'https://www.apartments.com/bradenton-fl-34205/1000-to-2000',
        'https://www.apartments.com/mountville-pa-17554/1000-to-2000',
        'https://www.apartments.com/mobile-al-36693/1000-to-2000',
        'https://www.apartments.com/tucson-az-85719/1000-to-2000',
        'https://www.apartments.com/salinas-ca-93901/1000-to-2000',
        'https://www.apartments.com/hempstead-ny-11550/1000-to-2000',
        'https://www.apartments.com/atlanta-ga-30344/1000-to-2000',
        'https://www.apartments.com/belmont-nc-28012/1000-to-2000',
        'https://www.apartments.com/jonesboro-ga-30236/1000-to-2000',
        'https://www.apartments.com/marietta-ga-30068/1000-to-2000',
        'https://www.apartments.com/hockley-tx-77447/1000-to-2000',
        'https://www.apartments.com/fresno-ca-93722/1000-to-2000',
        'https://www.apartments.com/beloit-wi-53511/1000-to-2000',
        'https://www.apartments.com/sumner-wa-98390/1000-to-2000',
        'https://www.apartments.com/indianola-ia-50125/1000-to-2000',
        'https://www.apartments.com/wilson-nc-27893/1000-to-2000',
        'https://www.apartments.com/jackson-tn-38305/1000-to-2000',
        'https://www.apartments.com/mc-veytown-pa-17051/1000-to-2000',
        'https://www.apartments.com/mesa-az-85207/1000-to-2000',
        'https://www.apartments.com/wyandanch-ny-11798/1000-to-2000',
        'https://www.apartments.com/milwaukee-wi-53221/1000-to-2000',
        'https://www.apartments.com/mobile-al-36608/1000-to-2000',
        'https://www.apartments.com/lancaster-pa-17603/1000-to-2000',
        'https://www.apartments.com/lakeland-fl-33809/1000-to-2000',
        'https://www.apartments.com/tulare-ca-93274/1000-to-2000',
        'https://www.apartments.com/pahrump-nv-89048/1000-to-2000',
        'https://www.apartments.com/milwaukee-wi-53207/1000-to-2000',
        'https://www.apartments.com/kennesaw-ga-30144/1000-to-2000',
        'https://www.apartments.com/washougal-wa-98671/1000-to-2000',
        'https://www.apartments.com/gainesville-fl-32653/1000-to-2000',
        'https://www.apartments.com/lebanon-tn-37087/1000-to-2000',
        'https://www.apartments.com/draper-ut-84020/1000-to-2000',
        'https://www.apartments.com/johnstown-pa-15902/1000-to-2000',
        'https://www.apartments.com/washington-dc-20032/1000-to-2000',
        'https://www.apartments.com/tinley-park-il-60477/1000-to-2000',
        'https://www.apartments.com/evansville-in-47714/1000-to-2000',
        'https://www.apartments.com/kissimmee-fl-34759/1000-to-2000',
        'https://www.apartments.com/muskegon-mi-49441/1000-to-2000',
        'https://www.apartments.com/columbia-sc-29205/1000-to-2000',
        'https://www.apartments.com/atlanta-ga-30360/1000-to-2000',
        'https://www.apartments.com/cleveland-oh-44135/1000-to-2000',
        'https://www.apartments.com/waldorf-md-20603/1000-to-2000',
        'https://www.apartments.com/new-castle-pa-16102/1000-to-2000',
        'https://www.apartments.com/grants-pass-or-97527/1000-to-2000',
        'https://www.apartments.com/san-diego-ca-92110/1000-to-2000',
        'https://www.apartments.com/marble-falls-tx-78654/1000-to-2000',
        'https://www.apartments.com/north-miami-beach-fl-33160/1000-to-2000',
        'https://www.apartments.com/petersburg-in-47567/1000-to-2000',
        'https://www.apartments.com/killeen-tx-76541/1000-to-2000',
        'https://www.apartments.com/sacramento-ca-95823/1000-to-2000',
        'https://www.apartments.com/ann-arbor-mi-48104/1000-to-2000',
        'https://www.apartments.com/charlotte-nc-28211/1000-to-2000'

            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
