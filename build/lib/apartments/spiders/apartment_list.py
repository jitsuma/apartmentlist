import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/metairie-la-70003/320-to-838',
        'https://www.apartments.com/atlanta-ga-30340/560-to-1198',
        'https://www.apartments.com/rome-ga-30165/320-to-838',
        'https://www.apartments.com/niagara-falls-ny-0/400-to-1000',
        'https://www.apartments.com/hillsborough-nc-27278/319-to-478',
        'https://www.apartments.com/conyers-ga-30012/560-to-1198',
        'https://www.apartments.com/riverdale-ga-30274/320-to-838',
        'https://www.apartments.com/weatherford-tx-76086/320-to-838',
        'https://www.apartments.com/delavan-wi-53115/560-to-1198',
        'https://www.apartments.com/nashville-tn-37207/560-to-1198',
        'https://www.apartments.com/columbus-in-47201/560-to-1198',
        'https://www.apartments.com/wallington-nj-7057/560-to-1198',
        'https://www.apartments.com/nan-nan-33775/320-to-838',
        'https://www.apartments.com/mckinney-tx-75069/320-to-838',
        'https://www.apartments.com/reading-pa-19602/319-to-478',
        'https://www.apartments.com/south-bend-in-46628/320-to-838',
        'https://www.apartments.com/gadsden-al-35904/560-to-1198',
        'https://www.apartments.com/sanford-nc-27330/320-to-838',
        'https://www.apartments.com/bryant-ar-72022/320-to-838',
        'https://www.apartments.com/fayetteville-tn-37334/319-to-478',
        'https://www.apartments.com/warrenton-mo-63383/560-to-1198',
        'https://www.apartments.com/lenoir-nc-28645/320-to-838',
        'https://www.apartments.com/pascagoula-ms-39581/320-to-838',
        'https://www.apartments.com/pauls-valley-ok-73075/320-to-838',
        'https://www.apartments.com/marysville-oh-43040/320-to-838',
        'https://www.apartments.com/baltimore-md-21223/320-to-838',
        'https://www.apartments.com/mount-juliet-tn-37122/319-to-478',
        'https://www.apartments.com/omaha-ne-68112/320-to-838',
        'https://www.apartments.com/nan-nan-46328/320-to-838',
        'https://www.apartments.com/reading-pa-19607/560-to-1198',
        'https://www.apartments.com/greenville-nc-27834/319-to-478',
        'https://www.apartments.com/russellville-ky-42276/319-to-478',
        'https://www.apartments.com/kansas-city-mo-64138/560-to-1198',
        'https://www.apartments.com/canon-city-co-81212/560-to-1198',
        'https://www.apartments.com/youngstown-oh-44512/320-to-838',
        'https://www.apartments.com/binghamton-ny-13903/320-to-838',
        'https://www.apartments.com/grand-prairie-tx-75051/320-to-838',
        'https://www.apartments.com/joliet-il-60435/320-to-838',
        'https://www.apartments.com/cleveland-oh-44108/320-to-838',
        'https://www.apartments.com/albany-ga-31701/320-to-838',
        'https://www.apartments.com/fayetteville-nc-28301/560-to-1198',
        'https://www.apartments.com/cody-wy-82414/320-to-838',
        'https://www.apartments.com/columbus-oh-43211/320-to-838',
        'https://www.apartments.com/north-little-rock-ar-72118/320-to-838',
        'https://www.apartments.com/wendell-nc-27591/320-to-838',
        'https://www.apartments.com/jackson-ms-39213/320-to-838',
        'https://www.apartments.com/banning-ca-92220/1000-to-1200',
        'https://www.apartments.com/sellersburg-in-47172/560-to-1198',
        'https://www.apartments.com/columbus-oh-43227/1000-to-1200',
        'https://www.apartments.com/antioch-tn-37013/1000-to-1200',
        'https://www.apartments.com/liberty-ms-39645/319-to-478',
        'https://www.apartments.com/snellville-ga-30078/1000-to-1200',
        'https://www.apartments.com/memphis-tn-38109/560-to-1198',
        'https://www.apartments.com/lansing-mi-48906/320-to-838',
        'https://www.apartments.com/pyatt-ar-72672/320-to-838',
        'https://www.apartments.com/hamilton-oh-45013/560-to-1198',
        'https://www.apartments.com/coffeyville-ks-67337/319-to-478',
        'https://www.apartments.com/phoenix-az-85032/320-to-838',
        'https://www.apartments.com/lexington-tn-38351/320-to-838',
        'https://www.apartments.com/cincinnati-oh-45225/319-to-478',
        'https://www.apartments.com/grand-junction-co-81501/560-to-1198',
        'https://www.apartments.com/cincinnati-oh-45251/560-to-1198',
        'https://www.apartments.com/durham-nc-27707/560-to-1198',
        'https://www.apartments.com/pine-bush-ny-12566/320-to-838',
        'https://www.apartments.com/memphis-tn-38114/320-to-838',
        'https://www.apartments.com/milwaukee-wi-53204/560-to-1198',
        'https://www.apartments.com/middle-river-md-21220/1000-to-1200',
        'https://www.apartments.com/mission-tx-78572/320-to-838',
        'https://www.apartments.com/vineland-nj-8360/320-to-838',
        'https://www.apartments.com/austin-tx-78723/320-to-838',
        'https://www.apartments.com/phoenix-az-85051/560-to-1198',
        'https://www.apartments.com/ripley-tn-38063/320-to-838',
        'https://www.apartments.com/covington-ky-41011/320-to-838',
        'https://www.apartments.com/little-rock-ar-72209/560-to-1198',
        'https://www.apartments.com/wilson-nc-27896/320-to-838',
        'https://www.apartments.com/statesboro-ga-30458/319-to-478',
        'https://www.apartments.com/upper-darby-pa-19082/320-to-838',
        'https://www.apartments.com/chattanooga-tn-37406/320-to-838',
        'https://www.apartments.com/madison-in-47250/320-to-838',
        'https://www.apartments.com/saint-petersburg-fl-33702/320-to-838',
        'https://www.apartments.com/tempe-az-85281/320-to-838',
        'https://www.apartments.com/jamestown-tn-38556/320-to-838',
        'https://www.apartments.com/apache-junction-az-85120/320-to-838',
        'https://www.apartments.com/wildomar-ca-92595/560-to-1198',
        'https://www.apartments.com/beaumont-ca-92223/560-to-1198',
        'https://www.apartments.com/amsterdam-ny-12010/320-to-838',
        'https://www.apartments.com/lima-oh-45801/319-to-478',
        'https://www.apartments.com/fairmont-wv-26554/320-to-838',
        'https://www.apartments.com/greensboro-nc-27409/560-to-1198',
        'https://www.apartments.com/gary-in-46406/560-to-1198',
        'https://www.apartments.com/natchitoches-la-71457/320-to-838',
        'https://www.apartments.com/emmett-id-83617/320-to-838',
        'https://www.apartments.com/lake-city-fl-32025/560-to-1198',
        'https://www.apartments.com/fort-smith-ar-72901/320-to-838',
        'https://www.apartments.com/lexington-ky-40508/560-to-1198',
        'https://www.apartments.com/fall-river-ma-2721/319-to-478',
        'https://www.apartments.com/fort-lauderdale-fl-33311/560-to-1198',
        'https://www.apartments.com/cincinnati-oh-45231/560-to-1198',
        'https://www.apartments.com/newport-ky-41071/320-to-838',
        'https://www.apartments.com/stockton-ca-95206/1000-to-1200',
        'https://www.apartments.com/nan-nan-41279/320-to-838',
        'https://www.apartments.com/panama-city-fl-32401/560-to-1198',
        'https://www.apartments.com/grand-rapids-mi-49506/560-to-1198',
        'https://www.apartments.com/reading-pa-19605/320-to-838',
        'https://www.apartments.com/roseboro-nc-28382/320-to-838',
        'https://www.apartments.com/greenville-sc-29609/320-to-838',
        'https://www.apartments.com/moultrie-ga-31768/320-to-838',
        'https://www.apartments.com/shawano-wi-54166/320-to-838',
        'https://www.apartments.com/westville-ok-74965/319-to-478',
        'https://www.apartments.com/west-palm-beach-fl-33409/560-to-1198',
        'https://www.apartments.com/asheboro-nc-27203/320-to-838',
        'https://www.apartments.com/dover-pa-17315/1000-to-1200',
        'https://www.apartments.com/memphis-tn-38104/319-to-478',
        'https://www.apartments.com/gulfport-ms-39501/320-to-838',
        'https://www.apartments.com/anderson-sc-29626/1000-to-1200',
        'https://www.apartments.com/cincinnati-oh-45205/320-to-838',
        'https://www.apartments.com/houston-tx-77022/320-to-838',
        'https://www.apartments.com/memphis-tn-38115/320-to-838',
        'https://www.apartments.com/peoria-il-61605/320-to-838',
        'https://www.apartments.com/seattle-wa-98188/560-to-1198',
        'https://www.apartments.com/bakersfield-ca-93306/560-to-1198',
        'https://www.apartments.com/mobile-al-36619/320-to-838',
        'https://www.apartments.com/mobile-al-36695/320-to-838',
        'https://www.apartments.com/altamonte-springs-fl-32714/320-to-838',
        'https://www.apartments.com/maywood-il-60153/320-to-838',
        'https://www.apartments.com/austin-tx-78739/320-to-838',
        'https://www.apartments.com/gary-in-46404/560-to-1198',
        'https://www.apartments.com/moreno-valley-ca-92551/560-to-1198',
        'https://www.apartments.com/lithonia-ga-30038/1000-to-1200',
        'https://www.apartments.com/owensboro-ky-42303/320-to-838',
        'https://www.apartments.com/lititz-pa-17543/319-to-478',
        'https://www.apartments.com/whitehall-pa-18052/320-to-838',
        'https://www.apartments.com/memphis-tn-38128/320-to-838',
        'https://www.apartments.com/topeka-ks-66615/320-to-838',
        'https://www.apartments.com/buena-park-ca-90621/560-to-1198',
        'https://www.apartments.com/milwaukee-wi-53218/560-to-1198',
        'https://www.apartments.com/port-huron-mi-48060/320-to-838',
        'https://www.apartments.com/champaign-il-61820/320-to-838',
        'https://www.apartments.com/phoenix-az-85023/1000-to-1200',
        'https://www.apartments.com/palm-beach-gardens-fl-33410/319-to-478',
        'https://www.apartments.com/pensacola-fl-32504/320-to-838',
        'https://www.apartments.com/manorville-ny-11949/560-to-1198',
        'https://www.apartments.com/parkville-md-21234/560-to-1198',
        'https://www.apartments.com/nan-nan-23501/1000-to-1200',
        'https://www.apartments.com/pompano-beach-fl-33060/320-to-838',
        'https://www.apartments.com/greenfield-ca-93927/560-to-1198',
        'https://www.apartments.com/waxahachie-tx-75165/320-to-838',
        'https://www.apartments.com/gary-in-46407/560-to-1198',
        'https://www.apartments.com/clanton-al-35045/319-to-478',
        'https://www.apartments.com/essexville-mi-48732/320-to-838',
        'https://www.apartments.com/birmingham-al-35206/320-to-838',
        'https://www.apartments.com/hyattsville-md-20784/560-to-1198',
        'https://www.apartments.com/evansville-in-47715/320-to-838',
        'https://www.apartments.com/tampa-fl-33606/320-to-838',
        'https://www.apartments.com/jackson-tn-38301/320-to-838',
        'https://www.apartments.com/indianapolis-in-46201/320-to-838',
        'https://www.apartments.com/jennings-la-70546/319-to-478',
        'https://www.apartments.com/rockford-il-61109/320-to-838',
        'https://www.apartments.com/fort-lauderdale-fl-33328/560-to-1198',
        'https://www.apartments.com/waynesboro-va-22980/320-to-838',
        'https://www.apartments.com/jacksonville-fl-32208/560-to-1198',
        'https://www.apartments.com/spring-hill-fl-34606/320-to-838',
        'https://www.apartments.com/fort-worth-tx-76120/320-to-838',
        'https://www.apartments.com/clifton-nj-7011/1000-to-1200',
        'https://www.apartments.com/citrus-heights-ca-95621/320-to-838',
        'https://www.apartments.com/clarkston-ga-30021/1000-to-1200',
        'https://www.apartments.com/rossville-ga-30741/320-to-838',
        'https://www.apartments.com/egg-harbor-township-nj-8234/560-to-1198',
        'https://www.apartments.com/lebanon-nh-3766/320-to-838',
        'https://www.apartments.com/fraser-mi-48026/320-to-838',
        'https://www.apartments.com/la-verne-ca-91750/320-to-838',
        'https://www.apartments.com/memphis-tn-38116/320-to-838',
        'https://www.apartments.com/fairfield-oh-45014/320-to-838',
        'https://www.apartments.com/dallas-tx-75231/320-to-838',
        'https://www.apartments.com/dallas-tx-75241/1000-to-1200',
        'https://www.apartments.com/mission-ks-66202/560-to-1198',
        'https://www.apartments.com/virginia-beach-va-23456/320-to-838',
        'https://www.apartments.com/jacksonville-nc-28546/560-to-1198',
        'https://www.apartments.com/kingsport-tn-37660/319-to-478',
        'https://www.apartments.com/fleming-island-fl-32003/560-to-1198',
        'https://www.apartments.com/harriman-tn-37748/320-to-838',
        'https://www.apartments.com/kansas-city-mo-64153/560-to-1198',
        'https://www.apartments.com/auburn-wa-98001/1000-to-1200',
        'https://www.apartments.com/moreno-valley-ca-92553/320-to-838',
        'https://www.apartments.com/jamaica-ny-11432/320-to-838',
        'https://www.apartments.com/columbus-ga-31907/320-to-838',
        'https://www.apartments.com/lagrange-ga-30240/320-to-838',
        'https://www.apartments.com/san-fernando-ca-91340/560-to-1198',
        'https://www.apartments.com/newport-news-va-23607/1000-to-1200',
        'https://www.apartments.com/santa-fe-nm-87506/560-to-1198',
        'https://www.apartments.com/marion-oh-43302/320-to-838',
        'https://www.apartments.com/jeffersonville-in-47130/560-to-1198',
        'https://www.apartments.com/winchester-va-22602/320-to-838',
        'https://www.apartments.com/chicago-il-60625/320-to-838',
        'https://www.apartments.com/mesa-az-85201/1000-to-1200',
        'https://www.apartments.com/oshkosh-wi-54902/320-to-838',
        'https://www.apartments.com/spokane-wa-99208/560-to-1198',
        'https://www.apartments.com/comer-ga-30629/560-to-1198',
        'https://www.apartments.com/nan-nan-99240/560-to-1198',
        'https://www.apartments.com/conway-ar-72034/560-to-1198',
        'https://www.apartments.com/oakwood-va-24631/319-to-478',
        'https://www.apartments.com/las-vegas-nv-89141/560-to-1198',
        'https://www.apartments.com/nan-nan-36331/560-to-1198',
        'https://www.apartments.com/mableton-ga-30126/320-to-838',
        'https://www.apartments.com/hartselle-al-35640/319-to-478',
        'https://www.apartments.com/newark-nj-7104/560-to-1198',
        'https://www.apartments.com/kissimmee-fl-34743/319-to-478',
        'https://www.apartments.com/south-hill-va-23970/560-to-1198',
        'https://www.apartments.com/schertz-tx-78154/560-to-1198',
        'https://www.apartments.com/grand-prairie-tx-75052/560-to-1198',
        'https://www.apartments.com/augusta-ga-30907/560-to-1198',
        'https://www.apartments.com/clarksville-tn-37042/320-to-838',
        'https://www.apartments.com/ferndale-ca-95536/320-to-838',
        'https://www.apartments.com/venice-fl-34293/1000-to-1200',
        'https://www.apartments.com/milford-ct-6460/319-to-478',
        'https://www.apartments.com/west-palm-beach-fl-33406/320-to-838',
        'https://www.apartments.com/bethune-sc-29009/320-to-838',
        'https://www.apartments.com/ozark-ar-72949/320-to-838',
        'https://www.apartments.com/abilene-tx-79603/320-to-838',
        'https://www.apartments.com/houston-tx-77029/560-to-1198',
        'https://www.apartments.com/albuquerque-nm-87114/319-to-478',
        'https://www.apartments.com/atlanta-ga-30315/319-to-478',
        'https://www.apartments.com/springfield-oh-45504/320-to-838',
        'https://www.apartments.com/chesapeake-va-23320/560-to-1198',
        'https://www.apartments.com/yucca-valley-ca-92284/560-to-1198',
        'https://www.apartments.com/columbia-md-21046/560-to-1198',
        'https://www.apartments.com/buckeye-az-85326/1000-to-1200',
        'https://www.apartments.com/cleveland-oh-44126/560-to-1198',
        'https://www.apartments.com/gainesville-fl-32641/319-to-478',
        'https://www.apartments.com/lumberton-nc-28358/319-to-478',
        'https://www.apartments.com/austell-ga-30106/319-to-478',
        'https://www.apartments.com/visalia-ca-93291/560-to-1198',
        'https://www.apartments.com/houston-oh-45333/319-to-478',
        'https://www.apartments.com/logan-oh-43138/320-to-838',
        'https://www.apartments.com/high-point-nc-27262/560-to-1198',
        'https://www.apartments.com/killeen-tx-76542/320-to-838',
        'https://www.apartments.com/henderson-nc-27537/1000-to-1200',
        'https://www.apartments.com/curtice-oh-43412/560-to-1198',
        'https://www.apartments.com/miami-fl-33133/560-to-1198',
        'https://www.apartments.com/toledo-oh-43611/319-to-478',
        'https://www.apartments.com/mays-landing-nj-8330/320-to-838',
        'https://www.apartments.com/milwaukee-wi-53208/320-to-838',
        'https://www.apartments.com/fort-wayne-in-46845/320-to-838',
        'https://www.apartments.com/atlanta-ga-30318/320-to-838',
        'https://www.apartments.com/sacramento-ca-95826/560-to-1198',
        'https://www.apartments.com/mesa-az-85207/320-to-838',
        'https://www.apartments.com/wister-ok-74966/319-to-478',
        'https://www.apartments.com/wahiawa-hi-96786/320-to-838',
        'https://www.apartments.com/winston-salem-nc-27107/320-to-838',
        'https://www.apartments.com/daytona-beach-fl-32118/320-to-838',
        'https://www.apartments.com/salt-lake-city-ut-84115/320-to-838'

            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
