import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/rockford-il-61104/400-to-1000',
        'https://www.apartments.com/herndon-va-20171/1000-to-1200',
        'https://www.apartments.com/reno-nv-89521/320-to-838',
        'https://www.apartments.com/fort-worth-tx-76104/320-to-838',
        'https://www.apartments.com/lancaster-pa-17603/400-to-1000',
        'https://www.apartments.com/punta-gorda-fl-33950/320-to-838',
        'https://www.apartments.com/austin-mn-0/400-to-1000',
        'https://www.apartments.com/cincinnati-oh-45237/400-to-1000',
        'https://www.apartments.com/sweetwater-tn-37874/320-to-838',
        'https://www.apartments.com/nan-nan-27130/560-to-1198',
        'https://www.apartments.com/endicott-ny-13760/320-to-838',
        'https://www.apartments.com/thonotosassa-fl-33592/1000-to-1200',
        'https://www.apartments.com/palatka-fl-32177/560-to-1198',
        'https://www.apartments.com/bunker-hill-wv-25413/319-to-478',
        'https://www.apartments.com/lynchburg-va-24502/320-to-838',
        'https://www.apartments.com/valdosta-ga-31602/319-to-478',
        'https://www.apartments.com/prattville-al-36067/560-to-1198',
        'https://www.apartments.com/taylor-tx-76574/320-to-838',
        'https://www.apartments.com/columbus-ga-31903/319-to-478',
        'https://www.apartments.com/braddock-pa-15104/320-to-838',
        'https://www.apartments.com/virginia-beach-va-23452/320-to-838',
        'https://www.apartments.com/hampton-va-23663/320-to-838',
        'https://www.apartments.com/bridgeport-ct-6608/400-to-1000',
        'https://www.apartments.com/bear-de-19701/319-to-478',
        'https://www.apartments.com/suwanee-ga-30024/1000-to-1200',
        'https://www.apartments.com/marrero-la-70072/400-to-1000',
        'https://www.apartments.com/hampton-va-23666/319-to-478',
        'https://www.apartments.com/plant-city-fl-33563/560-to-1198',
        'https://www.apartments.com/palm-bay-fl-32905/320-to-838',
        'https://www.apartments.com/coatesville-pa-19320/320-to-838',
        'https://www.apartments.com/nan-nan-51502/400-to-1000',
        'https://www.apartments.com/york-pa-17403/320-to-838',
        'https://www.apartments.com/temple-ga-30179/320-to-838',
        'https://www.apartments.com/springfield-mo-65802/320-to-838',
        'https://www.apartments.com/green-cove-springs-fl-32043/560-to-1198',
        'https://www.apartments.com/stockton-ca-95205/320-to-838',
        'https://www.apartments.com/trenton-nj-8628/320-to-838',
        'https://www.apartments.com/walker-la-70785/320-to-838',
        'https://www.apartments.com/lafayette-al-36862/319-to-478',
        'https://www.apartments.com/akron-oh-44306/320-to-838',
        'https://www.apartments.com/rock-hill-sc-29730/320-to-838',
        'https://www.apartments.com/covington-ga-30014/560-to-1198',
        'https://www.apartments.com/new-tripoli-pa-18066/320-to-838',
        'https://www.apartments.com/wyandotte-mi-48192/320-to-838',
        'https://www.apartments.com/jonesborough-tn-37659/320-to-838',
        'https://www.apartments.com/philadelphia-pa-19139/400-to-1000',
        'https://www.apartments.com/nashville-tn-37211/320-to-838',
        'https://www.apartments.com/ocala-fl-34482/400-to-1000',
        'https://www.apartments.com/allentown-pa-18104/320-to-838',
        'https://www.apartments.com/aiken-sc-29803/320-to-838',
        'https://www.apartments.com/selma-nc-27576/320-to-838',
        'https://www.apartments.com/savannah-ga-31404/560-to-1198',
        'https://www.apartments.com/oneida-ny-13421/400-to-1000',
        'https://www.apartments.com/philadelphia-pa-19122/320-to-838',
        'https://www.apartments.com/billings-mt-59101/320-to-838',
        'https://www.apartments.com/muskegon-mi-49445/319-to-478',
        'https://www.apartments.com/fort-wayne-in-46815/400-to-1000',
        'https://www.apartments.com/el-paso-tx-79925/319-to-478',
        'https://www.apartments.com/maryville-tn-37804/1000-to-1200',
        'https://www.apartments.com/fairview-heights-il-62208/400-to-1000',
        'https://www.apartments.com/memphis-tn-38115/320-to-838',
        'https://www.apartments.com/jacksonville-fl-32224/400-to-1000',
        'https://www.apartments.com/athol-ma-1331/320-to-838',
        'https://www.apartments.com/tupelo-ms-38801/320-to-838',
        'https://www.apartments.com/anaheim-ca-92805/560-to-1198',
        'https://www.apartments.com/ringgold-ga-30736/320-to-838',
        'https://www.apartments.com/dallas-tx-75243/400-to-1000',
        'https://www.apartments.com/pensacola-fl-32503/400-to-1000',
        'https://www.apartments.com/portland-me-4101/560-to-1198',
        'https://www.apartments.com/colorado-springs-co-80916/319-to-478',
        'https://www.apartments.com/spring-tx-77381/400-to-1000',
        'https://www.apartments.com/college-station-tx-77840/400-to-1000',
        'https://www.apartments.com/north-port-fl-34286/1000-to-1200',
        'https://www.apartments.com/bartow-fl-33830/320-to-838',
        'https://www.apartments.com/durham-nc-27712/560-to-1198',
        'https://www.apartments.com/jacksonville-fl-32218/400-to-1000',
        'https://www.apartments.com/port-richey-fl-34668/400-to-1000',
        'https://www.apartments.com/lakewood-oh-44107/400-to-1000',
        'https://www.apartments.com/fletcher-nc-28732/560-to-1198',
        'https://www.apartments.com/sanders-az-86512/1000-to-1200',
        'https://www.apartments.com/cookeville-tn-38501/560-to-1198',
        'https://www.apartments.com/barstow-ca-92311/1000-to-1200',
        'https://www.apartments.com/hattiesburg-ms-39401/320-to-838',
        'https://www.apartments.com/atlanta-ga-30331/560-to-1198',
        'https://www.apartments.com/pittston-pa-18640/320-to-838',
        'https://www.apartments.com/edmond-ok-73013/1000-to-1200',
        'https://www.apartments.com/hurricane-ut-84737/320-to-838',
        'https://www.apartments.com/alabaster-al-35007/560-to-1198',
        'https://www.apartments.com/warren-mi-48091/560-to-1198',
        'https://www.apartments.com/chula-vista-ca-91914/560-to-1198',
        'https://www.apartments.com/pomona-ca-91767/320-to-838',
        'https://www.apartments.com/gray-la-70359/320-to-838',
        'https://www.apartments.com/abilene-tx-79605/400-to-1000',
        'https://www.apartments.com/bakersfield-ca-93307/1000-to-1200',
        'https://www.apartments.com/missouri-city-tx-77459/1000-to-1200',
        'https://www.apartments.com/macon-ga-31204/320-to-838',
        'https://www.apartments.com/lakeland-fl-33801/319-to-478',
        'https://www.apartments.com/memphis-tn-38122/1000-to-1200',
        'https://www.apartments.com/farmington-mo-63640/320-to-838',
        'https://www.apartments.com/buffalo-ny-14219/560-to-1198',
        'https://www.apartments.com/ypsilanti-mi-48198/400-to-1000',
        'https://www.apartments.com/smyrna-ga-30080/320-to-838',
        'https://www.apartments.com/union-mo-63084/320-to-838',
        'https://www.apartments.com/baltimore-md-21231/320-to-838',
        'https://www.apartments.com/saint-joseph-mi-49085/400-to-1000',
        'https://www.apartments.com/lakeland-fl-33803/320-to-838',
        'https://www.apartments.com/hume-mo-64752/320-to-838',
        'https://www.apartments.com/panama-city-fl-32404/1000-to-1200',
        'https://www.apartments.com/oklahoma-city-ok-73118/400-to-1000',
        'https://www.apartments.com/columbus-ga-31907/320-to-838',
        'https://www.apartments.com/south-padre-island-tx-78597/560-to-1198',
        'https://www.apartments.com/decatur-ga-30034/320-to-838',
        'https://www.apartments.com/gainesville-fl-32601/320-to-838',
        'https://www.apartments.com/los-angeles-ca-90002/1000-to-1200',
        'https://www.apartments.com/conway-sc-29527/320-to-838',
        'https://www.apartments.com/broken-arrow-ok-74014/400-to-1000',
        'https://www.apartments.com/mount-airy-ga-30563/560-to-1198',
        'https://www.apartments.com/cleveland-oh-44103/320-to-838',
        'https://www.apartments.com/warren-mi-48089/320-to-838',
        'https://www.apartments.com/tallahassee-fl-32304/400-to-1000',
        'https://www.apartments.com/milford-de-19963/320-to-838',
        'https://www.apartments.com/auburn-al-36832/400-to-1000',
        'https://www.apartments.com/bronx-ny-10451/400-to-1000',
        'https://www.apartments.com/murfreesboro-tn-37130/320-to-838',
        'https://www.apartments.com/dover-tn-37058/320-to-838',
        'https://www.apartments.com/las-vegas-nv-89142/400-to-1000',
        'https://www.apartments.com/south-houston-tx-77587/1000-to-1200',
        'https://www.apartments.com/chicago-il-60624/319-to-478',
        'https://www.apartments.com/leesburg-fl-34748/400-to-1000',
        'https://www.apartments.com/newark-nj-7102/319-to-478',
        'https://www.apartments.com/detroit-mi-48224/320-to-838',
        'https://www.apartments.com/lowell-ma-1852/400-to-1000',
        'https://www.apartments.com/atlanta-ga-30334/400-to-1000',
        'https://www.apartments.com/hollywood-fl-33020/400-to-1000',
        'https://www.apartments.com/somerset-ky-42501/320-to-838',
        'https://www.apartments.com/georgetown-de-19947/560-to-1198',
        'https://www.apartments.com/trenton-nj-8610/560-to-1198',
        'https://www.apartments.com/atlanta-ga-30312/400-to-1000',
        'https://www.apartments.com/warner-robins-ga-31093/320-to-838',
        'https://www.apartments.com/manning-sc-29102/320-to-838',
        'https://www.apartments.com/wilmington-nc-28403/320-to-838',
        'https://www.apartments.com/rome-ga-30161/320-to-838',
        'https://www.apartments.com/deland-fl-32720/560-to-1198',
        'https://www.apartments.com/augusta-ga-30904/320-to-838',
        'https://www.apartments.com/waukesha-wi-53186/560-to-1198',
        'https://www.apartments.com/arlington-tx-76017/560-to-1198',
        'https://www.apartments.com/hempstead-tx-77445/320-to-838',
        'https://www.apartments.com/texarkana-ar-71854/319-to-478',
        'https://www.apartments.com/memphis-tn-38127/320-to-838',
        'https://www.apartments.com/spokane-wa-99206/400-to-1000',
        'https://www.apartments.com/fort-collins-co-80526/320-to-838',
        'https://www.apartments.com/georgetown-oh-45121/319-to-478',
        'https://www.apartments.com/mansfield-tx-76063/400-to-1000',
        'https://www.apartments.com/lubbock-tx-79413/320-to-838',
        'https://www.apartments.com/fayetteville-nc-28314/320-to-838',
        'https://www.apartments.com/rome-ga-30165/400-to-1000',
        'https://www.apartments.com/glen-burnie-md-21061/1000-to-1200',
        'https://www.apartments.com/sahuarita-az-85629/560-to-1198',
        'https://www.apartments.com/tampa-fl-33619/320-to-838',
        'https://www.apartments.com/vermilion-oh-44089/320-to-838',
        'https://www.apartments.com/lafayette-la-70501/320-to-838',
        'https://www.apartments.com/chicago-il-60620/560-to-1198',
        'https://www.apartments.com/milford-ct-6460/320-to-838',
        'https://www.apartments.com/gastonia-nc-28052/400-to-1000',
        'https://www.apartments.com/batesville-ms-38606/320-to-838',
        'https://www.apartments.com/pasadena-tx-77506/1000-to-1200',
        'https://www.apartments.com/farmington-nm-87401/319-to-478',
        'https://www.apartments.com/indianapolis-in-46227/320-to-838',
        'https://www.apartments.com/milwaukee-wi-53209/400-to-1000',
        'https://www.apartments.com/florence-sc-29506/320-to-838',
        'https://www.apartments.com/saint-paul-mn-55117/400-to-1000',
        'https://www.apartments.com/dayton-oh-45403/400-to-1000',
        'https://www.apartments.com/saint-petersburg-fl-33702/400-to-1000',
        'https://www.apartments.com/houston-tx-77016/400-to-1000',
        'https://www.apartments.com/anderson-sc-29621/400-to-1000',
        'https://www.apartments.com/memphis-tn-38111/1000-to-1200',
        'https://www.apartments.com/buffalo-ny-14212/320-to-838',
        'https://www.apartments.com/indianapolis-in-46237/400-to-1000',
        'https://www.apartments.com/phoenix-az-85031/400-to-1000',
        'https://www.apartments.com/houston-tx-77008/560-to-1198',
        'https://www.apartments.com/hartford-ct-6105/400-to-1000',
        'https://www.apartments.com/riverdale-ga-30274/400-to-1000',
        'https://www.apartments.com/yanceyville-nc-27379/320-to-838',
        'https://www.apartments.com/pompano-beach-fl-33064/320-to-838',
        'https://www.apartments.com/canton-oh-44708/400-to-1000',
        'https://www.apartments.com/tarboro-nc-27886/560-to-1198',
        'https://www.apartments.com/lancaster-pa-17602/560-to-1198',
        'https://www.apartments.com/san-antonio-tx-78244/560-to-1198',
        'https://www.apartments.com/erie-pa-16508/320-to-838',
        'https://www.apartments.com/fresno-ca-93706/400-to-1000',
        'https://www.apartments.com/oklahoma-city-ok-73105/320-to-838',
        'https://www.apartments.com/mesa-az-85202/320-to-838',
        'https://www.apartments.com/murfreesboro-tn-37129/1000-to-1200',
        'https://www.apartments.com/lewiston-woodville-nc-27849/319-to-478',
        'https://www.apartments.com/nashville-tn-37214/320-to-838',
        'https://www.apartments.com/greeley-co-80634/560-to-1198',
        'https://www.apartments.com/terre-haute-in-47802/560-to-1198',
        'https://www.apartments.com/chattanooga-tn-37402/1000-to-1200',
        'https://www.apartments.com/dallas-tx-75214/400-to-1000',
        'https://www.apartments.com/sacramento-ca-95832/320-to-838',
        'https://www.apartments.com/milford-tx-76670/560-to-1198',
        'https://www.apartments.com/tulsa-ok-74126/320-to-838',
        'https://www.apartments.com/falls-church-va-22043/560-to-1198',
        'https://www.apartments.com/saint-petersburg-fl-33711/560-to-1198',
        'https://www.apartments.com/jefferson-ga-30549/320-to-838',
        'https://www.apartments.com/rex-ga-30273/560-to-1198',
        'https://www.apartments.com/san-antonio-tx-78250/320-to-838',
        'https://www.apartments.com/lockport-ny-14094/320-to-838',
        'https://www.apartments.com/staten-island-ny-10301/320-to-838',
        'https://www.apartments.com/columbus-oh-43230/1000-to-1200',
        'https://www.apartments.com/belmar-nj-7719/320-to-838',
        'https://www.apartments.com/pueblo-co-81008/560-to-1198',
        'https://www.apartments.com/raleigh-nc-27603/320-to-838',
        'https://www.apartments.com/tullahoma-tn-37388/319-to-478',
        'https://www.apartments.com/asheville-nc-28803/320-to-838',
        'https://www.apartments.com/nantucket-ma-2554/400-to-1000',
        'https://www.apartments.com/spring-hill-fl-34608/320-to-838',
        'https://www.apartments.com/south-bend-in-46613/400-to-1000',
        'https://www.apartments.com/pueblo-co-81001/319-to-478',
        'https://www.apartments.com/molino-fl-32577/400-to-1000',
        'https://www.apartments.com/lithonia-ga-30058/400-to-1000',
        'https://www.apartments.com/chicago-il-60628/400-to-1000',
        'https://www.apartments.com/waco-tx-76711/560-to-1198',
        'https://www.apartments.com/hemet-ca-92544/1000-to-1200',
        'https://www.apartments.com/phoenix-az-85040/560-to-1198',
        'https://www.apartments.com/las-cruces-nm-88001/400-to-1000',
        'https://www.apartments.com/telford-tn-37690/320-to-838',
        'https://www.apartments.com/leander-tx-78641/319-to-478',
        'https://www.apartments.com/hammond-in-46323/320-to-838',
        'https://www.apartments.com/nan-nan-74602/319-to-478'

        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
