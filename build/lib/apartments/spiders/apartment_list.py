import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/alvin-tx-77511/320-to-838',
        'https://www.apartments.com/houston-tx-77088/400-to-1000',
        'https://www.apartments.com/worcester-ma-1602/1000-to-1200',
        'https://www.apartments.com/hopkinsville-ky-42240/1000-to-1200',
        'https://www.apartments.com/sacramento-ca-95823/400-to-1000',
        'https://www.apartments.com/la-marque-tx-77568/1000-to-1200',
        'https://www.apartments.com/rochester-nh-3868/320-to-838',
        'https://www.apartments.com/alsip-il-60803/400-to-1000',
        'https://www.apartments.com/salisbury-nc-28146/320-to-838',
        'https://www.apartments.com/raymond-nh-3077/1000-to-1200',
        'https://www.apartments.com/milwaukee-wi-53220/320-to-838',
        'https://www.apartments.com/spring-tx-77379/319-to-478',
        'https://www.apartments.com/oceanside-ca-92054/400-to-1000',
        'https://www.apartments.com/atlanta-ga-30318/400-to-1000',
        'https://www.apartments.com/rich-hill-mo-64779/400-to-1000',
        'https://www.apartments.com/saint-petersburg-fl-33705/400-to-1000',
        'https://www.apartments.com/rittman-oh-44270/400-to-1000',
        'https://www.apartments.com/orlando-fl-32822/400-to-1000',
        'https://www.apartments.com/alton-il-62002/320-to-838',
        'https://www.apartments.com/hope-mills-nc-28348/400-to-1000',
        'https://www.apartments.com/westminster-md-21157/560-to-1198',
        'https://www.apartments.com/indianapolis-in-46222/400-to-1000',
        'https://www.apartments.com/nan-nan-0/400-to-1000',
        'https://www.apartments.com/fort-worth-tx-76103/400-to-1000',
        'https://www.apartments.com/jasper-ga-30143/400-to-1000',
        'https://www.apartments.com/atlanta-ga-30311/400-to-1000',
        'https://www.apartments.com/newark-nj-7102/1000-to-1200',
        'https://www.apartments.com/columbus-oh-43085/320-to-838',
        'https://www.apartments.com/lake-wales-fl-33853/560-to-1198',
        'https://www.apartments.com/indianapolis-in-46235/400-to-1000',
        'https://www.apartments.com/collins-ms-39428/319-to-478',
        'https://www.apartments.com/milwaukee-wi-53202/560-to-1198',
        'https://www.apartments.com/fayetteville-nc-28314/320-to-838',
        'https://www.apartments.com/clearwater-fl-33764/400-to-1000',
        'https://www.apartments.com/madison-in-47250/400-to-1000',
        'https://www.apartments.com/atlanta-ga-30344/400-to-1000',
        'https://www.apartments.com/kissimmee-fl-34741/1000-to-1200',
        'https://www.apartments.com/winnemucca-nv-89445/400-to-1000',
        'https://www.apartments.com/torrington-ct-6790/400-to-1000',
        'https://www.apartments.com/blackshear-ga-31516/400-to-1000',
        'https://www.apartments.com/brunswick-ga-31525/400-to-1000',
        'https://www.apartments.com/sonora-ca-95370/320-to-838',
        'https://www.apartments.com/new-orleans-la-70127/400-to-1000',
        'https://www.apartments.com/gulfport-ms-39501/319-to-478',
        'https://www.apartments.com/tuscaloosa-al-35405/400-to-1000',
        'https://www.apartments.com/orlando-fl-32807/400-to-1000',
        'https://www.apartments.com/tucson-az-85705/320-to-838',
        'https://www.apartments.com/houston-tx-77036/560-to-1198',
        'https://www.apartments.com/moreno-valley-ca-92553/400-to-1000',
        'https://www.apartments.com/pontiac-mi-48340/560-to-1198',
        'https://www.apartments.com/jackson-ms-39206/400-to-1000',
        'https://www.apartments.com/charlotte-nc-28205/560-to-1198',
        'https://www.apartments.com/pascagoula-ms-39567/320-to-838',
        'https://www.apartments.com/allentown-pa-18102/400-to-1000',
        'https://www.apartments.com/winston-salem-nc-27105/400-to-1000',
        'https://www.apartments.com/conroe-tx-77301/320-to-838',
        'https://www.apartments.com/phoenix-az-85032/400-to-1000',
        'https://www.apartments.com/san-angelo-tx-76903/560-to-1198',
        'https://www.apartments.com/rockingham-nc-28379/400-to-1000',
        'https://www.apartments.com/fort-lauderdale-fl-33317/1000-to-1200',
        'https://www.apartments.com/vancouver-wa-98660/400-to-1000',
        'https://www.apartments.com/kinston-nc-28504/320-to-838',
        'https://www.apartments.com/hawaiian-gardens-ca-90716/400-to-1000',
        'https://www.apartments.com/manitou-springs-co-80829/1000-to-1200',
        'https://www.apartments.com/bronx-ny-10475/400-to-1000',
        'https://www.apartments.com/gadsden-al-35903/320-to-838',
        'https://www.apartments.com/yakima-wa-98901/400-to-1000',
        'https://www.apartments.com/reno-nv-89502/400-to-1000',
        'https://www.apartments.com/hallstead-pa-18822/400-to-1000',
        'https://www.apartments.com/victorville-ca-92392/560-to-1198',
        'https://www.apartments.com/nan-nan-34973/400-to-1000',
        'https://www.apartments.com/phoenix-az-85043/400-to-1000',
        'https://www.apartments.com/roachdale-in-46172/320-to-838',
        'https://www.apartments.com/north-little-rock-ar-72114/560-to-1198',
        'https://www.apartments.com/milwaukee-wi-53212/400-to-1000',
        'https://www.apartments.com/riverview-fl-33569/400-to-1000',
        'https://www.apartments.com/charlotte-nc-28212/400-to-1000',
        'https://www.apartments.com/austell-ga-30168/400-to-1000',
        'https://www.apartments.com/carroll-oh-43112/560-to-1198',
        'https://www.apartments.com/elmont-ny-11003/560-to-1198',
        'https://www.apartments.com/fresno-ca-93703/400-to-1000',
        'https://www.apartments.com/port-saint-lucie-fl-34983/320-to-838',
        'https://www.apartments.com/rochester-ny-14606/320-to-838',
        'https://www.apartments.com/chicago-il-60619/400-to-1000',
        'https://www.apartments.com/detroit-mi-48221/560-to-1198',
        'https://www.apartments.com/perris-ca-92570/1000-to-1200',
        'https://www.apartments.com/jacksonville-fl-32254/320-to-838',
        'https://www.apartments.com/cape-coral-fl-33904/400-to-1000',
        'https://www.apartments.com/charlotte-nc-28208/400-to-1000',
        'https://www.apartments.com/florence-ky-41042/320-to-838',
        'https://www.apartments.com/ada-ok-74820/320-to-838',
        'https://www.apartments.com/davenport-ia-52804/560-to-1198',
        'https://www.apartments.com/loris-sc-29569/560-to-1198',
        'https://www.apartments.com/midland-city-al-36350/320-to-838',
        'https://www.apartments.com/greenwood-ar-72936/319-to-478',
        'https://www.apartments.com/detroit-mi-48217/320-to-838',
        'https://www.apartments.com/marengo-oh-43334/320-to-838',
        'https://www.apartments.com/north-east-md-21901/560-to-1198',
        'https://www.apartments.com/beachwood-oh-44122/320-to-838',
        'https://www.apartments.com/commerce-city-co-80022/560-to-1198',
        'https://www.apartments.com/ocala-fl-34480/400-to-1000',
        'https://www.apartments.com/batesville-ar-72501/400-to-1000',
        'https://www.apartments.com/chicago-il-60636/400-to-1000',
        'https://www.apartments.com/germantown-md-20876/1000-to-1200',
        'https://www.apartments.com/ocala-fl-34472/320-to-838',
        'https://www.apartments.com/fort-myers-fl-33905/319-to-478',
        'https://www.apartments.com/muskegon-mi-49444/400-to-1000',
        'https://www.apartments.com/twin-falls-id-83301/320-to-838',
        'https://www.apartments.com/aurora-co-80010/1000-to-1200',
        'https://www.apartments.com/florence-sc-29506/320-to-838',
        'https://www.apartments.com/east-orange-nj-7018/1000-to-1200',
        'https://www.apartments.com/south-richmond-hill-ny-11419/400-to-1000',
        'https://www.apartments.com/green-valley-az-85614/320-to-838',
        'https://www.apartments.com/bradenton-fl-34210/560-to-1198',
        'https://www.apartments.com/columbus-oh-43228/400-to-1000',
        'https://www.apartments.com/corpus-christi-tx-78413/400-to-1000',
        'https://www.apartments.com/phoenix-az-85051/400-to-1000',
        'https://www.apartments.com/chalmette-la-70043/560-to-1198',
        'https://www.apartments.com/staunton-va-24401/320-to-838',
        'https://www.apartments.com/saint-louis-mo-63121/400-to-1000',
        'https://www.apartments.com/tuscaloosa-al-35404/400-to-1000',
        'https://www.apartments.com/sacramento-ca-95815/560-to-1198',
        'https://www.apartments.com/las-vegas-nv-89107/400-to-1000',
        'https://www.apartments.com/athens-tx-75751/319-to-478',
        'https://www.apartments.com/pickens-sc-29671/320-to-838',
        'https://www.apartments.com/massillon-oh-44646/400-to-1000',
        'https://www.apartments.com/dallas-ga-30132/560-to-1198',
        'https://www.apartments.com/jackson-nc-27845/320-to-838',
        'https://www.apartments.com/nan-nan-7049/400-to-1000',
        'https://www.apartments.com/bloomington-in-47401/1000-to-1200',
        'https://www.apartments.com/farmington-mi-48331/319-to-478',
        'https://www.apartments.com/homestead-fl-33035/560-to-1198',
        'https://www.apartments.com/dunnellon-fl-34433/319-to-478',
        'https://www.apartments.com/jacksonville-fl-32256/400-to-1000',
        'https://www.apartments.com/louisville-ky-40210/319-to-478',
        'https://www.apartments.com/cleveland-oh-44102/320-to-838',
        'https://www.apartments.com/gastonia-nc-28052/400-to-1000',
        'https://www.apartments.com/los-angeles-ca-90063/400-to-1000',
        'https://www.apartments.com/waukesha-wi-53186/560-to-1198',
        'https://www.apartments.com/lake-cormorant-ms-38641/1000-to-1200',
        'https://www.apartments.com/nokomis-fl-34275/400-to-1000',
        'https://www.apartments.com/richmond-va-23222/400-to-1000',
        'https://www.apartments.com/valdosta-ga-31602/320-to-838',
        'https://www.apartments.com/evanston-il-60202/400-to-1000',
        'https://www.apartments.com/colorado-springs-co-80918/400-to-1000',
        'https://www.apartments.com/north-vernon-in-47265/319-to-478',
        'https://www.apartments.com/sanford-nc-27330/320-to-838',
        'https://www.apartments.com/moreno-valley-ca-92551/560-to-1198',
        'https://www.apartments.com/sanford-fl-32771/320-to-838',
        'https://www.apartments.com/orlando-fl-32801/560-to-1198',
        'https://www.apartments.com/hermiston-or-97838/320-to-838',
        'https://www.apartments.com/peoria-az-85345/400-to-1000',
        'https://www.apartments.com/bonney-lake-wa-98391/320-to-838',
        'https://www.apartments.com/plaquemine-la-70764/320-to-838',
        'https://www.apartments.com/hickory-nc-28601/560-to-1198',
        'https://www.apartments.com/defuniak-springs-fl-32435/320-to-838',
        'https://www.apartments.com/fort-worth-tx-76119/320-to-838',
        'https://www.apartments.com/cleveland-oh-44101/1000-to-1200',
        'https://www.apartments.com/san-bernardino-ca-92401/1000-to-1200',
        'https://www.apartments.com/richmond-va-23224/400-to-1000',
        'https://www.apartments.com/sarasota-fl-34233/400-to-1000',
        'https://www.apartments.com/greensboro-nc-27405/400-to-1000',
        'https://www.apartments.com/las-vegas-nv-89101/400-to-1000',
        'https://www.apartments.com/fullerton-ca-92831/400-to-1000',
        'https://www.apartments.com/san-antonio-tx-78201/1000-to-1200',
        'https://www.apartments.com/grandview-tx-76050/320-to-838',
        'https://www.apartments.com/bryant-ar-72022/560-to-1198',
        'https://www.apartments.com/cincinnati-oh-45211/400-to-1000',
        'https://www.apartments.com/danville-va-24540/320-to-838',
        'https://www.apartments.com/tallahassee-fl-32304/400-to-1000',
        'https://www.apartments.com/independence-mo-64054/400-to-1000',
        'https://www.apartments.com/deltona-fl-32738/320-to-838',
        'https://www.apartments.com/clinton-sc-29325/400-to-1000',
        'https://www.apartments.com/trenton-nj-8618/320-to-838',
        'https://www.apartments.com/spokane-wa-99204/400-to-1000',
        'https://www.apartments.com/lakeland-fl-33815/560-to-1198',
        'https://www.apartments.com/bakersfield-ca-93301/320-to-838',
        'https://www.apartments.com/la-porte-tx-77571/400-to-1000',
        'https://www.apartments.com/antioch-tn-37013/560-to-1198',
        'https://www.apartments.com/lakewood-wa-98499/320-to-838',
        'https://www.apartments.com/perris-ca-92571/1000-to-1200',
        'https://www.apartments.com/macon-ga-31204/320-to-838',
        'https://www.apartments.com/port-orange-fl-32129/400-to-1000',
        'https://www.apartments.com/clinton-nc-28328/400-to-1000',
        'https://www.apartments.com/glendale-az-85305/400-to-1000',
        'https://www.apartments.com/spring-lake-nc-28390/320-to-838',
        'https://www.apartments.com/clarksville-tn-37043/400-to-1000',
        'https://www.apartments.com/centreville-mi-49032/400-to-1000',
        'https://www.apartments.com/apple-valley-ca-92307/320-to-838',
        'https://www.apartments.com/marshalltown-ia-50158/400-to-1000',
        'https://www.apartments.com/greenville-sc-29605/400-to-1000',
        'https://www.apartments.com/ontario-ca-91762/400-to-1000',
        'https://www.apartments.com/hallandale-fl-33009/400-to-1000',
        'https://www.apartments.com/houston-tx-77091/1000-to-1200',
        'https://www.apartments.com/chicago-il-60623/400-to-1000',
        'https://www.apartments.com/philadelphia-pa-19144/560-to-1198',
        'https://www.apartments.com/athens-tn-37303/400-to-1000',
        'https://www.apartments.com/hattiesburg-ms-39401/400-to-1000',
        'https://www.apartments.com/gainesville-ga-30501/400-to-1000',
        'https://www.apartments.com/los-angeles-ca-90043/560-to-1198',
        'https://www.apartments.com/lafayette-in-47904/400-to-1000',
        'https://www.apartments.com/lancaster-ca-93535/320-to-838',
        'https://www.apartments.com/salem-or-97301/400-to-1000',
        'https://www.apartments.com/bellevue-wa-98006/400-to-1000',
        'https://www.apartments.com/san-diego-ca-92104/400-to-1000',
        'https://www.apartments.com/scranton-pa-18509/400-to-1000',
        'https://www.apartments.com/cleveland-oh-44105/560-to-1198',
        'https://www.apartments.com/bakersfield-ca-93312/1000-to-1200',
        'https://www.apartments.com/cleveland-oh-44110/400-to-1000',
        'https://www.apartments.com/jacksonville-beach-fl-32250/320-to-838',
        'https://www.apartments.com/tucker-ga-30084/400-to-1000',
        'https://www.apartments.com/new-york-ny-10027/400-to-1000',
        'https://www.apartments.com/austin-tx-78702/400-to-1000',
        'https://www.apartments.com/toledo-oh-43611/560-to-1198',
        'https://www.apartments.com/rochester-ny-14609/320-to-838',
        'https://www.apartments.com/fresno-ca-93727/400-to-1000',
        'https://www.apartments.com/murrieta-ca-92563/400-to-1000',
        'https://www.apartments.com/spokane-wa-99201/320-to-838',
        'https://www.apartments.com/independence-mo-64058/320-to-838',
        'https://www.apartments.com/little-rock-ar-72205/400-to-1000',
        'https://www.apartments.com/coxs-creek-ky-40013/400-to-1000',
        'https://www.apartments.com/chicago-il-60649/560-to-1198',
        'https://www.apartments.com/ash-nc-28420/400-to-1000',
        'https://www.apartments.com/racine-wi-53403/400-to-1000',
        'https://www.apartments.com/saint-louis-mo-63116/320-to-838',
        'https://www.apartments.com/wolcott-ct-6716/560-to-1198'



        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
