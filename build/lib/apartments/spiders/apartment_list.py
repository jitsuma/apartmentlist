import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/tarboro-nc-27886/400-to-1000',
        'https://www.apartments.com/green-bay-wi-54303/320-to-838',
        'https://www.apartments.com/belleville-il-62221/400-to-1000',
        'https://www.apartments.com/memphis-tn-38116/400-to-1000',
        'https://www.apartments.com/flushing-mi-0/400-to-1000',
        'https://www.apartments.com/barstow-ca-92311/319-to-478',
        'https://www.apartments.com/lansing-mi-48917/320-to-838',
        'https://www.apartments.com/powder-springs-ga-30127/400-to-1000',
        'https://www.apartments.com/sparks-nv-89431/400-to-1000',
        'https://www.apartments.com/nashville-tn-37221/400-to-1000',
        'https://www.apartments.com/macon-ga-31204/320-to-838',
        'https://www.apartments.com/canton-nc-28716/400-to-1000',
        'https://www.apartments.com/lafayette-la-70506/320-to-838',
        'https://www.apartments.com/waterville-me-4901/560-to-1198',
        'https://www.apartments.com/oshkosh-wi-54901/320-to-838',
        'https://www.apartments.com/washington-dc-20002/320-to-838',
        'https://www.apartments.com/kokomo-in-46901/319-to-478',
        'https://www.apartments.com/okeechobee-fl-34974/320-to-838',
        'https://www.apartments.com/atlanta-ga-30349/400-to-1000',
        'https://www.apartments.com/tampa-fl-33613/560-to-1198',
        'https://www.apartments.com/saint-louis-mo-63136/400-to-1000',
        'https://www.apartments.com/norwich-ct-6360/400-to-1000',
        'https://www.apartments.com/meadville-pa-16335/320-to-838',
        'https://www.apartments.com/crestline-ca-92325/400-to-1000',
        'https://www.apartments.com/gate-city-va-24251/400-to-1000',
        'https://www.apartments.com/wadesboro-nc-28170/400-to-1000',
        'https://www.apartments.com/henderson-nv-89074/400-to-1000',
        'https://www.apartments.com/atlanta-ga-30315/320-to-838',
        'https://www.apartments.com/las-vegas-nv-89104/400-to-1000',
        'https://www.apartments.com/charleston-wv-25302/400-to-1000',
        'https://www.apartments.com/webster-ma-1570/400-to-1000',
        'https://www.apartments.com/corbin-ky-40701/319-to-478',
        'https://www.apartments.com/hartford-ct-6114/320-to-838',
        'https://www.apartments.com/chickasha-ok-73018/400-to-1000',
        'https://www.apartments.com/san-antonio-tx-78214/400-to-1000',
        'https://www.apartments.com/indianapolis-in-46237/400-to-1000',
        'https://www.apartments.com/milton-de-19968/400-to-1000',
        'https://www.apartments.com/buxton-me-4093/400-to-1000',
        'https://www.apartments.com/kissimmee-fl-34759/1000-to-1200',
        'https://www.apartments.com/jacksonville-fl-32277/320-to-838',
        'https://www.apartments.com/carmichael-ca-95608/400-to-1000',
        'https://www.apartments.com/fresno-ca-93721/560-to-1198',
        'https://www.apartments.com/hampton-ga-30228/320-to-838',
        'https://www.apartments.com/las-vegas-nv-89146/400-to-1000',
        'https://www.apartments.com/kansas-city-mo-64138/560-to-1198',
        'https://www.apartments.com/saint-louis-mo-63133/400-to-1000',
        'https://www.apartments.com/spartanburg-sc-29303/400-to-1000',
        'https://www.apartments.com/york-pa-17401/320-to-838',
        'https://www.apartments.com/buckeye-az-85396/400-to-1000',
        'https://www.apartments.com/augusta-ga-30906/400-to-1000',
        'https://www.apartments.com/newark-nj-7106/400-to-1000',
        'https://www.apartments.com/topeka-ks-66617/560-to-1198',
        'https://www.apartments.com/nan-nan-22466/400-to-1000',
        'https://www.apartments.com/shreveport-la-71107/400-to-1000',
        'https://www.apartments.com/knoxville-tn-37914/400-to-1000',
        'https://www.apartments.com/tulsa-ok-74112/560-to-1198',
        'https://www.apartments.com/cleveland-oh-44105/1000-to-1200',
        'https://www.apartments.com/durham-nc-27701/400-to-1000',
        'https://www.apartments.com/florence-al-35634/319-to-478',
        'https://www.apartments.com/graham-nc-27253/400-to-1000',
        'https://www.apartments.com/winchester-ky-40391/320-to-838',
        'https://www.apartments.com/willingboro-nj-8046/560-to-1198',
        'https://www.apartments.com/decatur-al-35603/320-to-838',
        'https://www.apartments.com/phoenix-az-85017/319-to-478',
        'https://www.apartments.com/baton-rouge-la-70806/400-to-1000',
        'https://www.apartments.com/elizabethton-tn-37643/400-to-1000',
        'https://www.apartments.com/south-bend-in-46614/319-to-478',
        'https://www.apartments.com/palmyra-pa-17078/400-to-1000',
        'https://www.apartments.com/minneapolis-mn-55412/400-to-1000',
        'https://www.apartments.com/avant-ok-74001/319-to-478',
        'https://www.apartments.com/richmond-va-23220/320-to-838',
        'https://www.apartments.com/portland-or-97236/320-to-838',
        'https://www.apartments.com/dayton-oh-45416/320-to-838',
        'https://www.apartments.com/oceanside-ca-92056/400-to-1000',
        'https://www.apartments.com/pontiac-mi-48340/320-to-838',
        'https://www.apartments.com/port-richey-fl-34668/560-to-1198',
        'https://www.apartments.com/nan-nan-65830/400-to-1000',
        'https://www.apartments.com/missoula-mt-59802/320-to-838',
        'https://www.apartments.com/saint-petersburg-fl-33707/1000-to-1200',
        'https://www.apartments.com/waterbury-ct-6708/400-to-1000',
        'https://www.apartments.com/madison-wi-53713/320-to-838',
        'https://www.apartments.com/wesley-chapel-fl-33544/320-to-838',
        'https://www.apartments.com/chandler-az-85248/400-to-1000',
        'https://www.apartments.com/mustang-ok-73064/400-to-1000',
        'https://www.apartments.com/kingwood-tx-77339/400-to-1000',
        'https://www.apartments.com/hope-mills-nc-28348/560-to-1198',
        'https://www.apartments.com/spring-lake-mi-49456/560-to-1198',
        'https://www.apartments.com/brea-ca-92821/560-to-1198',
        'https://www.apartments.com/grand-junction-co-81501/400-to-1000',
        'https://www.apartments.com/bunn-nc-27508/400-to-1000',
        'https://www.apartments.com/cincinnati-oh-45211/320-to-838',
        'https://www.apartments.com/san-diego-ca-92154/319-to-478',
        'https://www.apartments.com/quakertown-pa-18951/319-to-478',
        'https://www.apartments.com/hickory-nc-28602/320-to-838',
        'https://www.apartments.com/saint-paul-mn-55113/1000-to-1200',
        'https://www.apartments.com/fredericksburg-va-22405/400-to-1000',
        'https://www.apartments.com/hesperia-ca-92345/400-to-1000',
        'https://www.apartments.com/elkhart-in-46514/560-to-1198',
        'https://www.apartments.com/sacramento-ca-95820/400-to-1000',
        'https://www.apartments.com/highlands-nj-7732/1000-to-1200',
        'https://www.apartments.com/west-palm-beach-fl-33417/319-to-478',
        'https://www.apartments.com/san-bernardino-ca-92404/400-to-1000',
        'https://www.apartments.com/saint-louis-mo-63111/400-to-1000',
        'https://www.apartments.com/cave-junction-or-97523/400-to-1000',
        'https://www.apartments.com/ocala-fl-34470/400-to-1000',
        'https://www.apartments.com/houston-tx-77067/560-to-1198',
        'https://www.apartments.com/fontana-ca-92336/400-to-1000',
        'https://www.apartments.com/fort-washington-md-20744/400-to-1000',
        'https://www.apartments.com/atlanta-ga-30331/319-to-478',
        'https://www.apartments.com/spokane-wa-99204/400-to-1000',
        'https://www.apartments.com/frankford-de-19945/400-to-1000',
        'https://www.apartments.com/dallas-tx-75216/400-to-1000',
        'https://www.apartments.com/kaufman-tx-75142/400-to-1000',
        'https://www.apartments.com/kissimmee-fl-34747/1000-to-1200',
        'https://www.apartments.com/fitzgerald-ga-31750/319-to-478',
        'https://www.apartments.com/terre-haute-in-47807/319-to-478',
        'https://www.apartments.com/winston-salem-nc-27107/400-to-1000',
        'https://www.apartments.com/philadelphia-pa-19138/1000-to-1200',
        'https://www.apartments.com/redlands-ca-92374/400-to-1000',
        'https://www.apartments.com/rosemead-ca-91770/400-to-1000',
        'https://www.apartments.com/las-vegas-nv-89101/400-to-1000',
        'https://www.apartments.com/charlotte-nc-28273/560-to-1198',
        'https://www.apartments.com/lancaster-ca-93534/400-to-1000',
        'https://www.apartments.com/matthews-nc-28105/400-to-1000',
        'https://www.apartments.com/anderson-in-46012/320-to-838',
        'https://www.apartments.com/west-monroe-la-71291/320-to-838',
        'https://www.apartments.com/sedalia-mo-65301/320-to-838',
        'https://www.apartments.com/jackson-tn-38305/560-to-1198',
        'https://www.apartments.com/newport-news-va-23607/560-to-1198',
        'https://www.apartments.com/fresno-ca-93722/400-to-1000',
        'https://www.apartments.com/la-porte-tx-77571/400-to-1000',
        'https://www.apartments.com/stillwater-mn-55082/320-to-838',
        'https://www.apartments.com/south-burlington-vt-5403/560-to-1198',
        'https://www.apartments.com/riverdale-ga-30274/560-to-1198',
        'https://www.apartments.com/highland-ca-92346/400-to-1000',
        'https://www.apartments.com/nan-nan-40580/320-to-838',
        'https://www.apartments.com/sevierville-tn-37876/320-to-838',
        'https://www.apartments.com/san-antonio-tx-78207/400-to-1000',
        'https://www.apartments.com/milwaukee-wi-53214/320-to-838',
        'https://www.apartments.com/madera-ca-93638/400-to-1000',
        'https://www.apartments.com/north-port-fl-34287/320-to-838',
        'https://www.apartments.com/huntsville-al-35810/400-to-1000',
        'https://www.apartments.com/denison-tx-75020/320-to-838',
        'https://www.apartments.com/greenville-sc-29605/400-to-1000',
        'https://www.apartments.com/elkhart-in-46516/319-to-478',
        'https://www.apartments.com/greenville-sc-29601/560-to-1198',
        'https://www.apartments.com/apache-junction-az-85120/400-to-1000',
        'https://www.apartments.com/las-cruces-nm-88011/319-to-478',
        'https://www.apartments.com/kenosha-wi-53140/319-to-478',
        'https://www.apartments.com/indianapolis-in-46241/400-to-1000',
        'https://www.apartments.com/tacoma-wa-98444/1000-to-1200',
        'https://www.apartments.com/fairmont-nc-28340/320-to-838',
        'https://www.apartments.com/valdosta-ga-31602/400-to-1000',
        'https://www.apartments.com/tarpon-springs-fl-34689/400-to-1000',
        'https://www.apartments.com/vancouver-wa-98663/400-to-1000',
        'https://www.apartments.com/cedar-hill-tx-75104/400-to-1000',
        'https://www.apartments.com/far-rockaway-ny-11691/400-to-1000',
        'https://www.apartments.com/portsmouth-oh-45662/320-to-838',
        'https://www.apartments.com/sacramento-ca-95819/560-to-1198',
        'https://www.apartments.com/laconia-nh-3246/319-to-478',
        'https://www.apartments.com/dundalk-md-21222/560-to-1198',
        'https://www.apartments.com/belen-nm-87002/320-to-838',
        'https://www.apartments.com/lexington-ky-40508/319-to-478',
        'https://www.apartments.com/albuquerque-nm-87107/400-to-1000',
        'https://www.apartments.com/shelbyville-in-46176/320-to-838',
        'https://www.apartments.com/charlotte-nc-28217/400-to-1000',
        'https://www.apartments.com/reidsville-nc-27320/400-to-1000',
        'https://www.apartments.com/trenton-nj-8618/400-to-1000',
        'https://www.apartments.com/falmouth-ky-41040/319-to-478',
        'https://www.apartments.com/texas-city-tx-77590/560-to-1198',
        'https://www.apartments.com/springfield-mo-65803/320-to-838',
        'https://www.apartments.com/mount-pleasant-tx-75455/320-to-838',
        'https://www.apartments.com/phoenix-az-85019/1000-to-1200',
        'https://www.apartments.com/waukesha-wi-53188/400-to-1000',
        'https://www.apartments.com/superior-wi-54880/400-to-1000',
        'https://www.apartments.com/dayton-oh-45403/320-to-838',
        'https://www.apartments.com/orlando-fl-32805/560-to-1198',
        'https://www.apartments.com/lenoir-nc-28645/400-to-1000',
        'https://www.apartments.com/auburn-al-36832/400-to-1000',
        'https://www.apartments.com/hudson-wi-54016/320-to-838',
        'https://www.apartments.com/lexington-ne-68850/320-to-838',
        'https://www.apartments.com/fort-worth-tx-76116/400-to-1000',
        'https://www.apartments.com/gulfport-ms-39503/320-to-838',
        'https://www.apartments.com/phoenix-az-85013/400-to-1000',
        'https://www.apartments.com/bellwood-pa-16617/560-to-1198',
        'https://www.apartments.com/haverhill-ma-1830/400-to-1000',
        'https://www.apartments.com/jacksonville-fl-32206/400-to-1000',
        'https://www.apartments.com/nan-nan-78280/400-to-1000',
        'https://www.apartments.com/piedmont-sc-29673/400-to-1000',
        'https://www.apartments.com/greenville-tx-75402/320-to-838',
        'https://www.apartments.com/dallas-tx-75212/320-to-838',
        'https://www.apartments.com/gainesville-ga-30504/400-to-1000',
        'https://www.apartments.com/oak-grove-mo-64075/560-to-1198',
        'https://www.apartments.com/inglewood-ca-90301/560-to-1198',
        'https://www.apartments.com/wendell-nc-27591/320-to-838',
        'https://www.apartments.com/bowling-green-ky-42101/400-to-1000',
        'https://www.apartments.com/park-hills-mo-63601/319-to-478',
        'https://www.apartments.com/greensburg-in-47240/1000-to-1200',
        'https://www.apartments.com/milwaukee-wi-53222/560-to-1198',
        'https://www.apartments.com/vancouver-wa-98662/320-to-838',
        'https://www.apartments.com/coal-valley-il-61240/400-to-1000',
        'https://www.apartments.com/fayetteville-nc-28304/560-to-1198',
        'https://www.apartments.com/sylva-nc-28779/320-to-838',
        'https://www.apartments.com/orlando-fl-32818/400-to-1000',
        'https://www.apartments.com/salt-lake-city-ut-84120/1000-to-1200',
        'https://www.apartments.com/akron-oh-44306/400-to-1000',
        'https://www.apartments.com/montgomery-al-36107/320-to-838',
        'https://www.apartments.com/rosamond-ca-93560/560-to-1198',
        'https://www.apartments.com/plano-tx-75074/1000-to-1200',
        'https://www.apartments.com/gary-in-46404/1000-to-1200',
        'https://www.apartments.com/detroit-mi-48201/560-to-1198',
        'https://www.apartments.com/los-angeles-ca-90044/320-to-838',
        'https://www.apartments.com/goshen-in-46526/320-to-838',
        'https://www.apartments.com/whitesboro-tx-76273/320-to-838',
        'https://www.apartments.com/statesville-nc-28625/560-to-1198',
        'https://www.apartments.com/leesburg-fl-34748/400-to-1000',
        'https://www.apartments.com/buffalo-ny-14212/320-to-838',
        'https://www.apartments.com/newburgh-ny-12550/400-to-1000',
        'https://www.apartments.com/chicago-il-60659/319-to-478',
        'https://www.apartments.com/madison-al-35757/320-to-838',
        'https://www.apartments.com/philadelphia-pa-19140/319-to-478',
        'https://www.apartments.com/panama-city-fl-32405/320-to-838',
        'https://www.apartments.com/lawndale-ca-90260/400-to-1000',
        'https://www.apartments.com/philadelphia-pa-19150/320-to-838',
        'https://www.apartments.com/bakersfield-ca-93308/560-to-1198',
        'https://www.apartments.com/virginia-beach-va-23452/400-to-1000',
        'https://www.apartments.com/edgewood-md-21040/400-to-1000',
        'https://www.apartments.com/pinconning-mi-48650/319-to-478',
        'https://www.apartments.com/slidell-la-70458/320-to-838',
        'https://www.apartments.com/indianapolis-in-46222/319-to-478',
        'https://www.apartments.com/ludowici-ga-31316/320-to-838',
        'https://www.apartments.com/martinsville-va-24112/400-to-1000',
        'https://www.apartments.com/clifton-co-81520/400-to-1000',
        'https://www.apartments.com/adrian-mi-49221/319-to-478',
        'https://www.apartments.com/norcross-ga-30093/400-to-1000',
        'https://www.apartments.com/eureka-ca-95503/320-to-838',
        'https://www.apartments.com/black-mountain-nc-28711/400-to-1000',
        'https://www.apartments.com/austin-tx-78739/560-to-1198',
        'https://www.apartments.com/salem-or-97305/400-to-1000'


        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
