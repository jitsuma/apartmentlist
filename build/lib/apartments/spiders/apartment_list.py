import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/louisville-ky-40212/400-to-1000',
        'https://www.apartments.com/auburn-me-4210/400-to-1000',
        'https://www.apartments.com/middlesboro-ky-40965/400-to-1000',
        'https://www.apartments.com/springfield-ma-1104/400-to-1000',
        'https://www.apartments.com/orlando-fl-32808/400-to-1000',
        'https://www.apartments.com/meriden-ct-6451/400-to-1000',
        'https://www.apartments.com/mesa-az-85209/400-to-1000',
        'https://www.apartments.com/dyersburg-tn-38024/400-to-1000',
        'https://www.apartments.com/nampa-id-83686/400-to-1000',
        'https://www.apartments.com/rocky-ford-co-81067/400-to-1000',
        'https://www.apartments.com/detroit-mi-48227/400-to-1000',
        'https://www.apartments.com/kalamazoo-mi-49048/560-to-1198',
        'https://www.apartments.com/phoenix-az-85042/400-to-1000',
        'https://www.apartments.com/hazard-ky-41701/320-to-838',
        'https://www.apartments.com/reading-pa-19602/400-to-1000',
        'https://www.apartments.com/flintstone-ga-30725/320-to-838',
        'https://www.apartments.com/brooklyn-ny-11221/320-to-838',
        'https://www.apartments.com/wheat-ridge-co-80033/400-to-1000',
        'https://www.apartments.com/worcester-ma-1605/400-to-1000',
        'https://www.apartments.com/fort-lauderdale-fl-33321/400-to-1000',
        'https://www.apartments.com/nan-nan-46624/319-to-478',
        'https://www.apartments.com/dallas-tx-75217/400-to-1000',
        'https://www.apartments.com/jacksonville-fl-32219/400-to-1000',
        'https://www.apartments.com/bailey-nc-27807/400-to-1000',
        'https://www.apartments.com/indianapolis-in-46224/400-to-1000',
        'https://www.apartments.com/el-paso-tx-79901/400-to-1000',
        'https://www.apartments.com/reed-city-mi-49677/560-to-1198',
        'https://www.apartments.com/east-stroudsburg-pa-18301/400-to-1000',
        'https://www.apartments.com/rex-ga-30273/400-to-1000',
        'https://www.apartments.com/augusta-me-4330/320-to-838',
        'https://www.apartments.com/philadelphia-pa-19135/560-to-1198',
        'https://www.apartments.com/jacksonville-fl-32207/400-to-1000',
        'https://www.apartments.com/detroit-mi-48223/400-to-1000',
        'https://www.apartments.com/everett-ma-2149/400-to-1000',
        'https://www.apartments.com/seagrove-nc-27341/400-to-1000',
        'https://www.apartments.com/phoenix-az-85013/320-to-838',
        'https://www.apartments.com/seguin-tx-78155/400-to-1000',
        'https://www.apartments.com/san-antonio-tx-78211/400-to-1000',
        'https://www.apartments.com/philadelphia-pa-19140/400-to-1000',
        'https://www.apartments.com/oroville-ca-95965/400-to-1000',
        'https://www.apartments.com/camdenton-mo-0/400-to-1000',
        'https://www.apartments.com/dunlap-tn-37327/400-to-1000',
        'https://www.apartments.com/louisville-ky-40211/400-to-1000',
        'https://www.apartments.com/mount-vernon-ny-10550/400-to-1000',
        'https://www.apartments.com/hermann-mo-65041/400-to-1000',
        'https://www.apartments.com/spring-hill-fl-34606/320-to-838',
        'https://www.apartments.com/springfield-mo-65803/319-to-478',
        'https://www.apartments.com/hesperia-ca-92344/400-to-1000',
        'https://www.apartments.com/high-point-nc-27262/400-to-1000',
        'https://www.apartments.com/douglasville-ga-30134/400-to-1000',
        'https://www.apartments.com/milwaukee-wi-53202/560-to-1198',
        'https://www.apartments.com/riverdale-il-60827/400-to-1000',
        'https://www.apartments.com/lexington-mi-48450/400-to-1000',
        'https://www.apartments.com/chillicothe-oh-45601/400-to-1000',
        'https://www.apartments.com/hazel-park-mi-48030/400-to-1000',
        'https://www.apartments.com/columbia-mo-65202/320-to-838',
        'https://www.apartments.com/decatur-ga-30034/400-to-1000',
        'https://www.apartments.com/cleveland-oh-44102/400-to-1000',
        'https://www.apartments.com/atlanta-ga-30340/400-to-1000',
        'https://www.apartments.com/lexington-park-md-20653/400-to-1000',
        'https://www.apartments.com/lafayette-la-70506/400-to-1000',
        'https://www.apartments.com/niles-oh-44446/400-to-1000',
        'https://www.apartments.com/la-marque-tx-77568/320-to-838',
        'https://www.apartments.com/augusta-ga-30901/400-to-1000',
        'https://www.apartments.com/austell-ga-30168/400-to-1000',
        'https://www.apartments.com/fairfield-oh-45014/400-to-1000',
        'https://www.apartments.com/memphis-tn-38108/400-to-1000',
        'https://www.apartments.com/new-philadelphia-oh-44663/400-to-1000',
        'https://www.apartments.com/glen-burnie-md-21061/400-to-1000',
        'https://www.apartments.com/tulsa-ok-74145/400-to-1000',
        'https://www.apartments.com/flint-mi-48506/400-to-1000',
        'https://www.apartments.com/newnan-ga-30263/320-to-838',
        'https://www.apartments.com/saint-louis-mo-63137/400-to-1000',
        'https://www.apartments.com/auburndale-fl-33823/400-to-1000',
        'https://www.apartments.com/vancouver-wa-98662/400-to-1000',
        'https://www.apartments.com/fayetteville-nc-28314/400-to-1000',
        'https://www.apartments.com/fort-mill-sc-29715/320-to-838',
        'https://www.apartments.com/portal-ga-30450/400-to-1000',
        'https://www.apartments.com/lawton-ok-73501/400-to-1000',
        'https://www.apartments.com/mount-airy-nc-27030/320-to-838',
        'https://www.apartments.com/antioch-ca-94531/400-to-1000',
        'https://www.apartments.com/los-banos-ca-93635/400-to-1000',
        'https://www.apartments.com/york-pa-17401/400-to-1000',
        'https://www.apartments.com/chicago-heights-il-60411/400-to-1000',
        'https://www.apartments.com/parkville-md-21234/320-to-838',
        'https://www.apartments.com/north-augusta-sc-29860/400-to-1000',
        'https://www.apartments.com/lithonia-ga-30058/400-to-1000',
        'https://www.apartments.com/bloomingdale-ga-31302/400-to-1000',
        'https://www.apartments.com/houston-tx-77081/400-to-1000',
        'https://www.apartments.com/atlanta-ga-30349/400-to-1000',
        'https://www.apartments.com/jacksonville-fl-32224/400-to-1000',
        'https://www.apartments.com/hemet-ca-92543/1000-to-1200',
        'https://www.apartments.com/commerce-ga-30529/400-to-1000',
        'https://www.apartments.com/nan-nan-75502/400-to-1000',
        'https://www.apartments.com/duncan-ok-73533/320-to-838',
        'https://www.apartments.com/jackson-ms-39212/320-to-838',
        'https://www.apartments.com/virginia-beach-va-23452/400-to-1000',
        'https://www.apartments.com/troy-ny-12180/400-to-1000',
        'https://www.apartments.com/dayton-oh-45417/400-to-1000',
        'https://www.apartments.com/bremerton-wa-98312/400-to-1000',
        'https://www.apartments.com/haledon-nj-7508/400-to-1000',
        'https://www.apartments.com/peekskill-ny-10566/400-to-1000',
        'https://www.apartments.com/las-vegas-nv-89104/400-to-1000',
        'https://www.apartments.com/hudson-nh-3051/319-to-478',
        'https://www.apartments.com/dania-fl-33004/400-to-1000',
        'https://www.apartments.com/cicero-il-60804/400-to-1000',
        'https://www.apartments.com/lake-city-fl-32024/320-to-838',
        'https://www.apartments.com/roswell-ga-30076/560-to-1198',
        'https://www.apartments.com/dallas-tx-75227/400-to-1000',
        'https://www.apartments.com/little-rock-ar-72209/400-to-1000',
        'https://www.apartments.com/norfolk-va-23513/400-to-1000',
        'https://www.apartments.com/san-antonio-tx-78244/400-to-1000',
        'https://www.apartments.com/monongahela-pa-15063/400-to-1000',
        'https://www.apartments.com/gary-in-46406/560-to-1198',
        'https://www.apartments.com/manchester-nh-3103/400-to-1000',
        'https://www.apartments.com/wilmington-de-19805/400-to-1000',
        'https://www.apartments.com/gaffney-sc-29340/400-to-1000',
        'https://www.apartments.com/montgomery-al-36107/400-to-1000',
        'https://www.apartments.com/harper-woods-mi-48225/400-to-1000',
        'https://www.apartments.com/las-vegas-nv-89115/400-to-1000',
        'https://www.apartments.com/newark-nj-7103/400-to-1000',
        'https://www.apartments.com/philadelphia-pa-19144/400-to-1000',
        'https://www.apartments.com/la-vergne-tn-37086/400-to-1000',
        'https://www.apartments.com/boise-id-83704/400-to-1000',
        'https://www.apartments.com/modesto-ca-95358/400-to-1000',
        'https://www.apartments.com/pottstown-pa-19464/400-to-1000',
        'https://www.apartments.com/linden-nj-7036/400-to-1000',
        'https://www.apartments.com/avondale-az-85323/400-to-1000',
        'https://www.apartments.com/ocala-fl-34470/400-to-1000',
        'https://www.apartments.com/valdosta-ga-31602/400-to-1000',
        'https://www.apartments.com/newport-news-va-23608/400-to-1000',
        'https://www.apartments.com/kissimmee-fl-34746/400-to-1000',
        'https://www.apartments.com/warren-mi-48091/400-to-1000',
        'https://www.apartments.com/allenhurst-ga-31301/319-to-478',
        'https://www.apartments.com/prescott-valley-az-86314/320-to-838',
        'https://www.apartments.com/raleigh-nc-27616/320-to-838',
        'https://www.apartments.com/chicago-il-60625/320-to-838',
        'https://www.apartments.com/alexandria-va-22312/1000-to-1200',
        'https://www.apartments.com/ocean-springs-ms-39564/320-to-838',
        'https://www.apartments.com/north-tazewell-va-24630/400-to-1000',
        'https://www.apartments.com/opelousas-la-70570/320-to-838',
        'https://www.apartments.com/batesville-ar-72501/400-to-1000',
        'https://www.apartments.com/mooresville-in-46158/320-to-838',
        'https://www.apartments.com/louisville-ky-40208/400-to-1000',
        'https://www.apartments.com/phoenix-az-85021/320-to-838',
        'https://www.apartments.com/absecon-nj-8201/400-to-1000',
        'https://www.apartments.com/pittsburgh-pa-15219/400-to-1000',
        'https://www.apartments.com/las-vegas-nv-89108/400-to-1000',
        'https://www.apartments.com/spring-hill-fl-34610/320-to-838',
        'https://www.apartments.com/bessemer-al-35022/400-to-1000',
        'https://www.apartments.com/florissant-mo-63031/400-to-1000',
        'https://www.apartments.com/saginaw-mi-48601/560-to-1198',
        'https://www.apartments.com/plainview-tx-79072/400-to-1000',
        'https://www.apartments.com/scranton-pa-18509/400-to-1000',
        'https://www.apartments.com/aiken-sc-29801/319-to-478',
        'https://www.apartments.com/breaux-bridge-la-70517/319-to-478',
        'https://www.apartments.com/chester-va-23831/400-to-1000',
        'https://www.apartments.com/nan-nan-85002/320-to-838',
        'https://www.apartments.com/plymouth-mi-48170/400-to-1000',
        'https://www.apartments.com/houston-tx-77026/320-to-838',
        'https://www.apartments.com/fort-worth-tx-76106/320-to-838',
        'https://www.apartments.com/detroit-mi-48208/320-to-838',
        'https://www.apartments.com/fayetteville-nc-28306/320-to-838',
        'https://www.apartments.com/marion-oh-43302/1000-to-1200',
        'https://www.apartments.com/greensboro-nc-27407/319-to-478',
        'https://www.apartments.com/cripple-creek-co-80813/320-to-838',
        'https://www.apartments.com/richland-wa-99352/560-to-1198',
        'https://www.apartments.com/perry-fl-32348/560-to-1198',
        'https://www.apartments.com/west-palm-beach-fl-33405/319-to-478',
        'https://www.apartments.com/texas-city-tx-77590/319-to-478',
        'https://www.apartments.com/kissimmee-fl-34743/1000-to-1200',
        'https://www.apartments.com/gadsden-sc-29052/319-to-478',
        'https://www.apartments.com/fort-lauderdale-fl-33313/320-to-838',
        'https://www.apartments.com/church-road-va-23833/320-to-838',
        'https://www.apartments.com/taft-ca-93268/320-to-838',
        'https://www.apartments.com/racine-wi-53402/560-to-1198',
        'https://www.apartments.com/maywood-il-60153/560-to-1198',
        'https://www.apartments.com/farmington-mo-63640/320-to-838',
        'https://www.apartments.com/baltimore-md-21215/320-to-838',
        'https://www.apartments.com/columbus-in-47203/320-to-838',
        'https://www.apartments.com/spindale-nc-28160/319-to-478',
        'https://www.apartments.com/gwynn-oak-md-21207/320-to-838',
        'https://www.apartments.com/fall-river-ma-2720/560-to-1198',
        'https://www.apartments.com/birmingham-al-35207/319-to-478',
        'https://www.apartments.com/corinth-ms-38834/319-to-478',
        'https://www.apartments.com/toledo-oh-43609/319-to-478',
        'https://www.apartments.com/kansas-city-mo-64127/320-to-838',
        'https://www.apartments.com/clearwater-fl-33756/320-to-838',
        'https://www.apartments.com/tucson-az-85701/320-to-838',
        'https://www.apartments.com/fort-smith-ar-72901/319-to-478',
        'https://www.apartments.com/washington-court-house-oh-43160/400-to-1000',
        'https://www.apartments.com/joanna-sc-29351/319-to-478',
        'https://www.apartments.com/crowley-tx-76036/319-to-478',
        'https://www.apartments.com/clovis-ca-93611/319-to-478',
        'https://www.apartments.com/chicago-il-60619/320-to-838',
        'https://www.apartments.com/kent-oh-44240/320-to-838',
        'https://www.apartments.com/simi-valley-ca-93063/560-to-1198',
        'https://www.apartments.com/albuquerque-nm-87123/320-to-838',
        'https://www.apartments.com/spokane-wa-99205/320-to-838',
        'https://www.apartments.com/roachdale-in-46172/320-to-838',
        'https://www.apartments.com/fort-myers-fl-33901/560-to-1198',
        'https://www.apartments.com/portland-or-97201/1000-to-1200',
        'https://www.apartments.com/newark-nj-7108/320-to-838',
        'https://www.apartments.com/georgetown-tx-78628/320-to-838',
        'https://www.apartments.com/lake-worth-fl-33449/560-to-1198',
        'https://www.apartments.com/callahan-fl-32011/320-to-838',
        'https://www.apartments.com/nan-nan-60884/560-to-1198',
        'https://www.apartments.com/modesto-ca-95350/1000-to-1200',
        'https://www.apartments.com/lakewood-ca-90712/560-to-1198',
        'https://www.apartments.com/bakersfield-ca-93304/320-to-838',
        'https://www.apartments.com/los-angeles-ca-90003/560-to-1198',
        'https://www.apartments.com/wahiawa-hi-96786/560-to-1198',
        'https://www.apartments.com/port-orange-fl-32127/560-to-1198',
        'https://www.apartments.com/houston-tx-77045/320-to-838',
        'https://www.apartments.com/somerset-ma-2726/560-to-1198',
        'https://www.apartments.com/covington-tn-38019/320-to-838',
        'https://www.apartments.com/atlanta-ga-30331/319-to-478',
        'https://www.apartments.com/stanford-ky-40484/319-to-478',
        'https://www.apartments.com/new-cumberland-pa-17070/560-to-1198',
        'https://www.apartments.com/madison-heights-mi-48071/320-to-838',
        'https://www.apartments.com/jasper-al-35501/320-to-838',
        'https://www.apartments.com/jackson-ga-30233/1000-to-1200',
        'https://www.apartments.com/darlington-sc-29532/320-to-838',
        'https://www.apartments.com/monee-il-60449/320-to-838',
        'https://www.apartments.com/hummelstown-pa-17036/320-to-838',
        'https://www.apartments.com/fresno-ca-93650/560-to-1198',
        'https://www.apartments.com/memphis-tn-38114/320-to-838',
        'https://www.apartments.com/mesquite-tx-75149/560-to-1198',
        'https://www.apartments.com/owensboro-ky-42301/320-to-838'



        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
