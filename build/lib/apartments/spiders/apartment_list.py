import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/baltimore-md-21224/500-to-1500',
        'https://www.apartments.com/birmingham-al-35206/500-to-1500',
        'https://www.apartments.com/gulf-shores-al-36542/500-to-1500',
        'https://www.apartments.com/gadsden-al-35901/500-to-1500',
        'https://www.apartments.com/newnan-ga-30263/500-to-1500',
        'https://www.apartments.com/chicago-il-60649/500-to-1500',
        'https://www.apartments.com/fayetteville-nc-28304/500-to-1500',
        'https://www.apartments.com/vallejo-ca-94590/500-to-1500',
        'https://www.apartments.com/bessemer-al-35023/500-to-1500',
        'https://www.apartments.com/bloomfield-in-47424/500-to-1500',
        'https://www.apartments.com/phoenix-az-85034/500-to-1500',
        'https://www.apartments.com/port-orange-fl-32129/500-to-1500',
        'https://www.apartments.com/pittsburgh-pa-15236/500-to-1500',
        'https://www.apartments.com/oklahoma-city-ok-73109/500-to-1500',
        'https://www.apartments.com/arlington-tx-76017/500-to-1500',
        'https://www.apartments.com/cincinnati-oh-45211/500-to-1500',
        'https://www.apartments.com/nan-nan-37812/500-to-1500',
        'https://www.apartments.com/lubbock-tx-79415/500-to-1500',
        'https://www.apartments.com/ephraim-wi-54211/500-to-1500',
        'https://www.apartments.com/wilmington-nc-28409/500-to-1500',
        'https://www.apartments.com/palm-bay-fl-32909/500-to-1500',
        'https://www.apartments.com/fort-myers-fl-33907/500-to-1500',
        'https://www.apartments.com/asheboro-nc-27205/500-to-1500',
        'https://www.apartments.com/gallatin-tn-37066/500-to-1500',
        'https://www.apartments.com/dayton-ky-41074/500-to-1500',
        'https://www.apartments.com/nebraska-city-ne-68410/500-to-1500',
        'https://www.apartments.com/hickory-nc-28601/500-to-1500',
        'https://www.apartments.com/canton-ga-30115/500-to-1500',
        'https://www.apartments.com/costa-mesa-ca-92627/500-to-1500',
        'https://www.apartments.com/eugene-or-97405/500-to-1500',
        'https://www.apartments.com/fort-worth-tx-76111/500-to-1500',
        'https://www.apartments.com/old-bridge-nj-8857/500-to-1500',
        'https://www.apartments.com/leakesville-ms-39451/500-to-1500',
        'https://www.apartments.com/columbia-tn-38401/500-to-1500',
        'https://www.apartments.com/pittsburgh-pa-15229/500-to-1500',
        'https://www.apartments.com/gainesville-ga-30504/500-to-1500',
        'https://www.apartments.com/front-royal-va-22630/500-to-1500',
        'https://www.apartments.com/williamson-ny-14589/500-to-1500',
        'https://www.apartments.com/fairmont-nc-28340/500-to-1500',
        'https://www.apartments.com/kissimmee-fl-34746/500-to-1500',
        'https://www.apartments.com/dayton-oh-45424/500-to-1500',
        'https://www.apartments.com/orlando-fl-32805/500-to-1500',
        'https://www.apartments.com/elizabeth-city-nc-27909/500-to-1500',
        'https://www.apartments.com/zebulon-nc-27597/500-to-1500',
        'https://www.apartments.com/san-bernardino-ca-92405/500-to-1500',
        'https://www.apartments.com/columbus-in-47201/500-to-1500',
        'https://www.apartments.com/mount-morris-mi-48458/500-to-1500',
        'https://www.apartments.com/houston-tx-77035/500-to-1500',
        'https://www.apartments.com/elliston-va-24087/500-to-1500',
        'https://www.apartments.com/omaha-ne-68105/500-to-1500',
        'https://www.apartments.com/atlanta-ga-30310/500-to-1500',
        'https://www.apartments.com/toledo-oh-43620/500-to-1500',
        'https://www.apartments.com/greensboro-nc-27405/500-to-1500',
        'https://www.apartments.com/fort-wayne-in-46808/500-to-1500',
        'https://www.apartments.com/fayetteville-nc-28303/500-to-1500',
        'https://www.apartments.com/natchitoches-la-71457/500-to-1500',
        'https://www.apartments.com/hollywood-fl-33025/500-to-1500',
        'https://www.apartments.com/cumming-ga-30040/500-to-1500',
        'https://www.apartments.com/flint-mi-48506/500-to-1500',
        'https://www.apartments.com/blairsville-ga-30512/500-to-1500',
        'https://www.apartments.com/austin-tx-78753/500-to-1500',
        'https://www.apartments.com/spring-hill-fl-34607/500-to-1500',
        'https://www.apartments.com/decatur-in-46733/500-to-1500',
        'https://www.apartments.com/cashion-ok-73016/500-to-1500',
        'https://www.apartments.com/kelso-wa-98626/500-to-1500',
        'https://www.apartments.com/chattanooga-tn-37406/500-to-1500',
        'https://www.apartments.com/kansas-city-mo-64119/500-to-1500',
        'https://www.apartments.com/peoria-il-61604/500-to-1500',
        'https://www.apartments.com/clearwater-fl-33756/500-to-1500',
        'https://www.apartments.com/valdosta-ga-31601/500-to-1500',
        'https://www.apartments.com/midlothian-va-23113/500-to-1500',
        'https://www.apartments.com/cape-coral-fl-33914/500-to-1500',
        'https://www.apartments.com/quincy-fl-32351/500-to-1500',
        'https://www.apartments.com/riverview-fl-33578/500-to-1500',
        'https://www.apartments.com/reading-pa-19605/500-to-1500',
        'https://www.apartments.com/kuttawa-ky-42055/500-to-1500',
        'https://www.apartments.com/jacksonville-fl-32254/500-to-1500',
        'https://www.apartments.com/logan-ut-84321/500-to-1500',
        'https://www.apartments.com/saint-louis-mo-63134/500-to-1500',
        'https://www.apartments.com/detroit-mi-48238/500-to-1500',
        'https://www.apartments.com/kansas-city-mo-64134/500-to-1500',
        'https://www.apartments.com/new-orleans-la-70128/500-to-1500',
        'https://www.apartments.com/columbia-sc-29223/500-to-1500',
        'https://www.apartments.com/new-york-ny-10029/500-to-1500',
        'https://www.apartments.com/roanoke-va-24017/500-to-1500',
        'https://www.apartments.com/rock-island-il-61201/500-to-1500',
        'https://www.apartments.com/johnstown-pa-15905/500-to-1500',
        'https://www.apartments.com/carrollton-ga-30117/500-to-1500',
        'https://www.apartments.com/river-rouge-mi-48218/500-to-1500',
        'https://www.apartments.com/la-quinta-ca-92253/500-to-1500',
        'https://www.apartments.com/port-charlotte-fl-33952/500-to-1500',
        'https://www.apartments.com/camden-nj-8104/500-to-1500',
        'https://www.apartments.com/mobile-al-36606/500-to-1500',
        'https://www.apartments.com/annville-pa-17003/500-to-1500',
        'https://www.apartments.com/augusta-ga-30901/500-to-1500',
        'https://www.apartments.com/miami-gardens-fl-33056/500-to-1500',
        'https://www.apartments.com/suffolk-va-23434/500-to-1500',
        'https://www.apartments.com/dallas-tx-75204/500-to-1500',
        'https://www.apartments.com/henderson-ky-42420/500-to-1500',
        'https://www.apartments.com/eatonville-wa-98328/500-to-1500',
        'https://www.apartments.com/dayton-tn-37321/500-to-1500',
        'https://www.apartments.com/newark-nj-7102/500-to-1500',
        'https://www.apartments.com/sidney-oh-45365/500-to-1500',
        'https://www.apartments.com/brockton-ma-2302/500-to-1500',
        'https://www.apartments.com/philadelphia-pa-19140/500-to-1500',
        'https://www.apartments.com/biloxi-ms-39531/500-to-1500',
        'https://www.apartments.com/indianapolis-in-46203/500-to-1500',
        'https://www.apartments.com/marietta-ga-30062/500-to-1500',
        'https://www.apartments.com/anaheim-ca-92802/500-to-1500',
        'https://www.apartments.com/moss-point-ms-39563/500-to-1500',
        'https://www.apartments.com/lathrop-ca-95330/500-to-1500',
        'https://www.apartments.com/muskegon-mi-49442/500-to-1500',
        'https://www.apartments.com/bronx-ny-10466/500-to-1500',
        'https://www.apartments.com/jasper-ga-30143/500-to-1500',
        'https://www.apartments.com/mesa-az-85201/500-to-1500',
        'https://www.apartments.com/inkster-mi-48141/500-to-1500',
        'https://www.apartments.com/fort-myers-fl-33916/500-to-1500',
        'https://www.apartments.com/charlotte-nc-28214/500-to-1500',
        'https://www.apartments.com/apple-valley-ca-92307/500-to-1500',
        'https://www.apartments.com/stanwood-wa-98292/500-to-1500',
        'https://www.apartments.com/glendale-az-85304/500-to-1500',
        'https://www.apartments.com/lafayette-la-70501/500-to-1500',
        'https://www.apartments.com/lake-alfred-fl-33850/500-to-1500',
        'https://www.apartments.com/high-point-nc-27260/500-to-1500',
        'https://www.apartments.com/seneca-sc-29678/500-to-1500',
        'https://www.apartments.com/oakland-ca-94603/500-to-1500',
        'https://www.apartments.com/sacramento-ca-95831/500-to-1500',
        'https://www.apartments.com/columbia-sc-0/500-to-1500',
        'https://www.apartments.com/dodge-city-ks-67801/500-to-1500',
        'https://www.apartments.com/indianapolis-in-46280/500-to-1500',
        'https://www.apartments.com/tucson-az-85706/500-to-1500',
        'https://www.apartments.com/phoenix-az-85019/500-to-1500',
        'https://www.apartments.com/dickson-tn-37055/500-to-1500',
        'https://www.apartments.com/stockton-ca-95207/500-to-1500',
        'https://www.apartments.com/ocean-springs-ms-39564/500-to-1500',
        'https://www.apartments.com/saint-petersburg-fl-33713/500-to-1500',
        'https://www.apartments.com/lockhart-tx-78644/500-to-1500',
        'https://www.apartments.com/lima-oh-45801/500-to-1500',
        'https://www.apartments.com/orem-ut-84097/500-to-1500',
        'https://www.apartments.com/tullahoma-tn-37388/500-to-1500',
        'https://www.apartments.com/zephyrhills-fl-33542/500-to-1500',
        'https://www.apartments.com/fresno-ca-93711/500-to-1500',
        'https://www.apartments.com/mills-river-nc-28759/500-to-1500',
        'https://www.apartments.com/lady-lake-fl-32159/500-to-1500',
        'https://www.apartments.com/mill-spring-nc-28756/500-to-1500',
        'https://www.apartments.com/houston-tx-77014/500-to-1500',
        'https://www.apartments.com/syracuse-ny-13208/500-to-1500',
        'https://www.apartments.com/spokane-wa-99201/500-to-1500',
        'https://www.apartments.com/decatur-al-35603/500-to-1500',
        'https://www.apartments.com/pecos-nm-87552/500-to-1500',
        'https://www.apartments.com/clearwater-fl-33765/500-to-1500',
        'https://www.apartments.com/milwaukee-wi-53225/500-to-1500',
        'https://www.apartments.com/baxley-ga-31513/500-to-1500',
        'https://www.apartments.com/star-id-83669/500-to-1500',
        'https://www.apartments.com/pharr-tx-78577/500-to-1500',
        'https://www.apartments.com/houston-tx-77071/500-to-1500',
        'https://www.apartments.com/saginaw-mi-48601/500-to-1500',
        'https://www.apartments.com/memphis-tn-38115/500-to-1500',
        'https://www.apartments.com/centralia-il-62801/500-to-1500',
        'https://www.apartments.com/corning-ca-96021/500-to-1500',
        'https://www.apartments.com/jackson-ms-39213/500-to-1500',
        'https://www.apartments.com/san-bernardino-ca-92410/500-to-1500',
        'https://www.apartments.com/cameron-nc-28326/500-to-1500',
        'https://www.apartments.com/citrus-heights-ca-95621/500-to-1500',
        'https://www.apartments.com/wichita-ks-67211/500-to-1500',
        'https://www.apartments.com/charlotte-nc-28208/500-to-1500',
        'https://www.apartments.com/anderson-sc-29621/500-to-1500',
        'https://www.apartments.com/nan-nan-3127/500-to-1500',
        'https://www.apartments.com/martinsburg-wv-25404/500-to-1500',
        'https://www.apartments.com/lancaster-ca-93535/500-to-1500',
        'https://www.apartments.com/brooks-ga-30205/500-to-1500',
        'https://www.apartments.com/webster-ma-1570/500-to-1500',
        'https://www.apartments.com/emporia-va-23847/500-to-1500',
        'https://www.apartments.com/canon-city-co-81212/500-to-1500',
        'https://www.apartments.com/oceanside-ca-92054/500-to-1500',
        'https://www.apartments.com/antioch-ca-94509/500-to-1500',
        'https://www.apartments.com/phenix-city-al-36869/500-to-1500',
        'https://www.apartments.com/bakersfield-ca-93305/500-to-1500',
        'https://www.apartments.com/niles-mi-49120/500-to-1500',
        'https://www.apartments.com/bloomingdale-ga-31302/500-to-1500',
        'https://www.apartments.com/chickamauga-ga-30707/500-to-1500',
        'https://www.apartments.com/fairfield-ca-94533/500-to-1500',
        'https://www.apartments.com/rialto-ca-92376/500-to-1500',
        'https://www.apartments.com/cincinnati-oh-45240/500-to-1500',
        'https://www.apartments.com/albuquerque-nm-87109/500-to-1500',
        'https://www.apartments.com/las-vegas-nv-89169/500-to-1500',
        'https://www.apartments.com/lexington-nc-27292/500-to-1500',
        'https://www.apartments.com/ponchatoula-la-70454/500-to-1500',
        'https://www.apartments.com/greensburg-pa-15601/500-to-1500',
        'https://www.apartments.com/canton-ga-30114/500-to-1500',
        'https://www.apartments.com/starkville-ms-39759/500-to-1500',
        'https://www.apartments.com/modesto-ca-95356/500-to-1500',
        'https://www.apartments.com/sacramento-ca-95833/500-to-1500',
        'https://www.apartments.com/fort-worth-tx-76134/500-to-1500',
        'https://www.apartments.com/adelanto-ca-92301/500-to-1500',
        'https://www.apartments.com/tyrone-pa-16686/500-to-1500',
        'https://www.apartments.com/montgomery-al-36107/500-to-1500',
        'https://www.apartments.com/tampa-fl-33614/500-to-1500',
        'https://www.apartments.com/celina-oh-45822/500-to-1500',
        'https://www.apartments.com/homeland-ca-92548/500-to-1500',
        'https://www.apartments.com/hyde-park-ny-12538/500-to-1500',
        'https://www.apartments.com/las-vegas-nv-89139/500-to-1500',
        'https://www.apartments.com/smithville-tn-37166/500-to-1500',
        'https://www.apartments.com/york-sc-29745/500-to-1500',
        'https://www.apartments.com/wilmington-de-19805/500-to-1500',
        'https://www.apartments.com/cape-girardeau-mo-63701/500-to-1500',
        'https://www.apartments.com/pittsburgh-pa-15235/500-to-1500',
        'https://www.apartments.com/alamogordo-nm-88310/500-to-1500',
        'https://www.apartments.com/chillicothe-oh-45601/500-to-1500',
        'https://www.apartments.com/mount-pleasant-ia-52641/500-to-1500',
        'https://www.apartments.com/vero-beach-fl-32967/500-to-1500',
        'https://www.apartments.com/pittsburgh-pa-15202/500-to-1500',
        'https://www.apartments.com/lansing-mi-48906/500-to-1500',
        'https://www.apartments.com/mount-airy-nc-27030/500-to-1500',
        'https://www.apartments.com/pueblo-co-81003/500-to-1500',
        'https://www.apartments.com/hesperia-ca-92345/500-to-1500',
        'https://www.apartments.com/fairburn-sd-57738/500-to-1500',
        'https://www.apartments.com/bentonville-ar-72712/500-to-1500',
        'https://www.apartments.com/bellport-ny-11713/500-to-1500',
        'https://www.apartments.com/butte-mt-59701/500-to-1500',
        'https://www.apartments.com/atlanta-ga-30311/500-to-1500',
        'https://www.apartments.com/federal-way-wa-98003/500-to-1500',
        'https://www.apartments.com/danville-va-24541/500-to-1500',
        'https://www.apartments.com/independence-mo-64052/500-to-1500',
        'https://www.apartments.com/lodi-ca-95240/500-to-1500',
        'https://www.apartments.com/chickasha-ok-73018/500-to-1500',
        'https://www.apartments.com/oklahoma-city-ok-73129/500-to-1500',
        'https://www.apartments.com/san-antonio-tx-78207/500-to-1500',
        'https://www.apartments.com/jackson-mi-49202/500-to-1500',
        'https://www.apartments.com/prescott-valley-az-86314/500-to-1500',
        'https://www.apartments.com/cameron-tx-76520/500-to-1500'



        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
