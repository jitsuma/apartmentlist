import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/keansburg-nj-7734/1000-to-2000',
        'https://www.apartments.com/baton-rouge-la-70816/1000-to-2000',
        'https://www.apartments.com/jacksonville-fl-32208/1000-to-2000',
        'https://www.apartments.com/tifton-ga-0/1000-to-2000',
        'https://www.apartments.com/bakersfield-ca-93309/1000-to-2000',
        'https://www.apartments.com/raleigh-nc-27601/1000-to-2000',
        'https://www.apartments.com/camden-nj-8104/1000-to-2000',
        'https://www.apartments.com/nan-nan-27412/1000-to-2000',
        'https://www.apartments.com/colorado-springs-co-80905/1000-to-2000',
        'https://www.apartments.com/rialto-ca-92376/1000-to-2000',
        'https://www.apartments.com/spring-city-tn-37381/1000-to-2000',
        'https://www.apartments.com/grants-pass-or-97527/1000-to-2000',
        'https://www.apartments.com/saint-louis-mo-63136/1000-to-2000',
        'https://www.apartments.com/richmond-va-23224/1000-to-2000',
        'https://www.apartments.com/eastpointe-mi-48021/1000-to-2000',
        'https://www.apartments.com/villa-park-il-60181/1000-to-2000',
        'https://www.apartments.com/olivehurst-ca-95961/1000-to-2000',
        'https://www.apartments.com/pueblo-co-81001/1000-to-2000',
        'https://www.apartments.com/el-paso-tx-79925/1000-to-2000',
        'https://www.apartments.com/conneaut-lake-pa-16316/1000-to-2000',
        'https://www.apartments.com/jacksonville-fl-32254/1000-to-2000',
        'https://www.apartments.com/covington-ga-30016/1000-to-2000',
        'https://www.apartments.com/lebanon-pa-17042/1000-to-2000',
        'https://www.apartments.com/mission-tx-78574/1000-to-2000',
        'https://www.apartments.com/fort-lauderdale-fl-33313/1000-to-2000',
        'https://www.apartments.com/victorville-ca-92394/1000-to-2000',
        'https://www.apartments.com/moseley-va-23120/1000-to-2000',
        'https://www.apartments.com/fort-myers-fl-33916/1000-to-2000',
        'https://www.apartments.com/pikesville-md-21208/1000-to-2000',
        'https://www.apartments.com/augusta-ga-30901/1000-to-2000',
        'https://www.apartments.com/appling-ga-30802/1000-to-2000',
        'https://www.apartments.com/rocky-mount-nc-27803/1000-to-2000',
        'https://www.apartments.com/meriden-ct-6450/1000-to-2000',
        'https://www.apartments.com/sarasota-fl-34243/1000-to-2000',
        'https://www.apartments.com/rochester-ny-14621/1000-to-2000',
        'https://www.apartments.com/lansing-mi-48912/1000-to-2000',
        'https://www.apartments.com/buffalo-ny-14212/1000-to-2000',
        'https://www.apartments.com/buffalo-ny-14207/1000-to-2000',
        'https://www.apartments.com/birmingham-al-35206/1000-to-2000',
        'https://www.apartments.com/greenville-sc-29609/1000-to-2000',
        'https://www.apartments.com/keystone-heights-fl-32656/1000-to-2000',
        'https://www.apartments.com/dorchester-ma-2125/1000-to-2000',
        'https://www.apartments.com/portland-me-4103/1000-to-2000',
        'https://www.apartments.com/salt-lake-city-ut-84106/1000-to-2000',
        'https://www.apartments.com/statesboro-ga-30458/1000-to-2000',
        'https://www.apartments.com/traverse-city-mi-49684/1000-to-2000',
        'https://www.apartments.com/phoenix-az-85032/1000-to-2000',
        'https://www.apartments.com/locust-fork-al-35097/1000-to-2000',
        'https://www.apartments.com/fond-du-lac-wi-54935/1000-to-2000',
        'https://www.apartments.com/rockford-il-61103/1000-to-2000',
        'https://www.apartments.com/ninety-six-sc-29666/1000-to-2000',
        'https://www.apartments.com/aberdeen-wa-98520/1000-to-2000',
        'https://www.apartments.com/bonney-lake-wa-98391/1000-to-2000',
        'https://www.apartments.com/owatonna-mn-55060/1000-to-2000',
        'https://www.apartments.com/spokane-wa-99208/1000-to-2000',
        'https://www.apartments.com/fall-river-ma-2721/1000-to-2000',
        'https://www.apartments.com/chanhassen-mn-55317/1000-to-2000',
        'https://www.apartments.com/greenfield-ma-1301/1000-to-2000',
        'https://www.apartments.com/gloucester-nc-28528/1000-to-2000',
        'https://www.apartments.com/athens-ga-30605/1000-to-2000',
        'https://www.apartments.com/augusta-ga-30906/1000-to-2000',
        'https://www.apartments.com/plano-tx-75023/1000-to-2000',
        'https://www.apartments.com/canton-ga-30115/1000-to-2000',
        'https://www.apartments.com/philadelphia-pa-19111/1000-to-2000',
        'https://www.apartments.com/huntsville-al-35811/1000-to-2000',
        'https://www.apartments.com/bay-city-mi-48706/1000-to-2000',
        'https://www.apartments.com/zephyrhills-fl-33542/1000-to-2000',
        'https://www.apartments.com/athens-al-35611/1000-to-2000',
        'https://www.apartments.com/nan-nan-34742/1000-to-2000',
        'https://www.apartments.com/findlay-oh-45840/1000-to-2000',
        'https://www.apartments.com/florissant-mo-63033/1000-to-2000',
        'https://www.apartments.com/tampa-fl-33612/1000-to-2000',
        'https://www.apartments.com/fayetteville-nc-28304/1000-to-2000',
        'https://www.apartments.com/deville-la-71328/1000-to-2000',
        'https://www.apartments.com/atwater-ca-95301/1000-to-2000',
        'https://www.apartments.com/camp-hill-al-36850/1000-to-2000',
        'https://www.apartments.com/fayetteville-nc-28314/1000-to-2000',
        'https://www.apartments.com/carterville-il-62918/1000-to-2000',
        'https://www.apartments.com/dawsonville-ga-30534/1000-to-2000',
        'https://www.apartments.com/cleveland-oh-44125/1000-to-2000',
        'https://www.apartments.com/donalsonville-ga-39845/1000-to-2000',
        'https://www.apartments.com/san-francisco-ca-94124/1000-to-2000',
        'https://www.apartments.com/oak-ridge-tn-37830/1000-to-2000',
        'https://www.apartments.com/windsor-mill-md-21244/1000-to-2000',
        'https://www.apartments.com/grand-rapids-mi-49503/1000-to-2000',
        'https://www.apartments.com/spokane-wa-99212/1000-to-2000',
        'https://www.apartments.com/crossville-al-35962/1000-to-2000',
        'https://www.apartments.com/north-las-vegas-nv-89030/1000-to-2000',
        'https://www.apartments.com/largo-fl-33771/1000-to-2000',
        'https://www.apartments.com/santee-ca-92071/1000-to-2000',
        'https://www.apartments.com/montgomery-al-36104/1000-to-2000',
        'https://www.apartments.com/joliet-il-60432/1000-to-2000',
        'https://www.apartments.com/syracuse-ny-13203/1000-to-2000',
        'https://www.apartments.com/eustis-fl-32726/1000-to-2000',
        'https://www.apartments.com/girard-oh-44420/1000-to-2000',
        'https://www.apartments.com/fort-worth-tx-76134/1000-to-2000',
        'https://www.apartments.com/syracuse-ny-13204/1000-to-2000',
        'https://www.apartments.com/saint-louis-mo-63109/1000-to-2000',
        'https://www.apartments.com/thurmont-md-21788/1000-to-2000',
        'https://www.apartments.com/west-bend-wi-53095/1000-to-2000',
        'https://www.apartments.com/tracy-ca-95377/1000-to-2000',
        'https://www.apartments.com/new-castle-de-19720/1000-to-2000',
        'https://www.apartments.com/west-columbia-sc-29169/1000-to-2000',
        'https://www.apartments.com/cape-coral-fl-33990/1000-to-2000',
        'https://www.apartments.com/dallas-tx-75216/1000-to-2000',
        'https://www.apartments.com/heyworth-il-61745/1000-to-2000',
        'https://www.apartments.com/alexander-ar-72002/1000-to-2000',
        'https://www.apartments.com/heber-springs-ar-72543/1000-to-2000',
        'https://www.apartments.com/lithia-springs-ga-30122/1000-to-2000',
        'https://www.apartments.com/deerfield-beach-fl-33441/1000-to-2000',
        'https://www.apartments.com/manchester-ct-6042/1000-to-2000',
        'https://www.apartments.com/columbia-city-in-46725/1000-to-2000',
        'https://www.apartments.com/bakersfield-ca-93308/1000-to-2000',
        'https://www.apartments.com/toledo-oh-43605/1000-to-2000',
        'https://www.apartments.com/clarksville-tn-37042/1000-to-2000',
        'https://www.apartments.com/elkhart-in-46516/1000-to-2000',
        'https://www.apartments.com/tarpon-springs-fl-34689/1000-to-2000',
        'https://www.apartments.com/evans-city-pa-16033/1000-to-2000',
        'https://www.apartments.com/corning-ca-96021/1000-to-2000',
        'https://www.apartments.com/ogden-ut-84401/1000-to-2000',
        'https://www.apartments.com/fresno-ca-93710/1000-to-2000',
        'https://www.apartments.com/chesapeake-va-23320/1000-to-2000',
        'https://www.apartments.com/ava-mo-65608/1000-to-2000',
        'https://www.apartments.com/far-rockaway-ny-11691/1000-to-2000',
        'https://www.apartments.com/middlefield-oh-44062/1000-to-2000',
        'https://www.apartments.com/hudson-fl-34669/1000-to-2000',
        'https://www.apartments.com/dallas-tx-75224/1000-to-2000',
        'https://www.apartments.com/nan-nan-85358/1000-to-2000',
        'https://www.apartments.com/hazelwood-mo-63042/1000-to-2000',
        'https://www.apartments.com/camden-nj-8105/1000-to-2000',
        'https://www.apartments.com/gosport-in-47433/1000-to-2000',
        'https://www.apartments.com/dallas-tx-75241/1000-to-2000',
        'https://www.apartments.com/lakeland-fl-33801/1000-to-2000',
        'https://www.apartments.com/oglesby-tx-76561/1000-to-2000',
        'https://www.apartments.com/marysville-ca-95901/1000-to-2000',
        'https://www.apartments.com/erwin-tn-37650/1000-to-2000',
        'https://www.apartments.com/charlotte-nc-28208/1000-to-2000',
        'https://www.apartments.com/auburn-ca-95603/1000-to-2000',
        'https://www.apartments.com/california-city-ca-93505/1000-to-2000',
        'https://www.apartments.com/savannah-ga-31404/1000-to-2000',
        'https://www.apartments.com/hacienda-heights-ca-91745/1000-to-2000',
        'https://www.apartments.com/bakersfield-ca-93304/1000-to-2000',
        'https://www.apartments.com/los-angeles-ca-90004/1000-to-2000',
        'https://www.apartments.com/fort-myers-fl-33912/1000-to-2000',
        'https://www.apartments.com/greenwood-ms-38930/1000-to-2000',
        'https://www.apartments.com/indianapolis-in-46202/1000-to-2000',
        'https://www.apartments.com/atascadero-ca-93422/1000-to-2000',
        'https://www.apartments.com/kansas-city-mo-64155/1000-to-2000',
        'https://www.apartments.com/hemet-ca-92545/1000-to-2000',
        'https://www.apartments.com/lincoln-ne-68503/1000-to-2000',
        'https://www.apartments.com/buena-park-ca-90621/1000-to-2000',
        'https://www.apartments.com/saint-petersburg-fl-33710/1000-to-2000',
        'https://www.apartments.com/gary-in-46404/1000-to-2000',
        'https://www.apartments.com/shawnee-ok-74801/1000-to-2000',
        'https://www.apartments.com/columbus-ga-31903/1000-to-2000',
        'https://www.apartments.com/hurlburt-field-fl-32544/1000-to-2000',
        'https://www.apartments.com/philadelphia-pa-19150/1000-to-2000',
        'https://www.apartments.com/new-cumberland-pa-17070/1000-to-2000',
        'https://www.apartments.com/lake-wales-fl-33859/1000-to-2000',
        'https://www.apartments.com/hampstead-nc-28443/1000-to-2000',
        'https://www.apartments.com/maryville-tn-37803/1000-to-2000',
        'https://www.apartments.com/cocoa-fl-32927/1000-to-2000',
        'https://www.apartments.com/wichita-ks-67218/1000-to-2000',
        'https://www.apartments.com/montgomery-al-36108/1000-to-2000',
        'https://www.apartments.com/wilkesboro-nc-28697/1000-to-2000',
        'https://www.apartments.com/chicago-il-60619/1000-to-2000',
        'https://www.apartments.com/lexington-ky-40505/1000-to-2000',
        'https://www.apartments.com/kansas-city-mo-64126/1000-to-2000',
        'https://www.apartments.com/clinton-township-mi-48035/1000-to-2000',
        'https://www.apartments.com/troy-al-36079/1000-to-2000',
        'https://www.apartments.com/twinsburg-oh-44087/1000-to-2000',
        'https://www.apartments.com/pueblo-co-81003/1000-to-2000',
        'https://www.apartments.com/covina-ca-91723/1000-to-2000',
        'https://www.apartments.com/chicago-il-60629/1000-to-2000',
        'https://www.apartments.com/medford-or-97501/1000-to-2000',
        'https://www.apartments.com/memphis-tn-38118/1000-to-2000',
        'https://www.apartments.com/aurora-il-60505/1000-to-2000',
        'https://www.apartments.com/eden-nc-27288/1000-to-2000',
        'https://www.apartments.com/dothan-al-36303/1000-to-2000',
        'https://www.apartments.com/savannah-ga-31406/1000-to-2000',
        'https://www.apartments.com/yorba-linda-ca-92886/1000-to-2000',
        'https://www.apartments.com/fort-worth-tx-76111/1000-to-2000',
        'https://www.apartments.com/philadelphia-pa-19145/1000-to-2000',
        'https://www.apartments.com/compton-ca-90220/1000-to-2000'


        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
