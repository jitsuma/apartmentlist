import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/spring-valley-ca-91977/500-to-1500',
        'https://www.apartments.com/tuscaloosa-al-35405/500-to-1500',
        'https://www.apartments.com/philadelphia-pa-19116/500-to-1500',
        'https://www.apartments.com/garfield-nj-7026/500-to-1500',
        'https://www.apartments.com/lebanon-pa-17042/500-to-1500',
        'https://www.apartments.com/detroit-mi-48221/500-to-1500',
        'https://www.apartments.com/burlington-nc-27217/500-to-1500',
        'https://www.apartments.com/concord-nc-28027/500-to-1500',
        'https://www.apartments.com/farmington-mo-63640/500-to-1500',
        'https://www.apartments.com/muskogee-ok-74403/500-to-1500',
        'https://www.apartments.com/saint-louis-mo-63118/500-to-1500',
        'https://www.apartments.com/jackson-tn-38305/500-to-1500',
        'https://www.apartments.com/indianapolis-in-46222/500-to-1500',
        'https://www.apartments.com/miami-fl-33162/500-to-1500',
        'https://www.apartments.com/chesapeake-va-23325/500-to-1500',
        'https://www.apartments.com/coos-bay-or-97420/500-to-1500',
        'https://www.apartments.com/south-boston-va-24592/500-to-1500',
        'https://www.apartments.com/charlotte-nc-28213/500-to-1500',
        'https://www.apartments.com/taylor-mi-48180/500-to-1500',
        'https://www.apartments.com/marinette-wi-54143/500-to-1500',
        'https://www.apartments.com/detroit-mi-48228/500-to-1500',
        'https://www.apartments.com/hamtramck-mi-48212/500-to-1500',
        'https://www.apartments.com/wallace-nc-28466/500-to-1500',
        'https://www.apartments.com/pensacola-fl-0/500-to-1500',
        'https://www.apartments.com/okeechobee-fl-34972/500-to-1500',
        'https://www.apartments.com/colfax-nc-27235/500-to-1500',
        'https://www.apartments.com/temple-hills-md-20748/500-to-1500',
        'https://www.apartments.com/reidsville-nc-27320/500-to-1500',
        'https://www.apartments.com/auburn-wa-98002/500-to-1500',
        'https://www.apartments.com/shelton-wa-98584/500-to-1500',
        'https://www.apartments.com/lagrange-ga-30241/500-to-1500',
        'https://www.apartments.com/richmond-va-23223/500-to-1500',
        'https://www.apartments.com/shreveport-la-71103/500-to-1500',
        'https://www.apartments.com/birmingham-al-35208/500-to-1500',
        'https://www.apartments.com/east-chicago-in-46312/500-to-1500',
        'https://www.apartments.com/jacksonville-fl-32216/500-to-1500',
        'https://www.apartments.com/rogers-ar-72756/500-to-1500',
        'https://www.apartments.com/johnson-city-tn-37604/500-to-1500',
        'https://www.apartments.com/north-tonawanda-ny-14120/500-to-1500',
        'https://www.apartments.com/carrollton-ga-30117/500-to-1500',
        'https://www.apartments.com/san-antonio-tx-78223/500-to-1500',
        'https://www.apartments.com/bastrop-la-71220/500-to-1500',
        'https://www.apartments.com/chino-valley-az-86323/500-to-1500',
        'https://www.apartments.com/rutherfordton-nc-28139/500-to-1500',
        'https://www.apartments.com/fremont-ca-94536/500-to-1500',
        'https://www.apartments.com/farmington-nm-87401/500-to-1500',
        'https://www.apartments.com/dallas-tx-75217/500-to-1500',
        'https://www.apartments.com/florissant-mo-63033/500-to-1500',
        'https://www.apartments.com/gulfport-ms-39501/500-to-1500',
        'https://www.apartments.com/oliver-springs-tn-37840/500-to-1500',
        'https://www.apartments.com/bronx-ny-10456/500-to-1500',
        'https://www.apartments.com/dayton-oh-45406/500-to-1500',
        'https://www.apartments.com/lynchburg-va-24502/500-to-1500',
        'https://www.apartments.com/arlington-tx-76010/500-to-1500',
        'https://www.apartments.com/camby-in-46113/500-to-1500',
        'https://www.apartments.com/fort-smith-ar-72903/500-to-1500',
        'https://www.apartments.com/nan-nan-30908/500-to-1500',
        'https://www.apartments.com/rome-ga-30161/500-to-1500',
        'https://www.apartments.com/holliston-ma-1746/500-to-1500',
        'https://www.apartments.com/mcpherson-ks-67460/500-to-1500',
        'https://www.apartments.com/tampa-fl-33610/500-to-1500',
        'https://www.apartments.com/norristown-pa-19401/500-to-1500',
        'https://www.apartments.com/dahlonega-ga-30533/500-to-1500',
        'https://www.apartments.com/charlotte-nc-28214/500-to-1500',
        'https://www.apartments.com/selma-ca-93662/500-to-1500',
        'https://www.apartments.com/nan-nan-17001/500-to-1500',
        'https://www.apartments.com/aurora-il-60506/500-to-1500',
        'https://www.apartments.com/nampa-id-83687/500-to-1500',
        'https://www.apartments.com/des-moines-ia-50317/500-to-1500',
        'https://www.apartments.com/fort-lauderdale-fl-33309/500-to-1500',
        'https://www.apartments.com/leland-nc-28451/500-to-1500',
        'https://www.apartments.com/columbus-oh-43228/500-to-1500',
        'https://www.apartments.com/kansas-city-mo-64129/500-to-1500',
        'https://www.apartments.com/tulsa-ok-74135/500-to-1500',
        'https://www.apartments.com/russellville-ar-72802/500-to-1500',
        'https://www.apartments.com/cookeville-tn-38501/500-to-1500',
        'https://www.apartments.com/talbott-tn-37877/500-to-1500',
        'https://www.apartments.com/oklahoma-city-ok-73112/500-to-1500',
        'https://www.apartments.com/westland-mi-48185/500-to-1500',
        'https://www.apartments.com/wake-forest-nc-27587/500-to-1500',
        'https://www.apartments.com/haines-city-fl-33844/500-to-1500',
        'https://www.apartments.com/north-las-vegas-nv-89030/500-to-1500',
        'https://www.apartments.com/tacoma-wa-98409/500-to-1500',
        'https://www.apartments.com/salisbury-md-21801/500-to-1500',
        'https://www.apartments.com/griffin-ga-30224/500-to-1500',
        'https://www.apartments.com/dallas-tx-75216/500-to-1500',
        'https://www.apartments.com/macon-ga-31217/500-to-1500',
        'https://www.apartments.com/grandview-mo-64030/500-to-1500',
        'https://www.apartments.com/canton-oh-44705/500-to-1500',
        'https://www.apartments.com/parsonsburg-md-21849/500-to-1500',
        'https://www.apartments.com/indianapolis-in-46201/500-to-1500',
        'https://www.apartments.com/glendale-az-85301/500-to-1500',
        'https://www.apartments.com/richmond-va-23235/500-to-1500',
        'https://www.apartments.com/burnet-tx-78611/500-to-1500',
        'https://www.apartments.com/holiday-fl-34691/500-to-1500',
        'https://www.apartments.com/milwaukee-wi-53205/500-to-1500',
        'https://www.apartments.com/new-port-richey-fl-34652/500-to-1500',
        'https://www.apartments.com/portland-tn-37148/500-to-1500',
        'https://www.apartments.com/hickory-nc-28602/500-to-1500',
        'https://www.apartments.com/hemet-ca-92543/500-to-1500',
        'https://www.apartments.com/denver-co-80209/500-to-1500',
        'https://www.apartments.com/rialto-ca-92376/500-to-1500',
        'https://www.apartments.com/spokane-wa-99207/500-to-1500',
        'https://www.apartments.com/pensacola-fl-32506/500-to-1500',
        'https://www.apartments.com/cincinnati-oh-45211/500-to-1500',
        'https://www.apartments.com/fresno-ca-93705/500-to-1500',
        'https://www.apartments.com/rochester-ny-14613/500-to-1500',
        'https://www.apartments.com/maryville-tn-37803/500-to-1500',
        'https://www.apartments.com/manchester-nh-3102/500-to-1500',
        'https://www.apartments.com/mesa-az-85202/500-to-1500',
        'https://www.apartments.com/oxford-nc-27565/500-to-1500',
        'https://www.apartments.com/amelia-oh-45102/500-to-1500',
        'https://www.apartments.com/brookhaven-ms-39601/500-to-1500',
        'https://www.apartments.com/philadelphia-pa-19135/500-to-1500',
        'https://www.apartments.com/riverside-ca-92509/500-to-1500',
        'https://www.apartments.com/spencer-ok-73084/500-to-1500',
        'https://www.apartments.com/canton-mi-48188/500-to-1500',
        'https://www.apartments.com/decatur-il-62521/500-to-1500',
        'https://www.apartments.com/baltimore-md-21229/500-to-1500',
        'https://www.apartments.com/portsmouth-va-23704/500-to-1500',
        'https://www.apartments.com/jonesboro-ga-30238/500-to-1500',
        'https://www.apartments.com/kingston-pa-18704/500-to-1500',
        'https://www.apartments.com/huntington-beach-ca-92647/500-to-1500',
        'https://www.apartments.com/patterson-ca-95363/500-to-1500',
        'https://www.apartments.com/detroit-mi-48210/500-to-1500',
        'https://www.apartments.com/prattville-al-36067/500-to-1500',
        'https://www.apartments.com/springfield-tn-37172/500-to-1500',
        'https://www.apartments.com/memphis-tn-38116/500-to-1500',
        'https://www.apartments.com/littleton-co-80122/500-to-1500',
        'https://www.apartments.com/waterbury-ct-6705/500-to-1500',
        'https://www.apartments.com/coeur-d-alene-id-83815/500-to-1500',
        'https://www.apartments.com/ponce-de-leon-fl-32455/500-to-1500',
        'https://www.apartments.com/new-london-ct-6320/500-to-1500',
        'https://www.apartments.com/sacramento-ca-95828/500-to-1500',
        'https://www.apartments.com/fort-edward-ny-12828/500-to-1500',
        'https://www.apartments.com/pinellas-park-fl-33781/500-to-1500',
        'https://www.apartments.com/kewanee-il-61443/500-to-1500',
        'https://www.apartments.com/georgetown-ky-40324/500-to-1500',
        'https://www.apartments.com/longview-il-61852/500-to-1500',
        'https://www.apartments.com/merced-ca-95348/500-to-1500',
        'https://www.apartments.com/annandale-va-22003/500-to-1500',
        'https://www.apartments.com/stone-mountain-ga-30088/500-to-1500',
        'https://www.apartments.com/de-leon-tx-76444/500-to-1500',
        'https://www.apartments.com/spring-lake-nc-28390/500-to-1500',
        'https://www.apartments.com/batavia-oh-45103/500-to-1500',
        'https://www.apartments.com/zanesville-oh-43701/500-to-1500',
        'https://www.apartments.com/belleville-il-62220/500-to-1500',
        'https://www.apartments.com/copperas-cove-tx-76522/500-to-1500',
        'https://www.apartments.com/huntsville-al-35803/500-to-1500',
        'https://www.apartments.com/humble-tx-77338/500-to-1500',
        'https://www.apartments.com/dover-de-19904/500-to-1500',
        'https://www.apartments.com/laurel-ms-39440/500-to-1500',
        'https://www.apartments.com/portland-mi-48875/500-to-1500',
        'https://www.apartments.com/mishawaka-in-46544/500-to-1500',
        'https://www.apartments.com/elmsford-ny-10523/500-to-1500',
        'https://www.apartments.com/sparks-nv-89431/500-to-1500',
        'https://www.apartments.com/candler-nc-28715/500-to-1500',
        'https://www.apartments.com/palmyra-me-4965/500-to-1500',
        'https://www.apartments.com/waco-tx-76705/500-to-1500',
        'https://www.apartments.com/sparks-ga-31647/500-to-1500',
        'https://www.apartments.com/wichita-ks-67218/500-to-1500',
        'https://www.apartments.com/hyattsville-md-20785/500-to-1500',
        'https://www.apartments.com/elk-grove-ca-95758/500-to-1500',
        'https://www.apartments.com/forest-grove-or-97116/500-to-1500',
        'https://www.apartments.com/florence-sc-29501/500-to-1500',
        'https://www.apartments.com/cleveland-oh-44112/500-to-1500',
        'https://www.apartments.com/avenel-nj-7001/500-to-1500',
        'https://www.apartments.com/macon-ga-31204/500-to-1500',
        'https://www.apartments.com/chehalis-wa-98532/500-to-1500',
        'https://www.apartments.com/terre-haute-in-47807/500-to-1500',
        'https://www.apartments.com/jonesboro-ar-72401/500-to-1500',
        'https://www.apartments.com/brasstown-nc-28902/500-to-1500',
        'https://www.apartments.com/vidalia-ga-30474/500-to-1500',
        'https://www.apartments.com/nashville-tn-37206/500-to-1500',
        'https://www.apartments.com/ocala-fl-34471/500-to-1500',
        'https://www.apartments.com/cleburne-tx-76033/500-to-1500'



        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
