import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/ansonia-ct-0/400-to-1000',
        'https://www.apartments.com/louisville-ky-40212/400-to-1000',
        'https://www.apartments.com/conley-ga-30288/560-to-1198',
        'https://www.apartments.com/tulsa-ok-74137/320-to-838',
        'https://www.apartments.com/nan-nan-36547/320-to-838',
        'https://www.apartments.com/uniondale-ny-11553/400-to-1000',
        'https://www.apartments.com/guyton-ga-31312/320-to-838',
        'https://www.apartments.com/winchester-va-22603/320-to-838',
        'https://www.apartments.com/delta-co-81416/319-to-478',
        'https://www.apartments.com/nan-nan-32434/560-to-1198',
        'https://www.apartments.com/killeen-tx-76549/320-to-838',
        'https://www.apartments.com/bangor-pa-18013/320-to-838',
        'https://www.apartments.com/metter-ga-30439/560-to-1198',
        'https://www.apartments.com/sarasota-fl-34243/560-to-1198',
        'https://www.apartments.com/pontiac-mi-48341/319-to-478',
        'https://www.apartments.com/cincinnati-oh-45224/320-to-838',
        'https://www.apartments.com/huntsville-al-35805/319-to-478',
        'https://www.apartments.com/davenport-ia-52806/320-to-838',
        'https://www.apartments.com/elkhart-tx-75839/320-to-838',
        'https://www.apartments.com/houston-tx-77009/319-to-478',
        'https://www.apartments.com/lafayette-la-70508/320-to-838',
        'https://www.apartments.com/burlington-ia-52601/320-to-838',
        'https://www.apartments.com/bessemer-al-35020/320-to-838',
        'https://www.apartments.com/belleville-il-62221/320-to-838',
        'https://www.apartments.com/lorain-oh-44053/320-to-838',
        'https://www.apartments.com/cleveland-oh-44111/320-to-838',
        'https://www.apartments.com/detroit-mi-48219/320-to-838',
        'https://www.apartments.com/dawson-ga-39842/400-to-1000',
        'https://www.apartments.com/urbana-il-61801/320-to-838',
        'https://www.apartments.com/rathdrum-id-83858/400-to-1000',
        'https://www.apartments.com/pickens-sc-29671/319-to-478',
        'https://www.apartments.com/stewartstown-pa-17363/320-to-838',
        'https://www.apartments.com/monroe-ga-30655/560-to-1198',
        'https://www.apartments.com/nan-nan-27626/320-to-838',
        'https://www.apartments.com/nan-nan-48151/320-to-838',
        'https://www.apartments.com/redford-mi-48239/400-to-1000',
        'https://www.apartments.com/euclid-oh-44123/560-to-1198',
        'https://www.apartments.com/lancaster-oh-43130/400-to-1000',
        'https://www.apartments.com/louisville-ky-40217/320-to-838',
        'https://www.apartments.com/warren-oh-44485/320-to-838',
        'https://www.apartments.com/providence-ri-2904/560-to-1198',
        'https://www.apartments.com/louisville-ky-40216/560-to-1198',
        'https://www.apartments.com/sarasota-fl-34241/560-to-1198',
        'https://www.apartments.com/murfreesboro-tn-37127/320-to-838',
        'https://www.apartments.com/fayetteville-nc-28314/320-to-838',
        'https://www.apartments.com/massillon-oh-44646/320-to-838',
        'https://www.apartments.com/charlton-ma-1507/319-to-478',
        'https://www.apartments.com/san-antonio-tx-78263/320-to-838',
        'https://www.apartments.com/cherryville-nc-28021/320-to-838',
        'https://www.apartments.com/easton-md-21601/400-to-1000',
        'https://www.apartments.com/moreno-valley-ca-92551/320-to-838',
        'https://www.apartments.com/providence-ri-2909/400-to-1000',
        'https://www.apartments.com/bath-ny-14810/319-to-478',
        'https://www.apartments.com/temple-tx-76504/560-to-1198',
        'https://www.apartments.com/snellville-ga-30078/319-to-478',
        'https://www.apartments.com/leesburg-fl-34748/320-to-838',
        'https://www.apartments.com/richmond-ky-40475/560-to-1198',
        'https://www.apartments.com/foley-al-36535/560-to-1198',
        'https://www.apartments.com/apache-junction-az-85119/400-to-1000',
        'https://www.apartments.com/shelby-nc-28152/400-to-1000',
        'https://www.apartments.com/dickinson-tx-77539/560-to-1198',
        'https://www.apartments.com/camden-nj-8103/319-to-478',
        'https://www.apartments.com/white-sulphur-springs-wv-24986/319-to-478',
        'https://www.apartments.com/sharon-pa-16146/319-to-478',
        'https://www.apartments.com/las-vegas-nv-89122/1000-to-1200',
        'https://www.apartments.com/newport-news-va-23602/320-to-838',
        'https://www.apartments.com/lutz-fl-33559/320-to-838',
        'https://www.apartments.com/oxford-ms-38655/320-to-838',
        'https://www.apartments.com/north-east-md-21901/320-to-838',
        'https://www.apartments.com/indianapolis-in-46205/320-to-838',
        'https://www.apartments.com/kernersville-nc-27284/400-to-1000',
        'https://www.apartments.com/hutchinson-ks-67501/320-to-838',
        'https://www.apartments.com/nan-nan-8267/1000-to-1200',
        'https://www.apartments.com/gilroy-ca-95020/560-to-1198',
        'https://www.apartments.com/laurel-md-20724/1000-to-1200',
        'https://www.apartments.com/evansville-in-47725/320-to-838',
        'https://www.apartments.com/clearlake-oaks-ca-95423/560-to-1198',
        'https://www.apartments.com/lumberton-nc-28360/320-to-838',
        'https://www.apartments.com/lexington-sc-29073/320-to-838',
        'https://www.apartments.com/albemarle-nc-28001/400-to-1000',
        'https://www.apartments.com/pompano-beach-fl-33068/319-to-478',
        'https://www.apartments.com/milford-ma-1757/560-to-1198',
        'https://www.apartments.com/fayetteville-nc-28303/400-to-1000',
        'https://www.apartments.com/midlothian-tx-76065/1000-to-1200',
        'https://www.apartments.com/saint-louis-mo-63136/319-to-478',
        'https://www.apartments.com/philadelphia-pa-19133/560-to-1198',
        'https://www.apartments.com/waynesville-nc-28786/320-to-838',
        'https://www.apartments.com/tampa-fl-33605/400-to-1000',
        'https://www.apartments.com/athens-ga-30605/560-to-1198',
        'https://www.apartments.com/mocksville-nc-27028/560-to-1198',
        'https://www.apartments.com/chattanooga-tn-37406/560-to-1198',
        'https://www.apartments.com/winston-salem-nc-27107/320-to-838',
        'https://www.apartments.com/fayetteville-nc-28306/560-to-1198',
        'https://www.apartments.com/lansing-mi-48910/400-to-1000',
        'https://www.apartments.com/freeport-tx-77541/320-to-838',
        'https://www.apartments.com/asheville-nc-28803/560-to-1198',
        'https://www.apartments.com/chicago-il-60647/320-to-838',
        'https://www.apartments.com/waco-tx-76707/560-to-1198',
        'https://www.apartments.com/kissimmee-fl-34743/320-to-838',
        'https://www.apartments.com/dallas-tx-75204/400-to-1000',
        'https://www.apartments.com/augusta-ga-30904/320-to-838',
        'https://www.apartments.com/jacksonville-al-36265/319-to-478',
        'https://www.apartments.com/morganton-nc-28655/319-to-478',
        'https://www.apartments.com/san-pedro-ca-90731/400-to-1000',
        'https://www.apartments.com/decatur-al-35601/319-to-478',
        'https://www.apartments.com/new-orleans-la-70127/1000-to-1200',
        'https://www.apartments.com/nan-nan-34692/319-to-478',
        'https://www.apartments.com/raleigh-nc-27613/1000-to-1200',
        'https://www.apartments.com/pooler-ga-31322/560-to-1198',
        'https://www.apartments.com/nan-nan-33526/320-to-838',
        'https://www.apartments.com/charleston-wv-25306/320-to-838',
        'https://www.apartments.com/mulberry-fl-33860/320-to-838',
        'https://www.apartments.com/phoenix-az-85035/319-to-478',
        'https://www.apartments.com/cleveland-oh-44105/320-to-838',
        'https://www.apartments.com/greenville-nc-27858/319-to-478',
        'https://www.apartments.com/plymouth-ma-2360/320-to-838',
        'https://www.apartments.com/mishawaka-in-46544/560-to-1198',
        'https://www.apartments.com/salisbury-md-21802/320-to-838',
        'https://www.apartments.com/mooresville-nc-28115/560-to-1198',
        'https://www.apartments.com/tulsa-ok-74127/320-to-838',
        'https://www.apartments.com/salisbury-nc-28144/320-to-838',
        'https://www.apartments.com/york-pa-17402/320-to-838',
        'https://www.apartments.com/savannah-ga-31404/320-to-838',
        'https://www.apartments.com/philadelphia-pa-19145/319-to-478',
        'https://www.apartments.com/las-vegas-nv-89141/1000-to-1200',
        'https://www.apartments.com/temple-tx-76502/560-to-1198',
        'https://www.apartments.com/colorado-springs-co-80907/1000-to-1200',
        'https://www.apartments.com/marshall-mo-65340/320-to-838',
        'https://www.apartments.com/fond-du-lac-wi-54935/560-to-1198',
        'https://www.apartments.com/columbus-oh-43207/320-to-838',
        'https://www.apartments.com/tyaskin-md-21865/319-to-478',
        'https://www.apartments.com/lakewood-oh-44107/560-to-1198',
        'https://www.apartments.com/chandler-az-85286/1000-to-1200',
        'https://www.apartments.com/buffalo-ny-14207/1000-to-1200',
        'https://www.apartments.com/las-vegas-nv-89104/320-to-838',
        'https://www.apartments.com/branson-mo-65616/320-to-838',
        'https://www.apartments.com/creedmoor-nc-27522/320-to-838',
        'https://www.apartments.com/madison-oh-44057/320-to-838',
        'https://www.apartments.com/lake-worth-fl-33461/400-to-1000',
        'https://www.apartments.com/bluff-city-tn-37618/319-to-478',
        'https://www.apartments.com/toledo-oh-43612/320-to-838',
        'https://www.apartments.com/grand-rapids-mi-49508/1000-to-1200',
        'https://www.apartments.com/pompano-beach-fl-33064/1000-to-1200',
        'https://www.apartments.com/wilson-nc-27893/320-to-838',
        'https://www.apartments.com/charleston-il-61920/320-to-838',
        'https://www.apartments.com/union-city-tn-38261/320-to-838',
        'https://www.apartments.com/fort-worth-tx-76140/319-to-478',
        'https://www.apartments.com/idaho-falls-id-83404/320-to-838',
        'https://www.apartments.com/pittsburgh-pa-15205/400-to-1000',
        'https://www.apartments.com/philadelphia-pa-19146/319-to-478',
        'https://www.apartments.com/springfield-oh-45502/320-to-838',
        'https://www.apartments.com/decatur-ga-30032/400-to-1000',
        'https://www.apartments.com/kearneysville-wv-25430/320-to-838',
        'https://www.apartments.com/morristown-nj-7960/1000-to-1200',
        'https://www.apartments.com/aurora-co-80015/1000-to-1200',
        'https://www.apartments.com/portsmouth-va-23704/320-to-838',
        'https://www.apartments.com/reedley-ca-93654/319-to-478',
        'https://www.apartments.com/ashley-in-46705/320-to-838',
        'https://www.apartments.com/palmdale-ca-93551/560-to-1198',
        'https://www.apartments.com/reno-nv-89502/560-to-1198',
        'https://www.apartments.com/crossville-tn-38555/320-to-838',
        'https://www.apartments.com/san-antonio-tx-78219/400-to-1000',
        'https://www.apartments.com/carrollton-ga-30117/560-to-1198',
        'https://www.apartments.com/new-kensington-pa-15068/320-to-838',
        'https://www.apartments.com/san-jose-ca-95127/320-to-838',
        'https://www.apartments.com/augusta-ga-30906/1000-to-1200',
        'https://www.apartments.com/hayden-al-35079/1000-to-1200',
        'https://www.apartments.com/marion-va-24354/319-to-478',
        'https://www.apartments.com/glen-burnie-md-21060/1000-to-1200',
        'https://www.apartments.com/merrimack-nh-3054/1000-to-1200',
        'https://www.apartments.com/seattle-wa-98166/1000-to-1200',
        'https://www.apartments.com/huron-sd-57350/320-to-838',
        'https://www.apartments.com/fall-river-ma-2720/320-to-838',
        'https://www.apartments.com/biloxi-ms-39530/320-to-838',
        'https://www.apartments.com/mesa-az-85209/1000-to-1200',
        'https://www.apartments.com/oklahoma-city-ok-73129/320-to-838',
        'https://www.apartments.com/mableton-ga-30126/400-to-1000',
        'https://www.apartments.com/hollywood-fl-33019/320-to-838',
        'https://www.apartments.com/tucson-az-85746/320-to-838',
        'https://www.apartments.com/saint-louis-mo-63121/560-to-1198',
        'https://www.apartments.com/cape-coral-fl-33993/1000-to-1200',
        'https://www.apartments.com/mankato-mn-56001/320-to-838',
        'https://www.apartments.com/mcdonough-ga-30252/320-to-838',
        'https://www.apartments.com/albany-ga-31701/320-to-838',
        'https://www.apartments.com/north-port-fl-34287/320-to-838',
        'https://www.apartments.com/oklahoma-city-ok-73109/320-to-838',
        'https://www.apartments.com/las-vegas-nv-89102/320-to-838',
        'https://www.apartments.com/chicago-il-60612/1000-to-1200',
        'https://www.apartments.com/blue-springs-mo-64014/560-to-1198',
        'https://www.apartments.com/mobile-al-36609/560-to-1198',
        'https://www.apartments.com/richmond-va-23224/400-to-1000',
        'https://www.apartments.com/clearlake-ca-95422/320-to-838',
        'https://www.apartments.com/charlotte-nc-28262/1000-to-1200',
        'https://www.apartments.com/roy-ut-84067/1000-to-1200',
        'https://www.apartments.com/memphis-tn-38117/400-to-1000',
        'https://www.apartments.com/cheyenne-wy-82007/320-to-838',
        'https://www.apartments.com/belton-tx-76513/560-to-1198',
        'https://www.apartments.com/highland-ca-92346/319-to-478',
        'https://www.apartments.com/jackson-ms-39206/319-to-478',
        'https://www.apartments.com/madison-wi-53704/320-to-838',
        'https://www.apartments.com/aberdeen-md-21001/1000-to-1200',
        'https://www.apartments.com/lubbock-tx-79410/320-to-838',
        'https://www.apartments.com/sanford-fl-32771/400-to-1000',
        'https://www.apartments.com/torrance-ca-90501/319-to-478',
        'https://www.apartments.com/frederick-md-21702/320-to-838',
        'https://www.apartments.com/waukegan-il-60085/400-to-1000',
        'https://www.apartments.com/stockton-ca-95207/560-to-1198',
        'https://www.apartments.com/spokane-wa-99207/560-to-1198',
        'https://www.apartments.com/west-sacramento-ca-95605/320-to-838',
        'https://www.apartments.com/phoenix-az-85022/320-to-838',
        'https://www.apartments.com/tampa-fl-33612/560-to-1198',
        'https://www.apartments.com/phoenix-az-85021/1000-to-1200',
        'https://www.apartments.com/fairbanks-ak-99701/320-to-838',
        'https://www.apartments.com/grand-rapids-mi-49503/320-to-838',
        'https://www.apartments.com/south-bend-in-46628/560-to-1198',
        'https://www.apartments.com/springfield-tn-37172/560-to-1198',
        'https://www.apartments.com/cocoa-fl-32927/560-to-1198',
        'https://www.apartments.com/ventura-ca-93003/400-to-1000',
        'https://www.apartments.com/oklahoma-city-ok-73118/320-to-838',
        'https://www.apartments.com/winston-salem-nc-27106/560-to-1198',
        'https://www.apartments.com/mesa-az-85203/320-to-838',
        'https://www.apartments.com/oak-ridge-tn-37830/560-to-1198',
        'https://www.apartments.com/gary-in-46404/560-to-1198',
        'https://www.apartments.com/rock-hill-sc-29730/319-to-478',
        'https://www.apartments.com/meriden-ct-6451/400-to-1000',
        'https://www.apartments.com/mesa-az-85205/1000-to-1200',
        'https://www.apartments.com/griffin-ga-30223/560-to-1198',
        'https://www.apartments.com/bessemer-city-nc-28016/320-to-838',
        'https://www.apartments.com/albuquerque-nm-87108/320-to-838',
        'https://www.apartments.com/arlington-tx-76012/560-to-1198',
        'https://www.apartments.com/morris-il-60450/1000-to-1200',
        'https://www.apartments.com/new-castle-de-19720/1000-to-1200',
        'https://www.apartments.com/san-antonio-tx-78202/1000-to-1200',
        'https://www.apartments.com/san-jose-ca-95123/1000-to-1200',
        'https://www.apartments.com/reno-nv-89509/560-to-1198',
        'https://www.apartments.com/conway-sc-29527/400-to-1000',
        'https://www.apartments.com/kannapolis-nc-28083/320-to-838',
        'https://www.apartments.com/normal-il-61761/560-to-1198',
        'https://www.apartments.com/baton-rouge-la-70807/560-to-1198',
        'https://www.apartments.com/springfield-mo-65803/319-to-478',
        'https://www.apartments.com/milford-nh-3055/560-to-1198',
        'https://www.apartments.com/memphis-tn-38104/400-to-1000',
        'https://www.apartments.com/rockingham-nc-28379/320-to-838',
        'https://www.apartments.com/denver-co-80238/1000-to-1200',
        'https://www.apartments.com/jackson-ms-39209/560-to-1198',
        'https://www.apartments.com/granbury-tx-76048/320-to-838',
        'https://www.apartments.com/gastonia-nc-28052/319-to-478',
        'https://www.apartments.com/darlington-sc-29532/319-to-478',
        'https://www.apartments.com/sanford-nc-27332/400-to-1000',
        'https://www.apartments.com/stone-mountain-ga-30087/1000-to-1200',
        'https://www.apartments.com/paulsboro-nj-8066/560-to-1198',
        'https://www.apartments.com/gaffney-sc-29340/319-to-478',
        'https://www.apartments.com/jacksonville-fl-32210/560-to-1198',
        'https://www.apartments.com/kansas-city-ks-66111/320-to-838',
        'https://www.apartments.com/cincinnati-oh-45225/320-to-838',
        'https://www.apartments.com/fresno-ca-93703/1000-to-1200',
        'https://www.apartments.com/sallisaw-ok-74955/319-to-478',
        'https://www.apartments.com/indianapolis-in-46226/320-to-838',
        'https://www.apartments.com/corpus-christi-tx-78404/320-to-838',
        'https://www.apartments.com/indianapolis-in-46218/560-to-1198',
        'https://www.apartments.com/jacksonville-fl-32221/560-to-1198',
        'https://www.apartments.com/columbus-ga-31907/320-to-838',
        'https://www.apartments.com/okeechobee-fl-34974/1000-to-1200',
        'https://www.apartments.com/dunedin-fl-34698/320-to-838',
        'https://www.apartments.com/elyria-oh-44035/320-to-838',
        'https://www.apartments.com/newport-nc-28570/320-to-838',
        'https://www.apartments.com/madison-heights-va-24572/319-to-478',
        'https://www.apartments.com/norwalk-ct-6855/320-to-838',
        'https://www.apartments.com/wolcott-ct-6716/319-to-478',
        'https://www.apartments.com/youngstown-oh-44515/320-to-838'

        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
