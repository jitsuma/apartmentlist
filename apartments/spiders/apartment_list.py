import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/dyersburg-tn-38024/320-to-838',
        'https://www.apartments.com/lanham-md-0/400-to-1000',
        'https://www.apartments.com/newark-nj-7103/319-to-478',
        'https://www.apartments.com/memphis-tn-38134/320-to-838',
        'https://www.apartments.com/batesburg-sc-29006/320-to-838',
        'https://www.apartments.com/broken-arrow-ok-74014/320-to-838',
        'https://www.apartments.com/old-town-fl-32680/320-to-838',
        'https://www.apartments.com/spring-tx-77373/1000-to-1200',
        'https://www.apartments.com/pilot-mountain-nc-27041/320-to-838',
        'https://www.apartments.com/west-enfield-me-4493/320-to-838',
        'https://www.apartments.com/glen-burnie-md-21061/400-to-1000',
        'https://www.apartments.com/little-river-sc-29566/319-to-478',
        'https://www.apartments.com/warrensburg-mo-64093/400-to-1000',
        'https://www.apartments.com/henrico-va-23231/400-to-1000',
        'https://www.apartments.com/wheeling-wv-26003/400-to-1000',
        'https://www.apartments.com/reading-pa-19604/400-to-1000',
        'https://www.apartments.com/elizabethtown-ky-42701/320-to-838',
        'https://www.apartments.com/vineland-nj-8361/320-to-838',
        'https://www.apartments.com/warren-mi-48091/560-to-1198',
        'https://www.apartments.com/roanoke-rapids-nc-27870/400-to-1000',
        'https://www.apartments.com/murrells-inlet-sc-29576/1000-to-1200',
        'https://www.apartments.com/north-east-md-21901/400-to-1000',
        'https://www.apartments.com/richmond-ky-40475/319-to-478',
        'https://www.apartments.com/gwynn-oak-md-21207/400-to-1000',
        'https://www.apartments.com/euclid-oh-44132/320-to-838',
        'https://www.apartments.com/marysville-ca-95901/320-to-838',
        'https://www.apartments.com/harrisburg-pa-17112/400-to-1000',
        'https://www.apartments.com/sarasota-fl-34234/400-to-1000',
        'https://www.apartments.com/gainesville-tx-76240/400-to-1000',
        'https://www.apartments.com/rochester-ny-14619/400-to-1000',
        'https://www.apartments.com/abilene-tx-79602/560-to-1198',
        'https://www.apartments.com/lacon-il-61540/320-to-838',
        'https://www.apartments.com/columbus-ga-31903/400-to-1000',
        'https://www.apartments.com/sapulpa-ok-74066/560-to-1198',
        'https://www.apartments.com/clinton-in-47842/400-to-1000',
        'https://www.apartments.com/bangor-me-4401/560-to-1198',
        'https://www.apartments.com/mcminnville-tn-37110/400-to-1000',
        'https://www.apartments.com/columbus-oh-43204/560-to-1198',
        'https://www.apartments.com/charlotte-nc-28216/400-to-1000',
        'https://www.apartments.com/odum-ga-31555/320-to-838',
        'https://www.apartments.com/fayetteville-nc-28314/320-to-838',
        'https://www.apartments.com/lowell-ma-1854/400-to-1000',
        'https://www.apartments.com/plainfield-in-46168/560-to-1198',
        'https://www.apartments.com/north-port-fl-34286/1000-to-1200',
        'https://www.apartments.com/salisbury-md-21801/320-to-838',
        'https://www.apartments.com/newnan-ga-30263/320-to-838',
        'https://www.apartments.com/salem-ma-1970/320-to-838',
        'https://www.apartments.com/philadelphia-pa-19141/1000-to-1200',
        'https://www.apartments.com/beverly-oh-45715/400-to-1000',
        'https://www.apartments.com/las-vegas-nv-89145/400-to-1000',
        'https://www.apartments.com/cincinnati-oh-45211/320-to-838',
        'https://www.apartments.com/prentiss-ms-39474/400-to-1000',
        'https://www.apartments.com/oklahoma-city-ok-73107/320-to-838',
        'https://www.apartments.com/new-market-al-35761/400-to-1000',
        'https://www.apartments.com/wyoming-mi-49509/400-to-1000',
        'https://www.apartments.com/bainbridge-ga-39817/319-to-478',
        'https://www.apartments.com/gary-in-46406/400-to-1000',
        'https://www.apartments.com/kansas-city-ks-66104/400-to-1000',
        'https://www.apartments.com/pittsburg-ca-94565/400-to-1000',
        'https://www.apartments.com/delavan-wi-53115/560-to-1198',
        'https://www.apartments.com/independence-mo-64055/320-to-838',
        'https://www.apartments.com/angola-in-46703/400-to-1000',
        'https://www.apartments.com/west-haven-ct-6516/400-to-1000',
        'https://www.apartments.com/chambersburg-pa-17202/319-to-478',
        'https://www.apartments.com/newark-de-19702/400-to-1000',
        'https://www.apartments.com/salisbury-nc-28147/320-to-838',
        'https://www.apartments.com/wyoming-mi-49519/400-to-1000',
        'https://www.apartments.com/chicago-il-60649/320-to-838',
        'https://www.apartments.com/hartford-ct-6106/560-to-1198',
        'https://www.apartments.com/san-pedro-ca-90731/400-to-1000',
        'https://www.apartments.com/new-orleans-la-70115/320-to-838',
        'https://www.apartments.com/norcross-ga-30093/400-to-1000',
        'https://www.apartments.com/victorville-ca-92392/400-to-1000',
        'https://www.apartments.com/fort-myers-fl-33913/1000-to-1200',
        'https://www.apartments.com/clover-sc-29710/320-to-838',
        'https://www.apartments.com/gray-court-sc-29645/400-to-1000',
        'https://www.apartments.com/lehigh-acres-fl-33974/320-to-838',
        'https://www.apartments.com/detroit-mi-48217/400-to-1000',
        'https://www.apartments.com/perris-ca-92571/319-to-478',
        'https://www.apartments.com/milwaukee-wi-53212/1000-to-1200',
        'https://www.apartments.com/winder-ga-30680/1000-to-1200',
        'https://www.apartments.com/miami-fl-33142/400-to-1000',
        'https://www.apartments.com/summerton-sc-29148/400-to-1000',
        'https://www.apartments.com/massillon-oh-44646/400-to-1000',
        'https://www.apartments.com/la-crosse-wi-54601/320-to-838',
        'https://www.apartments.com/los-angeles-ca-90040/400-to-1000',
        'https://www.apartments.com/granite-city-il-62040/560-to-1198',
        'https://www.apartments.com/fort-worth-tx-76114/400-to-1000',
        'https://www.apartments.com/ravenswood-wv-26164/320-to-838',
        'https://www.apartments.com/rockford-mi-49341/400-to-1000',
        'https://www.apartments.com/thomaston-ga-30286/320-to-838',
        'https://www.apartments.com/greensboro-nc-27401/400-to-1000',
        'https://www.apartments.com/augusta-ga-30906/400-to-1000',
        'https://www.apartments.com/anderson-in-46012/400-to-1000',
        'https://www.apartments.com/paris-tx-75462/319-to-478',
        'https://www.apartments.com/mobile-al-36605/400-to-1000',
        'https://www.apartments.com/coatesville-pa-19320/560-to-1198',
        'https://www.apartments.com/fountain-fl-32438/319-to-478',
        'https://www.apartments.com/grantsville-ut-84029/400-to-1000',
        'https://www.apartments.com/redmond-or-97756/320-to-838',
        'https://www.apartments.com/phoenix-az-85009/400-to-1000',
        'https://www.apartments.com/edgewater-fl-32132/320-to-838',
        'https://www.apartments.com/chandler-az-85225/400-to-1000',
        'https://www.apartments.com/indian-trail-nc-28079/560-to-1198',
        'https://www.apartments.com/waxahachie-tx-75165/400-to-1000',
        'https://www.apartments.com/desert-hot-springs-ca-92240/320-to-838',
        'https://www.apartments.com/penns-grove-nj-8069/400-to-1000',
        'https://www.apartments.com/helena-mt-59601/400-to-1000',
        'https://www.apartments.com/dagsboro-de-19939/560-to-1198',
        'https://www.apartments.com/raleigh-nc-27606/400-to-1000',
        'https://www.apartments.com/saint-charles-mo-63301/400-to-1000',
        'https://www.apartments.com/everett-wa-98201/400-to-1000',
        'https://www.apartments.com/cape-coral-fl-33904/400-to-1000',
        'https://www.apartments.com/madison-wi-53713/400-to-1000',
        'https://www.apartments.com/charlotte-nc-28208/400-to-1000',
        'https://www.apartments.com/milford-ct-6460/400-to-1000',
        'https://www.apartments.com/nan-nan-3369/400-to-1000',
        'https://www.apartments.com/marshall-tx-75672/320-to-838',
        'https://www.apartments.com/spokane-wa-99207/400-to-1000',
        'https://www.apartments.com/orangeburg-sc-29115/400-to-1000',
        'https://www.apartments.com/las-vegas-nv-89122/1000-to-1200',
        'https://www.apartments.com/austin-tx-78728/400-to-1000',
        'https://www.apartments.com/grants-pass-or-97526/400-to-1000',
        'https://www.apartments.com/searcy-ar-72143/320-to-838',
        'https://www.apartments.com/mount-pleasant-mi-48858/320-to-838',
        'https://www.apartments.com/missoula-mt-59801/400-to-1000',
        'https://www.apartments.com/lithonia-ga-30058/400-to-1000',
        'https://www.apartments.com/supply-nc-28462/320-to-838',
        'https://www.apartments.com/waco-tx-76711/319-to-478',
        'https://www.apartments.com/san-jose-ca-95122/320-to-838',
        'https://www.apartments.com/huntington-beach-ca-92647/400-to-1000',
        'https://www.apartments.com/columbus-oh-43206/400-to-1000',
        'https://www.apartments.com/genoa-city-wi-53128/400-to-1000',
        'https://www.apartments.com/tanner-al-35671/560-to-1198',
        'https://www.apartments.com/pompano-beach-fl-33068/400-to-1000',
        'https://www.apartments.com/dallas-tx-75217/560-to-1198',
        'https://www.apartments.com/new-haven-ct-6513/400-to-1000',
        'https://www.apartments.com/nan-nan-34220/400-to-1000',
        'https://www.apartments.com/lake-city-sc-29560/319-to-478',
        'https://www.apartments.com/la-marque-tx-77568/400-to-1000',
        'https://www.apartments.com/lockhart-tx-78644/560-to-1198',
        'https://www.apartments.com/richmond-va-23222/400-to-1000',
        'https://www.apartments.com/grafton-wi-53024/320-to-838',
        'https://www.apartments.com/gulfport-ms-39507/400-to-1000',
        'https://www.apartments.com/alvin-tx-77511/560-to-1198',
        'https://www.apartments.com/wesley-chapel-fl-33545/400-to-1000',
        'https://www.apartments.com/winfield-ks-67156/319-to-478',
        'https://www.apartments.com/new-church-va-23415/400-to-1000',
        'https://www.apartments.com/albuquerque-nm-87123/400-to-1000',
        'https://www.apartments.com/dalton-ga-30721/320-to-838',
        'https://www.apartments.com/joliet-il-60435/400-to-1000',
        'https://www.apartments.com/grand-rapids-mi-49503/400-to-1000',
        'https://www.apartments.com/santa-fe-nm-87505/400-to-1000',
        'https://www.apartments.com/piscataway-nj-8854/400-to-1000',
        'https://www.apartments.com/berea-ky-40403/320-to-838',
        'https://www.apartments.com/balsam-nc-28707/560-to-1198',
        'https://www.apartments.com/spring-tx-77379/560-to-1198',
        'https://www.apartments.com/phoenix-az-85014/400-to-1000',
        'https://www.apartments.com/kansas-city-mo-64132/400-to-1000',
        'https://www.apartments.com/sherman-tx-75092/400-to-1000',
        'https://www.apartments.com/hesperia-ca-92345/400-to-1000',
        'https://www.apartments.com/clementon-nj-8021/1000-to-1200',
        'https://www.apartments.com/columbus-oh-43207/400-to-1000',
        'https://www.apartments.com/cerrillos-nm-87010/560-to-1198',
        'https://www.apartments.com/glenwood-springs-co-81601/1000-to-1200',
        'https://www.apartments.com/tucson-az-85719/400-to-1000',
        'https://www.apartments.com/haw-river-nc-27258/319-to-478',
        'https://www.apartments.com/barnardsville-nc-28709/400-to-1000',
        'https://www.apartments.com/new-bedford-ma-2745/400-to-1000',
        'https://www.apartments.com/mount-dora-fl-32757/319-to-478',
        'https://www.apartments.com/pompano-beach-fl-33069/1000-to-1200',
        'https://www.apartments.com/cleveland-oh-44112/560-to-1198',
        'https://www.apartments.com/roseville-ca-95661/400-to-1000',
        'https://www.apartments.com/lenoir-nc-28645/320-to-838',
        'https://www.apartments.com/bradenton-fl-34205/560-to-1198',
        'https://www.apartments.com/tampa-fl-33619/400-to-1000',
        'https://www.apartments.com/greenville-nc-27858/319-to-478',
        'https://www.apartments.com/pinson-al-35126/400-to-1000',
        'https://www.apartments.com/lakewood-wa-98498/400-to-1000',
        'https://www.apartments.com/westminster-ca-92683/560-to-1198',
        'https://www.apartments.com/upper-darby-pa-19082/400-to-1000',
        'https://www.apartments.com/san-benito-tx-78586/400-to-1000',
        'https://www.apartments.com/waynesville-nc-28786/320-to-838',
        'https://www.apartments.com/springfield-mo-65804/400-to-1000',
        'https://www.apartments.com/lakeland-fl-33801/400-to-1000',
        'https://www.apartments.com/dallas-tx-75248/320-to-838',
        'https://www.apartments.com/bronx-ny-10457/400-to-1000',
        'https://www.apartments.com/lewiston-id-83501/320-to-838',
        'https://www.apartments.com/charleston-sc-29407/400-to-1000',
        'https://www.apartments.com/independence-ky-41051/400-to-1000',
        'https://www.apartments.com/howell-mi-48843/400-to-1000',
        'https://www.apartments.com/fort-lauderdale-fl-33311/320-to-838',
        'https://www.apartments.com/cedar-rapids-ia-52403/320-to-838',
        'https://www.apartments.com/chicago-il-60617/400-to-1000',
        'https://www.apartments.com/valley-center-ks-67147/560-to-1198',
        'https://www.apartments.com/highland-ca-92346/319-to-478',
        'https://www.apartments.com/clifton-heights-pa-19018/400-to-1000',
        'https://www.apartments.com/little-rock-ar-72204/400-to-1000',
        'https://www.apartments.com/orlando-fl-32804/400-to-1000',
        'https://www.apartments.com/dickinson-tx-77539/319-to-478',
        'https://www.apartments.com/boynton-beach-fl-33435/1000-to-1200',
        'https://www.apartments.com/surprise-az-85374/560-to-1198',
        'https://www.apartments.com/knoxville-tn-37924/400-to-1000',
        'https://www.apartments.com/flagstaff-az-86001/400-to-1000',
        'https://www.apartments.com/lexington-nc-27292/320-to-838',
        'https://www.apartments.com/des-moines-ia-50315/400-to-1000',
        'https://www.apartments.com/mount-pleasant-tx-75455/320-to-838',
        'https://www.apartments.com/pacoima-ca-91331/400-to-1000',
        'https://www.apartments.com/knoxville-tn-37931/400-to-1000',
        'https://www.apartments.com/la-quinta-ca-92253/400-to-1000',
        'https://www.apartments.com/des-moines-ia-50313/400-to-1000',
        'https://www.apartments.com/independence-mo-64056/400-to-1000',
        'https://www.apartments.com/saint-louis-mo-63116/400-to-1000',
        'https://www.apartments.com/middletown-oh-45044/320-to-838',
        'https://www.apartments.com/charlotte-nc-28210/319-to-478',
        'https://www.apartments.com/las-vegas-nv-89117/400-to-1000',
        'https://www.apartments.com/providence-ri-2909/400-to-1000',
        'https://www.apartments.com/daytona-beach-fl-32114/400-to-1000',
        'https://www.apartments.com/washington-nc-27889/319-to-478',
        'https://www.apartments.com/owosso-mi-48867/320-to-838',
        'https://www.apartments.com/longview-wa-98632/400-to-1000',
        'https://www.apartments.com/austin-tx-78704/400-to-1000',
        'https://www.apartments.com/decatur-al-35601/320-to-838',
        'https://www.apartments.com/woodruff-sc-29388/320-to-838',
        'https://www.apartments.com/waycross-ga-31501/320-to-838',
        'https://www.apartments.com/amarillo-tx-79109/560-to-1198',
        'https://www.apartments.com/anthony-nm-88021/319-to-478',
        'https://www.apartments.com/easton-pa-18042/560-to-1198',
        'https://www.apartments.com/dallas-tx-75233/400-to-1000',
        'https://www.apartments.com/albemarle-nc-28001/320-to-838',
        'https://www.apartments.com/indianapolis-in-46219/319-to-478',
        'https://www.apartments.com/jacksonville-fl-32208/400-to-1000',
        'https://www.apartments.com/hugo-ok-74743/400-to-1000'


        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
