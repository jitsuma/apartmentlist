import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/elkhart-in-46516/1000-to-2000',
        'https://www.apartments.com/kansas-city-mo-64117/1000-to-2000',
        'https://www.apartments.com/lahaina-hi-96761/1000-to-2000',
        'https://www.apartments.com/harrisburg-pa-17104/1000-to-2000',
        'https://www.apartments.com/clarkston-ga-30021/1000-to-2000',
        'https://www.apartments.com/bastrop-tx-78602/1000-to-2000',
        'https://www.apartments.com/asheville-nc-28806/1000-to-2000',
        'https://www.apartments.com/beech-grove-in-46107/1000-to-2000',
        'https://www.apartments.com/indianapolis-in-46228/1000-to-2000',
        'https://www.apartments.com/jackson-mi-49202/1000-to-2000',
        'https://www.apartments.com/winder-ga-30680/1000-to-2000',
        'https://www.apartments.com/winterville-nc-28590/1000-to-2000',
        'https://www.apartments.com/alexander-city-al-35010/1000-to-2000',
        'https://www.apartments.com/orlando-fl-32809/1000-to-2000',
        'https://www.apartments.com/whitsett-nc-27377/1000-to-2000',
        'https://www.apartments.com/phenix-city-al-36869/1000-to-2000',
        'https://www.apartments.com/vevay-in-47043/1000-to-2000',
        'https://www.apartments.com/schenectady-ny-12305/1000-to-2000',
        'https://www.apartments.com/bridgeport-ct-6604/1000-to-2000',
        'https://www.apartments.com/gulfport-ms-39501/1000-to-2000',
        'https://www.apartments.com/youngstown-oh-44509/1000-to-2000',
        'https://www.apartments.com/columbia-sc-29229/1000-to-2000',
        'https://www.apartments.com/philadelphia-pa-19149/1000-to-2000',
        'https://www.apartments.com/stockton-ca-95205/1000-to-2000',
        'https://www.apartments.com/greenville-nc-27858/1000-to-2000',
        'https://www.apartments.com/pawtucket-ri-2860/1000-to-2000',
        'https://www.apartments.com/mesa-az-85202/1000-to-2000',
        'https://www.apartments.com/nan-nan-711/1000-to-2000',
        'https://www.apartments.com/sun-city-center-fl-33573/1000-to-2000',
        'https://www.apartments.com/philadelphia-pa-19140/1000-to-2000',
        'https://www.apartments.com/staunton-va-24401/1000-to-2000',
        'https://www.apartments.com/morganton-nc-28655/1000-to-2000',
        'https://www.apartments.com/madison-tn-37115/1000-to-2000',
        'https://www.apartments.com/franklin-pa-16323/1000-to-2000',
        'https://www.apartments.com/high-point-nc-27260/1000-to-2000',
        'https://www.apartments.com/warren-mi-48089/1000-to-2000',
        'https://www.apartments.com/hood-river-or-97031/1000-to-2000',
        'https://www.apartments.com/indianapolis-in-46205/1000-to-2000',
        'https://www.apartments.com/jeanerette-la-70544/1000-to-2000',
        'https://www.apartments.com/tampa-fl-33610/1000-to-2000',
        'https://www.apartments.com/warsaw-ky-41095/1000-to-2000',
        'https://www.apartments.com/dallas-tx-75241/1000-to-2000',
        'https://www.apartments.com/anderson-sc-29625/1000-to-2000',
        'https://www.apartments.com/sparks-nv-89431/1000-to-2000',
        'https://www.apartments.com/woonsocket-ri-2895/1000-to-2000',
        'https://www.apartments.com/nan-nan-15607/1000-to-2000',
        'https://www.apartments.com/decatur-tn-37322/1000-to-2000',
        'https://www.apartments.com/westland-mi-48185/1000-to-2000',
        'https://www.apartments.com/texas-city-tx-77590/1000-to-2000',
        'https://www.apartments.com/hockley-tx-77447/1000-to-2000',
        'https://www.apartments.com/lubbock-tx-79412/1000-to-2000',
        'https://www.apartments.com/yakima-wa-0/1000-to-2000',
        'https://www.apartments.com/flint-mi-48505/1000-to-2000',
        'https://www.apartments.com/concord-nc-28027/1000-to-2000',
        'https://www.apartments.com/phoenix-az-85016/1000-to-2000',
        'https://www.apartments.com/easton-pa-18042/1000-to-2000',
        'https://www.apartments.com/saint-petersburg-fl-33713/1000-to-2000',
        'https://www.apartments.com/redlands-ca-92374/1000-to-2000',
        'https://www.apartments.com/tucson-az-85742/1000-to-2000',
        'https://www.apartments.com/madison-al-35758/1000-to-2000',
        'https://www.apartments.com/rohnert-park-ca-94928/1000-to-2000',
        'https://www.apartments.com/cocoa-fl-32926/1000-to-2000',
        'https://www.apartments.com/philadelphia-pa-19132/1000-to-2000',
        'https://www.apartments.com/williston-nd-58801/1000-to-2000',
        'https://www.apartments.com/holiday-fl-34691/1000-to-2000',
        'https://www.apartments.com/sherwood-ar-72120/1000-to-2000',
        'https://www.apartments.com/harker-heights-tx-76548/1000-to-2000',
        'https://www.apartments.com/lorain-oh-44052/1000-to-2000',
        'https://www.apartments.com/shelby-nc-28150/1000-to-2000',
        'https://www.apartments.com/phoenix-az-85033/1000-to-2000',
        'https://www.apartments.com/greenville-nc-27834/1000-to-2000',
        'https://www.apartments.com/rapid-city-sd-57701/1000-to-2000',
        'https://www.apartments.com/kansas-city-ks-66103/1000-to-2000',
        'https://www.apartments.com/dallas-tx-75253/1000-to-2000',
        'https://www.apartments.com/lena-wi-54139/1000-to-2000',
        'https://www.apartments.com/montgomery-al-36105/1000-to-2000',
        'https://www.apartments.com/jasper-in-47546/1000-to-2000',
        'https://www.apartments.com/hanover-pa-17331/1000-to-2000',
        'https://www.apartments.com/rossville-ga-30741/1000-to-2000',
        'https://www.apartments.com/puryear-tn-38251/1000-to-2000',
        'https://www.apartments.com/indianapolis-in-46208/1000-to-2000',
        'https://www.apartments.com/gaffney-sc-29340/1000-to-2000',
        'https://www.apartments.com/west-plains-mo-65775/1000-to-2000',
        'https://www.apartments.com/pansey-al-36370/1000-to-2000',
        'https://www.apartments.com/spokane-wa-99223/1000-to-2000',
        'https://www.apartments.com/fort-worth-tx-76112/1000-to-2000',
        'https://www.apartments.com/sallisaw-ok-74955/1000-to-2000',
        'https://www.apartments.com/brookshire-tx-77423/1000-to-2000',
        'https://www.apartments.com/detroit-mi-48206/1000-to-2000',
        'https://www.apartments.com/lucerne-ca-95458/1000-to-2000',
        'https://www.apartments.com/flint-mi-48506/1000-to-2000',
        'https://www.apartments.com/humboldt-tn-38343/1000-to-2000',
        'https://www.apartments.com/rockford-il-61103/1000-to-2000',
        'https://www.apartments.com/six-mile-sc-29682/1000-to-2000',
        'https://www.apartments.com/denver-co-80215/1000-to-2000',
        'https://www.apartments.com/tucson-az-85712/1000-to-2000',
        'https://www.apartments.com/sacramento-ca-95838/1000-to-2000',
        'https://www.apartments.com/orlando-fl-32805/1000-to-2000',
        'https://www.apartments.com/altoona-pa-16602/1000-to-2000',
        'https://www.apartments.com/daytona-beach-fl-32114/1000-to-2000',
        'https://www.apartments.com/atlanta-ga-30331/1000-to-2000',
        'https://www.apartments.com/birmingham-al-35212/1000-to-2000',
        'https://www.apartments.com/richmond-va-23224/1000-to-2000',
        'https://www.apartments.com/kansas-city-mo-64109/1000-to-2000',
        'https://www.apartments.com/hamlet-nc-28345/1000-to-2000',
        'https://www.apartments.com/lexington-nc-27292/1000-to-2000',
        'https://www.apartments.com/fitchburg-ma-1420/1000-to-2000',
        'https://www.apartments.com/north-las-vegas-nv-89081/1000-to-2000',
        'https://www.apartments.com/gary-in-46403/1000-to-2000',
        'https://www.apartments.com/raleigh-nc-27601/1000-to-2000',
        'https://www.apartments.com/nan-nan-90553/1000-to-2000',
        'https://www.apartments.com/fresno-ca-93703/1000-to-2000',
        'https://www.apartments.com/lancaster-ca-93535/1000-to-2000',
        'https://www.apartments.com/milledgeville-ga-31061/1000-to-2000',
        'https://www.apartments.com/fort-mill-sc-29708/1000-to-2000',
        'https://www.apartments.com/los-angeles-ca-90068/1000-to-2000',
        'https://www.apartments.com/las-vegas-nv-89120/1000-to-2000',
        'https://www.apartments.com/fort-myers-fl-33908/1000-to-2000',
        'https://www.apartments.com/orange-city-fl-32763/1000-to-2000',
        'https://www.apartments.com/el-paso-tx-79904/1000-to-2000',
        'https://www.apartments.com/gurnee-il-60031/1000-to-2000',
        'https://www.apartments.com/buckhannon-wv-26201/1000-to-2000',
        'https://www.apartments.com/charlotte-nc-28216/1000-to-2000',
        'https://www.apartments.com/las-vegas-nv-89115/1000-to-2000',
        'https://www.apartments.com/goodspring-tn-38460/1000-to-2000',
        'https://www.apartments.com/carrollton-ga-30116/1000-to-2000',
        'https://www.apartments.com/kingston-ny-12401/1000-to-2000',
        'https://www.apartments.com/orlando-fl-32808/1000-to-2000',
        'https://www.apartments.com/tallahassee-fl-32310/1000-to-2000',
        'https://www.apartments.com/chicago-il-60629/1000-to-2000',
        'https://www.apartments.com/henderson-nv-89015/1000-to-2000',
        'https://www.apartments.com/aurora-co-80012/1000-to-2000',
        'https://www.apartments.com/nahunta-ga-31553/1000-to-2000',
        'https://www.apartments.com/warner-robins-ga-31093/1000-to-2000',
        'https://www.apartments.com/elkton-md-21921/1000-to-2000',
        'https://www.apartments.com/bailey-tx-75413/1000-to-2000',
        'https://www.apartments.com/johnson-city-tn-37615/1000-to-2000',
        'https://www.apartments.com/altamonte-springs-fl-32714/1000-to-2000',
        'https://www.apartments.com/sanford-nc-27330/1000-to-2000',
        'https://www.apartments.com/nan-nan-37648/1000-to-2000',
        'https://www.apartments.com/springdale-ar-72764/1000-to-2000',
        'https://www.apartments.com/fresno-ca-93727/1000-to-2000',
        'https://www.apartments.com/lakeside-ca-92040/1000-to-2000',
        'https://www.apartments.com/moreno-valley-ca-92553/1000-to-2000',
        'https://www.apartments.com/new-orleans-la-70119/1000-to-2000',
        'https://www.apartments.com/bakersfield-ca-93313/1000-to-2000',
        'https://www.apartments.com/huntsville-al-35802/1000-to-2000',
        'https://www.apartments.com/atlanta-ga-30318/1000-to-2000',
        'https://www.apartments.com/buxton-nc-27920/1000-to-2000',
        'https://www.apartments.com/pocatello-id-83202/1000-to-2000',
        'https://www.apartments.com/columbus-oh-43207/1000-to-2000',
        'https://www.apartments.com/birmingham-al-35211/1000-to-2000',
        'https://www.apartments.com/stone-mountain-ga-30088/1000-to-2000',
        'https://www.apartments.com/pipestem-wv-25979/1000-to-2000',
        'https://www.apartments.com/somerset-ky-42503/1000-to-2000',
        'https://www.apartments.com/yucca-valley-ca-92284/1000-to-2000',
        'https://www.apartments.com/rochester-ny-14616/1000-to-2000',
        'https://www.apartments.com/palos-hills-il-60465/1000-to-2000',
        'https://www.apartments.com/massillon-oh-44647/1000-to-2000',
        'https://www.apartments.com/jackson-ms-39213/1000-to-2000',
        'https://www.apartments.com/evansville-in-47714/1000-to-2000',
        'https://www.apartments.com/muscle-shoals-al-35661/1000-to-2000',
        'https://www.apartments.com/colorado-springs-co-80915/1000-to-2000',
        'https://www.apartments.com/hillsboro-mo-63050/1000-to-2000',
        'https://www.apartments.com/san-bernardino-ca-92410/1000-to-2000',
        'https://www.apartments.com/owensboro-ky-42303/1000-to-2000',
        'https://www.apartments.com/mesa-az-85203/1000-to-2000',
        'https://www.apartments.com/durham-nc-27713/1000-to-2000',
        'https://www.apartments.com/rural-hall-nc-27045/1000-to-2000',
        'https://www.apartments.com/idabel-ok-74745/1000-to-2000',
        'https://www.apartments.com/detroit-mi-48213/1000-to-2000',
        'https://www.apartments.com/newark-oh-43055/1000-to-2000',
        'https://www.apartments.com/sandy-or-97055/1000-to-2000',
        'https://www.apartments.com/detroit-mi-48217/1000-to-2000',
        'https://www.apartments.com/charlotte-nc-28208/1000-to-2000',
        'https://www.apartments.com/peachtree-city-ga-30269/1000-to-2000',
        'https://www.apartments.com/akron-oh-44306/1000-to-2000',
        'https://www.apartments.com/buffalo-ny-14215/1000-to-2000',
        'https://www.apartments.com/dagsboro-de-19939/1000-to-2000',
        'https://www.apartments.com/sumter-sc-29150/1000-to-2000',
        'https://www.apartments.com/sacramento-ca-95825/1000-to-2000',
        'https://www.apartments.com/niceville-fl-32578/1000-to-2000',
        'https://www.apartments.com/jackson-tn-38305/1000-to-2000',
        'https://www.apartments.com/nan-nan-92576/1000-to-2000',
        'https://www.apartments.com/holland-mi-49423/1000-to-2000',
        'https://www.apartments.com/philadelphia-pa-19119/1000-to-2000',
        'https://www.apartments.com/seymour-tn-37865/1000-to-2000',
        'https://www.apartments.com/homewood-il-60430/1000-to-2000',
        'https://www.apartments.com/round-o-sc-29474/1000-to-2000',
        'https://www.apartments.com/jonesboro-ga-30236/1000-to-2000',
        'https://www.apartments.com/mesa-az-85201/1000-to-2000',
        'https://www.apartments.com/roswell-nm-88201/1000-to-2000',
        'https://www.apartments.com/mundelein-il-60060/1000-to-2000'



            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
