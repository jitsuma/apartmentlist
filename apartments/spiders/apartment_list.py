import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/lithonia-ga-30058/500-to-1500',
        'https://www.apartments.com/shelton-wa-98584/500-to-1500',
        'https://www.apartments.com/dundalk-md-21222/500-to-1500',
        'https://www.apartments.com/wichita-ks-67208/500-to-1500',
        'https://www.apartments.com/toms-river-nj-8757/500-to-1500',
        'https://www.apartments.com/fitzgerald-ga-31750/500-to-1500',
        'https://www.apartments.com/decatur-ga-30035/500-to-1500',
        'https://www.apartments.com/plymouth-in-46563/500-to-1500',
        'https://www.apartments.com/riverdale-ga-30274/500-to-1500',
        'https://www.apartments.com/hamtramck-mi-48212/500-to-1500',
        'https://www.apartments.com/red-oak-tx-75154/500-to-1500',
        'https://www.apartments.com/philadelphia-pa-19136/500-to-1500',
        'https://www.apartments.com/hamden-ct-0/500-to-1500',
        'https://www.apartments.com/chester-pa-19013/500-to-1500',
        'https://www.apartments.com/stafford-va-22556/500-to-1500',
        'https://www.apartments.com/leesburg-fl-34748/500-to-1500',
        'https://www.apartments.com/indianapolis-in-46222/500-to-1500',
        'https://www.apartments.com/independence-mo-64050/500-to-1500',
        'https://www.apartments.com/fairdale-ky-40118/500-to-1500',
        'https://www.apartments.com/chapman-ne-68827/500-to-1500',
        'https://www.apartments.com/warner-robins-ga-31093/500-to-1500',
        'https://www.apartments.com/portal-ga-30450/500-to-1500',
        'https://www.apartments.com/miami-fl-33150/500-to-1500',
        'https://www.apartments.com/malden-mo-63863/500-to-1500',
        'https://www.apartments.com/fort-worth-tx-76112/500-to-1500',
        'https://www.apartments.com/cedar-rapids-ia-52404/500-to-1500',
        'https://www.apartments.com/longview-tx-75605/500-to-1500',
        'https://www.apartments.com/murfreesboro-tn-37130/500-to-1500',
        'https://www.apartments.com/pueblo-co-81008/500-to-1500',
        'https://www.apartments.com/philadelphia-pa-19132/500-to-1500',
        'https://www.apartments.com/saint-charles-mo-63301/500-to-1500',
        'https://www.apartments.com/north-highlands-ca-95660/500-to-1500',
        'https://www.apartments.com/milton-fl-32570/500-to-1500',
        'https://www.apartments.com/houston-tx-77069/500-to-1500',
        'https://www.apartments.com/granite-falls-nc-28630/500-to-1500',
        'https://www.apartments.com/yorktown-va-23693/500-to-1500',
        'https://www.apartments.com/woodbridge-va-22192/500-to-1500',
        'https://www.apartments.com/colorado-springs-co-80906/500-to-1500',
        'https://www.apartments.com/creal-springs-il-62922/500-to-1500',
        'https://www.apartments.com/troy-mt-59935/500-to-1500',
        'https://www.apartments.com/adrian-mi-49221/500-to-1500',
        'https://www.apartments.com/dallas-tx-75227/500-to-1500',
        'https://www.apartments.com/slippery-rock-pa-16057/500-to-1500',
        'https://www.apartments.com/meriden-ct-6450/500-to-1500',
        'https://www.apartments.com/lynnwood-wa-98087/500-to-1500',
        'https://www.apartments.com/marietta-ga-30062/500-to-1500',
        'https://www.apartments.com/newfield-nj-8344/500-to-1500',
        'https://www.apartments.com/fort-worth-tx-76116/500-to-1500',
        'https://www.apartments.com/atlanta-ga-30349/500-to-1500',
        'https://www.apartments.com/san-antonio-tx-78254/500-to-1500',
        'https://www.apartments.com/apache-junction-az-85120/500-to-1500',
        'https://www.apartments.com/nan-nan-22906/500-to-1500',
        'https://www.apartments.com/dover-de-19901/500-to-1500',
        'https://www.apartments.com/shelbyville-in-46176/500-to-1500',
        'https://www.apartments.com/sanford-fl-32771/500-to-1500',
        'https://www.apartments.com/west-palm-beach-fl-33404/500-to-1500',
        'https://www.apartments.com/ogden-ut-84401/500-to-1500',
        'https://www.apartments.com/new-hampton-ny-10958/500-to-1500',
        'https://www.apartments.com/valley-al-36854/500-to-1500',
        'https://www.apartments.com/waverly-ia-50677/500-to-1500',
        'https://www.apartments.com/pueblo-co-81005/500-to-1500',
        'https://www.apartments.com/saint-joseph-mo-64507/500-to-1500',
        'https://www.apartments.com/covington-ga-30014/500-to-1500',
        'https://www.apartments.com/valdosta-ga-31602/500-to-1500',
        'https://www.apartments.com/statesville-nc-28677/500-to-1500',
        'https://www.apartments.com/martinez-ca-94553/500-to-1500',
        'https://www.apartments.com/daytona-beach-fl-32119/500-to-1500',
        'https://www.apartments.com/chicago-il-60628/500-to-1500',
        'https://www.apartments.com/nan-nan-53043/500-to-1500',
        'https://www.apartments.com/west-columbia-sc-29169/500-to-1500',
        'https://www.apartments.com/milwaukee-wi-53210/500-to-1500',
        'https://www.apartments.com/salt-lake-city-ut-84121/500-to-1500',
        'https://www.apartments.com/washington-dc-20032/500-to-1500',
        'https://www.apartments.com/albuquerque-nm-87105/500-to-1500',
        'https://www.apartments.com/newport-ky-41071/500-to-1500',
        'https://www.apartments.com/nampa-id-83687/500-to-1500',
        'https://www.apartments.com/toledo-oh-43620/500-to-1500',
        'https://www.apartments.com/rural-hall-nc-27045/500-to-1500',
        'https://www.apartments.com/scottsdale-az-85257/500-to-1500',
        'https://www.apartments.com/polson-mt-59860/500-to-1500',
        'https://www.apartments.com/mesa-az-85208/500-to-1500',
        'https://www.apartments.com/sedgwick-me-4676/500-to-1500',
        'https://www.apartments.com/dallas-tx-75241/500-to-1500',
        'https://www.apartments.com/west-jordan-ut-84084/500-to-1500',
        'https://www.apartments.com/batesburg-sc-29006/500-to-1500',
        'https://www.apartments.com/palmetto-fl-34221/500-to-1500',
        'https://www.apartments.com/fresno-ca-93728/500-to-1500',
        'https://www.apartments.com/valdosta-ga-31601/500-to-1500',
        'https://www.apartments.com/graham-nc-27253/500-to-1500',
        'https://www.apartments.com/white-house-tn-37188/500-to-1500',
        'https://www.apartments.com/summerville-sc-29483/500-to-1500',
        'https://www.apartments.com/fayetteville-nc-28304/500-to-1500',
        'https://www.apartments.com/oklahoma-city-ok-73105/500-to-1500',
        'https://www.apartments.com/vero-beach-fl-32960/500-to-1500',
        'https://www.apartments.com/avondale-az-85323/500-to-1500',
        'https://www.apartments.com/bird-in-hand-pa-17505/500-to-1500',
        'https://www.apartments.com/wartburg-tn-37887/500-to-1500',
        'https://www.apartments.com/philadelphia-pa-19130/500-to-1500',
        'https://www.apartments.com/tooele-ut-84074/500-to-1500',
        'https://www.apartments.com/anderson-in-46013/500-to-1500',
        'https://www.apartments.com/austin-in-47102/500-to-1500',
        'https://www.apartments.com/springfield-mo-65803/500-to-1500',
        'https://www.apartments.com/florence-sc-29501/500-to-1500',
        'https://www.apartments.com/ottumwa-ia-52501/500-to-1500',
        'https://www.apartments.com/indianapolis-in-46201/500-to-1500',
        'https://www.apartments.com/hickory-nc-28601/500-to-1500',
        'https://www.apartments.com/tempe-az-85283/500-to-1500',
        'https://www.apartments.com/munford-tn-38058/500-to-1500',
        'https://www.apartments.com/myrtle-beach-sc-29572/500-to-1500',
        'https://www.apartments.com/las-vegas-nv-89149/500-to-1500',
        'https://www.apartments.com/pomona-ca-91767/500-to-1500',
        'https://www.apartments.com/nampa-id-83651/500-to-1500',
        'https://www.apartments.com/orlando-fl-32822/500-to-1500',
        'https://www.apartments.com/ashland-ky-41102/500-to-1500',
        'https://www.apartments.com/lake-wales-fl-33859/500-to-1500',
        'https://www.apartments.com/sanford-fl-32773/500-to-1500',
        'https://www.apartments.com/hemet-ca-92543/500-to-1500',
        'https://www.apartments.com/york-pa-17404/500-to-1500',
        'https://www.apartments.com/springfield-ma-1109/500-to-1500',
        'https://www.apartments.com/bastrop-la-71220/500-to-1500',
        'https://www.apartments.com/tullahoma-tn-37388/500-to-1500',
        'https://www.apartments.com/nan-nan-97003/500-to-1500',
        'https://www.apartments.com/redmond-or-97756/500-to-1500',
        'https://www.apartments.com/albuquerque-nm-87109/500-to-1500',
        'https://www.apartments.com/cleveland-oh-44105/500-to-1500',
        'https://www.apartments.com/phoenix-az-85032/500-to-1500',
        'https://www.apartments.com/bakersfield-ca-93304/500-to-1500',
        'https://www.apartments.com/gastonia-nc-28054/500-to-1500',
        'https://www.apartments.com/penn-valley-ca-95946/500-to-1500',
        'https://www.apartments.com/corona-ca-92883/500-to-1500',
        'https://www.apartments.com/san-antonio-tx-78201/500-to-1500',
        'https://www.apartments.com/jacksonville-fl-32234/500-to-1500',
        'https://www.apartments.com/philadelphia-pa-19124/500-to-1500',
        'https://www.apartments.com/ocala-fl-34474/500-to-1500',
        'https://www.apartments.com/bonita-springs-fl-34135/500-to-1500',
        'https://www.apartments.com/honea-path-sc-29654/500-to-1500',
        'https://www.apartments.com/belfair-wa-98528/500-to-1500',
        'https://www.apartments.com/visalia-ca-93291/500-to-1500',
        'https://www.apartments.com/blackshear-ga-31516/500-to-1500',
        'https://www.apartments.com/tyler-tx-75709/500-to-1500',
        'https://www.apartments.com/rutland-vt-5701/500-to-1500',
        'https://www.apartments.com/north-fort-myers-fl-33917/500-to-1500',
        'https://www.apartments.com/fort-worth-tx-76119/500-to-1500',
        'https://www.apartments.com/san-antonio-tx-78223/500-to-1500',
        'https://www.apartments.com/woodland-wa-98674/500-to-1500',
        'https://www.apartments.com/fort-walton-beach-fl-32548/500-to-1500',
        'https://www.apartments.com/long-island-city-ny-11101/500-to-1500',
        'https://www.apartments.com/wilmington-nc-28401/500-to-1500',
        'https://www.apartments.com/dalton-ga-30720/500-to-1500',
        'https://www.apartments.com/winslow-az-86047/500-to-1500',
        'https://www.apartments.com/wichita-falls-tx-76306/500-to-1500',
        'https://www.apartments.com/jacksonville-fl-32206/500-to-1500',
        'https://www.apartments.com/jacksonville-fl-32209/500-to-1500',
        'https://www.apartments.com/long-beach-ca-90805/500-to-1500',
        'https://www.apartments.com/jacksonville-fl-32217/500-to-1500',
        'https://www.apartments.com/panama-city-fl-32404/500-to-1500',
        'https://www.apartments.com/mobile-al-36617/500-to-1500',
        'https://www.apartments.com/north-myrtle-beach-sc-29582/500-to-1500',
        'https://www.apartments.com/rochester-ny-14611/500-to-1500',
        'https://www.apartments.com/north-wilkesboro-nc-28659/500-to-1500',
        'https://www.apartments.com/dudley-ma-1571/500-to-1500',
        'https://www.apartments.com/new-orleans-la-70122/500-to-1500',
        'https://www.apartments.com/fruitland-id-83619/500-to-1500',
        'https://www.apartments.com/trafford-al-35172/500-to-1500',
        'https://www.apartments.com/memphis-tn-38105/500-to-1500',
        'https://www.apartments.com/denison-tx-75020/500-to-1500',
        'https://www.apartments.com/nan-nan-530/500-to-1500',
        'https://www.apartments.com/bronx-ny-10459/500-to-1500',
        'https://www.apartments.com/fleming-island-fl-32003/500-to-1500',
        'https://www.apartments.com/dallas-tx-75216/500-to-1500',
        'https://www.apartments.com/hampton-va-23663/500-to-1500',
        'https://www.apartments.com/atlanta-ga-30318/500-to-1500',
        'https://www.apartments.com/fort-pierce-fl-34950/500-to-1500',
        'https://www.apartments.com/san-diego-ca-92128/500-to-1500',
        'https://www.apartments.com/chattanooga-tn-37407/500-to-1500',
        'https://www.apartments.com/rio-rancho-nm-87144/500-to-1500',
        'https://www.apartments.com/sparks-nv-89431/500-to-1500',
        'https://www.apartments.com/bloomsburg-pa-17815/500-to-1500',
        'https://www.apartments.com/bowie-md-20716/500-to-1500',
        'https://www.apartments.com/nan-nan-74502/500-to-1500',
        'https://www.apartments.com/hinesville-ga-31313/500-to-1500',
        'https://www.apartments.com/corpus-christi-tx-78414/500-to-1500',
        'https://www.apartments.com/genoa-city-wi-53128/500-to-1500',
        'https://www.apartments.com/atlanta-ga-30303/500-to-1500',
        'https://www.apartments.com/jacksonville-fl-32211/500-to-1500',
        'https://www.apartments.com/colorado-springs-co-80905/500-to-1500',
        'https://www.apartments.com/ozark-mo-65721/500-to-1500',
        'https://www.apartments.com/pensacola-fl-32506/500-to-1500',
        'https://www.apartments.com/winchester-va-22602/500-to-1500',
        'https://www.apartments.com/riverside-ca-92504/500-to-1500',
        'https://www.apartments.com/clarksville-tn-37043/500-to-1500',
        'https://www.apartments.com/schenectady-ny-12307/500-to-1500',
        'https://www.apartments.com/howell-mi-48843/500-to-1500',
        'https://www.apartments.com/lawrenceville-ga-30044/500-to-1500'



        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
