import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/muncie-in-0/400-to-1000',
        'https://www.apartments.com/citra-fl-32113/400-to-1000',
        'https://www.apartments.com/killeen-tx-76542/400-to-1000',
        'https://www.apartments.com/wanchese-nc-27981/400-to-1000',
        'https://www.apartments.com/far-rockaway-ny-11691/400-to-1000',
        'https://www.apartments.com/saint-petersburg-fl-33710/400-to-1000',
        'https://www.apartments.com/saint-louis-mo-63114/560-to-1198',
        'https://www.apartments.com/hamilton-oh-45013/400-to-1000',
        'https://www.apartments.com/austin-tx-78741/400-to-1000',
        'https://www.apartments.com/clayville-ri-2815/400-to-1000',
        'https://www.apartments.com/richardson-tx-75080/320-to-838',
        'https://www.apartments.com/asheville-nc-28801/400-to-1000',
        'https://www.apartments.com/supply-nc-28462/320-to-838',
        'https://www.apartments.com/belleville-il-62221/400-to-1000',
        'https://www.apartments.com/statesboro-ga-30458/560-to-1198',
        'https://www.apartments.com/fort-myers-fl-33913/560-to-1198',
        'https://www.apartments.com/apollo-pa-15613/400-to-1000',
        'https://www.apartments.com/nan-nan-53701/400-to-1000',
        'https://www.apartments.com/oxon-hill-md-20745/560-to-1198',
        'https://www.apartments.com/somerset-ky-42501/320-to-838',
        'https://www.apartments.com/san-antonio-tx-78223/560-to-1198',
        'https://www.apartments.com/lancaster-oh-43130/320-to-838',
        'https://www.apartments.com/greensboro-nc-27407/400-to-1000',
        'https://www.apartments.com/longwood-fl-32750/320-to-838',
        'https://www.apartments.com/norfolk-va-23518/400-to-1000',
        'https://www.apartments.com/york-pa-17403/400-to-1000',
        'https://www.apartments.com/pleasantville-nj-8232/400-to-1000',
        'https://www.apartments.com/tampa-fl-33637/400-to-1000',
        'https://www.apartments.com/augusta-ga-30906/400-to-1000',
        'https://www.apartments.com/pontiac-mi-48340/560-to-1198',
        'https://www.apartments.com/mc-leansville-nc-27301/400-to-1000',
        'https://www.apartments.com/charlotte-nc-28212/400-to-1000',
        'https://www.apartments.com/columbus-ga-31904/320-to-838',
        'https://www.apartments.com/vero-beach-fl-32960/1000-to-1200',
        'https://www.apartments.com/cleveland-oh-44120/400-to-1000',
        'https://www.apartments.com/haines-city-fl-33844/400-to-1000',
        'https://www.apartments.com/jackson-ms-39203/400-to-1000',
        'https://www.apartments.com/harvey-la-70058/400-to-1000',
        'https://www.apartments.com/wright-city-mo-63390/320-to-838',
        'https://www.apartments.com/plymouth-mi-48170/400-to-1000',
        'https://www.apartments.com/hollywood-fl-33023/560-to-1198',
        'https://www.apartments.com/phoenix-az-85017/400-to-1000',
        'https://www.apartments.com/montgomery-al-36111/320-to-838',
        'https://www.apartments.com/camby-in-46113/560-to-1198',
        'https://www.apartments.com/kansas-city-ks-66111/400-to-1000',
        'https://www.apartments.com/lincoln-park-mi-48146/320-to-838',
        'https://www.apartments.com/wilmington-de-19802/320-to-838',
        'https://www.apartments.com/houston-tx-77022/319-to-478',
        'https://www.apartments.com/cypress-tx-77433/1000-to-1200',
        'https://www.apartments.com/philadelphia-pa-19143/560-to-1198',
        'https://www.apartments.com/douglasville-ga-30135/560-to-1198',
        'https://www.apartments.com/hendersonville-nc-28739/400-to-1000',
        'https://www.apartments.com/sparks-nv-89431/400-to-1000',
        'https://www.apartments.com/warren-mi-48091/320-to-838',
        'https://www.apartments.com/elkhart-in-46517/319-to-478',
        'https://www.apartments.com/los-angeles-ca-90061/560-to-1198',
        'https://www.apartments.com/bakersfield-ca-93308/400-to-1000',
        'https://www.apartments.com/decatur-ga-30032/560-to-1198',
        'https://www.apartments.com/phoenix-az-85003/400-to-1000',
        'https://www.apartments.com/greensboro-nc-27406/400-to-1000',
        'https://www.apartments.com/concord-nc-28027/320-to-838',
        'https://www.apartments.com/conyers-ga-30094/560-to-1198',
        'https://www.apartments.com/colorado-springs-co-80903/400-to-1000',
        'https://www.apartments.com/freeburg-mo-65035/320-to-838',
        'https://www.apartments.com/colorado-springs-co-80916/400-to-1000',
        'https://www.apartments.com/leland-nc-28451/400-to-1000',
        'https://www.apartments.com/fort-worth-tx-76131/319-to-478',
        'https://www.apartments.com/memphis-tn-38115/400-to-1000',
        'https://www.apartments.com/hamilton-oh-45011/400-to-1000',
        'https://www.apartments.com/cincinnati-oh-45215/400-to-1000',
        'https://www.apartments.com/norcross-ga-30093/400-to-1000',
        'https://www.apartments.com/spring-tx-77373/400-to-1000',
        'https://www.apartments.com/chesapeake-va-23323/1000-to-1200',
        'https://www.apartments.com/tecumseh-ok-74873/320-to-838',
        'https://www.apartments.com/liberty-sc-29657/400-to-1000',
        'https://www.apartments.com/stone-mountain-ga-30087/400-to-1000',
        'https://www.apartments.com/brandon-fl-33510/560-to-1198',
        'https://www.apartments.com/jackson-nc-27845/400-to-1000',
        'https://www.apartments.com/birmingham-al-35214/560-to-1198',
        'https://www.apartments.com/tempe-az-85281/400-to-1000',
        'https://www.apartments.com/tampa-fl-33606/320-to-838',
        'https://www.apartments.com/salt-lake-city-ut-84107/400-to-1000',
        'https://www.apartments.com/darlington-sc-29532/400-to-1000',
        'https://www.apartments.com/evansville-in-47714/1000-to-1200',
        'https://www.apartments.com/fresno-ca-93704/400-to-1000',
        'https://www.apartments.com/conklin-ny-13748/400-to-1000',
        'https://www.apartments.com/fayetteville-nc-28314/400-to-1000',
        'https://www.apartments.com/sacramento-ca-95825/319-to-478',
        'https://www.apartments.com/saint-paul-mn-55119/400-to-1000',
        'https://www.apartments.com/beaumont-tx-77707/320-to-838',
        'https://www.apartments.com/nashville-tn-37208/400-to-1000',
        'https://www.apartments.com/zebulon-nc-27597/1000-to-1200',
        'https://www.apartments.com/marion-va-24354/319-to-478',
        'https://www.apartments.com/lafayette-in-47904/320-to-838',
        'https://www.apartments.com/port-huron-mi-48060/319-to-478',
        'https://www.apartments.com/crittenden-ky-41030/560-to-1198',
        'https://www.apartments.com/lansing-mi-48910/320-to-838',
        'https://www.apartments.com/kokomo-in-46901/320-to-838',
        'https://www.apartments.com/valdosta-ga-31601/320-to-838',
        'https://www.apartments.com/atlanta-ga-30349/1000-to-1200',
        'https://www.apartments.com/lakeland-fl-33809/400-to-1000',
        'https://www.apartments.com/kirksville-mo-63501/400-to-1000',
        'https://www.apartments.com/indianapolis-in-46222/400-to-1000',
        'https://www.apartments.com/desert-hot-springs-ca-92240/400-to-1000',
        'https://www.apartments.com/lincoln-ne-68502/320-to-838',
        'https://www.apartments.com/puyallup-wa-98371/400-to-1000',
        'https://www.apartments.com/fresno-ca-93727/400-to-1000',
        'https://www.apartments.com/stoneville-nc-27048/400-to-1000',
        'https://www.apartments.com/benton-harbor-mi-49022/560-to-1198',
        'https://www.apartments.com/las-vegas-nv-89122/1000-to-1200',
        'https://www.apartments.com/billings-mt-59101/319-to-478',
        'https://www.apartments.com/missouri-city-tx-77489/1000-to-1200',
        'https://www.apartments.com/milwaukee-wi-53208/319-to-478',
        'https://www.apartments.com/middle-island-ny-11953/1000-to-1200',
        'https://www.apartments.com/bradenton-fl-34205/400-to-1000',
        'https://www.apartments.com/bessemer-al-35020/320-to-838',
        'https://www.apartments.com/easley-sc-29640/319-to-478',
        'https://www.apartments.com/raleigh-nc-27601/320-to-838',
        'https://www.apartments.com/peoria-az-85345/1000-to-1200',
        'https://www.apartments.com/lake-city-fl-32055/400-to-1000',
        'https://www.apartments.com/ogden-ut-84401/400-to-1000',
        'https://www.apartments.com/abilene-tx-79601/400-to-1000',
        'https://www.apartments.com/san-antonio-tx-78240/400-to-1000',
        'https://www.apartments.com/constantine-mi-49042/1000-to-1200',
        'https://www.apartments.com/portland-or-97223/560-to-1198',
        'https://www.apartments.com/detroit-mi-48219/400-to-1000',
        'https://www.apartments.com/saint-louis-mo-63115/320-to-838',
        'https://www.apartments.com/nan-nan-20233/400-to-1000',
        'https://www.apartments.com/dallas-tx-75216/560-to-1198',
        'https://www.apartments.com/riverview-fl-33579/319-to-478',
        'https://www.apartments.com/mobile-al-36693/320-to-838',
        'https://www.apartments.com/monroe-nc-28110/320-to-838',
        'https://www.apartments.com/phoenix-az-85037/400-to-1000',
        'https://www.apartments.com/glendale-az-85306/560-to-1198',
        'https://www.apartments.com/chattanooga-tn-37421/320-to-838',
        'https://www.apartments.com/pueblo-co-81003/320-to-838',
        'https://www.apartments.com/cecilia-ky-42724/400-to-1000',
        'https://www.apartments.com/pickens-sc-29671/400-to-1000',
        'https://www.apartments.com/spokane-wa-99216/320-to-838',
        'https://www.apartments.com/aurora-co-80011/320-to-838',
        'https://www.apartments.com/collegeville-pa-19426/560-to-1198',
        'https://www.apartments.com/lawrence-ks-66047/320-to-838',
        'https://www.apartments.com/wichita-ks-67213/319-to-478',
        'https://www.apartments.com/dos-palos-ca-93620/400-to-1000',
        'https://www.apartments.com/melbourne-fl-32901/560-to-1198',
        'https://www.apartments.com/san-antonio-tx-78233/400-to-1000',
        'https://www.apartments.com/danville-ky-40422/320-to-838',
        'https://www.apartments.com/brockton-ma-2301/320-to-838',
        'https://www.apartments.com/raleigh-nc-27606/560-to-1198',
        'https://www.apartments.com/gastonia-nc-28054/319-to-478',
        'https://www.apartments.com/de-queen-ar-71832/320-to-838',
        'https://www.apartments.com/la-follette-tn-37766/320-to-838',
        'https://www.apartments.com/cleveland-oh-44108/400-to-1000',
        'https://www.apartments.com/fort-lauderdale-fl-33311/560-to-1198',
        'https://www.apartments.com/fredericksburg-va-22407/560-to-1198',
        'https://www.apartments.com/saint-petersburg-fl-33705/560-to-1198',
        'https://www.apartments.com/bell-gardens-ca-90201/560-to-1198',
        'https://www.apartments.com/lincoln-ne-68506/320-to-838',
        'https://www.apartments.com/chesapeake-oh-45619/319-to-478',
        'https://www.apartments.com/waco-tx-76705/560-to-1198',
        'https://www.apartments.com/newark-nj-7106/400-to-1000',
        'https://www.apartments.com/coachella-ca-92236/400-to-1000',
        'https://www.apartments.com/apache-junction-az-85120/319-to-478',
        'https://www.apartments.com/gettysburg-pa-17325/1000-to-1200',
        'https://www.apartments.com/conyers-ga-30012/560-to-1198',
        'https://www.apartments.com/cedar-rapids-ia-52404/1000-to-1200',
        'https://www.apartments.com/lowell-ma-1852/560-to-1198',
        'https://www.apartments.com/rocky-point-nc-28457/560-to-1198',
        'https://www.apartments.com/baltimore-md-21206/400-to-1000',
        'https://www.apartments.com/apple-valley-ca-92308/560-to-1198',
        'https://www.apartments.com/chattanooga-tn-37415/560-to-1198',
        'https://www.apartments.com/wilmington-de-19805/400-to-1000',
        'https://www.apartments.com/new-freedom-pa-17349/400-to-1000',
        'https://www.apartments.com/atlanta-ga-30315/400-to-1000',
        'https://www.apartments.com/smyrna-de-19977/320-to-838',
        'https://www.apartments.com/houston-tx-77090/320-to-838',
        'https://www.apartments.com/rapid-city-sd-57701/320-to-838',
        'https://www.apartments.com/tallahassee-fl-32304/320-to-838',
        'https://www.apartments.com/las-vegas-nv-89123/400-to-1000',
        'https://www.apartments.com/hagerstown-md-21742/400-to-1000',
        'https://www.apartments.com/victorville-ca-92395/560-to-1198',
        'https://www.apartments.com/north-port-fl-34291/320-to-838',
        'https://www.apartments.com/las-vegas-nv-89146/560-to-1198',
        'https://www.apartments.com/jackson-tn-38301/1000-to-1200',
        'https://www.apartments.com/dallas-tx-75201/320-to-838'

        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
