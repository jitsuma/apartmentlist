import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/shawnee-ks-66218/400-to-1000',
        'https://www.apartments.com/troy-al-36079/319-to-478',
        'https://www.apartments.com/racine-wi-53402/320-to-838',
        'https://www.apartments.com/gadsden-al-35901/320-to-838',
        'https://www.apartments.com/los-angeles-ca-90023/560-to-1198',
        'https://www.apartments.com/grand-rapids-mi-49506/400-to-1000',
        'https://www.apartments.com/oak-hill-wv-25901/400-to-1000',
        'https://www.apartments.com/sanford-nc-27330/320-to-838',
        'https://www.apartments.com/richmond-va-23222/400-to-1000',
        'https://www.apartments.com/norlina-nc-27563/320-to-838',
        'https://www.apartments.com/harriman-tn-37748/320-to-838',
        'https://www.apartments.com/florissant-mo-0/400-to-1000',
        'https://www.apartments.com/lawrenceville-ga-30046/560-to-1198',
        'https://www.apartments.com/nan-nan-64002/320-to-838',
        'https://www.apartments.com/douglasville-ga-30134/1000-to-1200',
        'https://www.apartments.com/salem-or-97301/400-to-1000',
        'https://www.apartments.com/toledo-oh-43604/320-to-838',
        'https://www.apartments.com/belleville-il-62223/320-to-838',
        'https://www.apartments.com/dearborn-heights-mi-48127/560-to-1198',
        'https://www.apartments.com/fort-lupton-co-80621/560-to-1198',
        'https://www.apartments.com/charles-town-wv-25414/319-to-478',
        'https://www.apartments.com/detroit-mi-48201/319-to-478',
        'https://www.apartments.com/daytona-beach-fl-32114/400-to-1000',
        'https://www.apartments.com/adrian-mi-49221/560-to-1198',
        'https://www.apartments.com/fairborn-oh-45324/319-to-478',
        'https://www.apartments.com/dundalk-md-21222/320-to-838',
        'https://www.apartments.com/plainfield-wi-54966/319-to-478',
        'https://www.apartments.com/memphis-tn-38115/400-to-1000',
        'https://www.apartments.com/fort-worth-tx-76164/560-to-1198',
        'https://www.apartments.com/havelock-nc-28532/319-to-478',
        'https://www.apartments.com/oswego-ny-13126/320-to-838',
        'https://www.apartments.com/bethel-park-pa-15102/320-to-838',
        'https://www.apartments.com/mcdonough-ga-30252/320-to-838',
        'https://www.apartments.com/fountain-inn-sc-29644/400-to-1000',
        'https://www.apartments.com/aurora-il-60505/560-to-1198',
        'https://www.apartments.com/dayton-oh-45431/320-to-838',
        'https://www.apartments.com/lake-worth-fl-33460/1000-to-1200',
        'https://www.apartments.com/whitehall-pa-18052/319-to-478',
        'https://www.apartments.com/florence-sc-29505/400-to-1000',
        'https://www.apartments.com/smithfield-nc-27577/560-to-1198',
        'https://www.apartments.com/denton-tx-76205/560-to-1198',
        'https://www.apartments.com/tampa-fl-33615/560-to-1198',
        'https://www.apartments.com/chelsea-ok-74016/320-to-838',
        'https://www.apartments.com/saint-augustine-fl-32092/400-to-1000',
        'https://www.apartments.com/morganton-nc-28655/320-to-838',
        'https://www.apartments.com/muncie-in-47302/320-to-838',
        'https://www.apartments.com/las-vegas-nv-89115/400-to-1000',
        'https://www.apartments.com/enid-ok-73701/400-to-1000',
        'https://www.apartments.com/franklin-in-46131/560-to-1198',
        'https://www.apartments.com/elkhart-in-46516/560-to-1198',
        'https://www.apartments.com/paterson-nj-7513/560-to-1198',
        'https://www.apartments.com/franklin-oh-45005/560-to-1198',
        'https://www.apartments.com/capitol-heights-md-20743/560-to-1198',
        'https://www.apartments.com/vicksburg-ms-39180/320-to-838',
        'https://www.apartments.com/clearwater-fl-33764/1000-to-1200',
        'https://www.apartments.com/oklahoma-city-ok-73107/400-to-1000',
        'https://www.apartments.com/liberty-mo-64068/320-to-838',
        'https://www.apartments.com/cleveland-oh-44110/1000-to-1200',
        'https://www.apartments.com/eastman-ga-31023/319-to-478',
        'https://www.apartments.com/pueblo-co-81001/560-to-1198',
        'https://www.apartments.com/philadelphia-pa-19124/319-to-478',
        'https://www.apartments.com/west-mifflin-pa-15122/319-to-478',
        'https://www.apartments.com/indianapolis-in-46218/400-to-1000',
        'https://www.apartments.com/maple-heights-oh-44137/560-to-1198',
        'https://www.apartments.com/kannapolis-nc-28083/320-to-838',
        'https://www.apartments.com/gerald-mo-63037/319-to-478',
        'https://www.apartments.com/concord-ca-94520/400-to-1000',
        'https://www.apartments.com/memphis-tn-38106/320-to-838',
        'https://www.apartments.com/summerville-sc-29483/560-to-1198',
        'https://www.apartments.com/elizabethtown-ky-42701/1000-to-1200',
        'https://www.apartments.com/wyoming-mi-49509/560-to-1198',
        'https://www.apartments.com/forest-park-ga-30297/400-to-1000',
        'https://www.apartments.com/naples-fl-34109/560-to-1198',
        'https://www.apartments.com/kansas-city-mo-64114/400-to-1000',
        'https://www.apartments.com/leasburg-nc-27291/319-to-478',
        'https://www.apartments.com/central-islip-ny-11722/1000-to-1200',
        'https://www.apartments.com/phoenix-az-85035/400-to-1000',
        'https://www.apartments.com/lakeland-fl-33801/400-to-1000',
        'https://www.apartments.com/springfield-ma-1108/400-to-1000',
        'https://www.apartments.com/rome-ga-30165/560-to-1198',
        'https://www.apartments.com/colton-ca-92324/400-to-1000',
        'https://www.apartments.com/lincoln-ne-68507/319-to-478',
        'https://www.apartments.com/cookson-ok-74427/320-to-838',
        'https://www.apartments.com/las-vegas-nv-89122/400-to-1000',
        'https://www.apartments.com/pickens-sc-29671/320-to-838',
        'https://www.apartments.com/desert-hot-springs-ca-92241/400-to-1000',
        'https://www.apartments.com/conway-sc-29526/320-to-838',
        'https://www.apartments.com/hillsborough-nc-27278/320-to-838',
        'https://www.apartments.com/fort-worth-tx-76119/560-to-1198',
        'https://www.apartments.com/el-paso-tx-79938/400-to-1000',
        'https://www.apartments.com/janesville-wi-53546/320-to-838',
        'https://www.apartments.com/searcy-ar-72143/319-to-478',
        'https://www.apartments.com/rockford-il-61109/1000-to-1200',
        'https://www.apartments.com/amarillo-tx-79104/320-to-838',
        'https://www.apartments.com/cusseta-al-36852/320-to-838',
        'https://www.apartments.com/savannah-ga-31406/320-to-838',
        'https://www.apartments.com/marietta-ga-30060/560-to-1198',
        'https://www.apartments.com/sanford-nc-27332/320-to-838',
        'https://www.apartments.com/hernando-fl-34442/319-to-478',
        'https://www.apartments.com/cape-may-nj-8204/560-to-1198',
        'https://www.apartments.com/aiken-sc-29801/400-to-1000',
        'https://www.apartments.com/las-vegas-nv-89113/320-to-838',
        'https://www.apartments.com/albuquerque-nm-87120/400-to-1000',
        'https://www.apartments.com/san-antonio-tx-78218/320-to-838',
        'https://www.apartments.com/lewisburg-tn-37091/560-to-1198',
        'https://www.apartments.com/riverdale-ga-30274/400-to-1000',
        'https://www.apartments.com/aledo-tx-76008/560-to-1198',
        'https://www.apartments.com/chicago-il-60645/320-to-838',
        'https://www.apartments.com/jackson-mi-49201/400-to-1000',
        'https://www.apartments.com/halethorpe-md-21227/1000-to-1200',
        'https://www.apartments.com/carson-city-nv-89706/320-to-838',
        'https://www.apartments.com/opelousas-la-70570/320-to-838',
        'https://www.apartments.com/golden-valley-az-86413/320-to-838',
        'https://www.apartments.com/canmer-ky-42722/319-to-478',
        'https://www.apartments.com/victorville-ca-92392/560-to-1198',
        'https://www.apartments.com/palm-harbor-fl-34683/320-to-838',
        'https://www.apartments.com/hoschton-ga-30548/320-to-838',
        'https://www.apartments.com/bristol-tn-37620/560-to-1198',
        'https://www.apartments.com/harvey-il-60426/560-to-1198',
        'https://www.apartments.com/westville-il-61883/320-to-838',
        'https://www.apartments.com/birmingham-al-35216/319-to-478',
        'https://www.apartments.com/providence-ri-2904/400-to-1000',
        'https://www.apartments.com/springfield-il-62703/320-to-838',
        'https://www.apartments.com/barstow-ca-92311/560-to-1198',
        'https://www.apartments.com/detroit-mi-48228/400-to-1000',
        'https://www.apartments.com/atlanta-ga-30349/560-to-1198',
        'https://www.apartments.com/roswell-nm-88201/320-to-838',
        'https://www.apartments.com/norfolk-va-23502/560-to-1198',
        'https://www.apartments.com/christiansburg-va-24073/560-to-1198',
        'https://www.apartments.com/pensacola-fl-32506/560-to-1198',
        'https://www.apartments.com/wetumpka-al-36092/320-to-838',
        'https://www.apartments.com/asheboro-nc-27203/319-to-478',
        'https://www.apartments.com/jersey-city-nj-7305/319-to-478',
        'https://www.apartments.com/pensacola-fl-32505/320-to-838',
        'https://www.apartments.com/huntsville-al-35810/560-to-1198',
        'https://www.apartments.com/kinston-nc-28504/560-to-1198',
        'https://www.apartments.com/philadelphia-pa-19154/400-to-1000',
        'https://www.apartments.com/nan-nan-94537/320-to-838',
        'https://www.apartments.com/gastonia-nc-28054/560-to-1198',
        'https://www.apartments.com/twin-lakes-wi-53181/1000-to-1200',
        'https://www.apartments.com/denton-tx-76209/560-to-1198',
        'https://www.apartments.com/lakeland-fl-33809/320-to-838',
        'https://www.apartments.com/marion-mt-59925/320-to-838',
        'https://www.apartments.com/waycross-ga-31501/320-to-838',
        'https://www.apartments.com/hudson-fl-34667/560-to-1198',
        'https://www.apartments.com/louisa-ky-41230/319-to-478',
        'https://www.apartments.com/kaufman-tx-75142/1000-to-1200',
        'https://www.apartments.com/hinesville-ga-31313/320-to-838',
        'https://www.apartments.com/wilmington-nc-28401/320-to-838',
        'https://www.apartments.com/columbus-oh-43204/400-to-1000',
        'https://www.apartments.com/maysville-ky-41056/400-to-1000',
        'https://www.apartments.com/middletown-oh-45042/560-to-1198',
        'https://www.apartments.com/arlington-va-22207/560-to-1198',
        'https://www.apartments.com/norman-ok-73071/320-to-838',
        'https://www.apartments.com/franklin-tn-37064/1000-to-1200',
        'https://www.apartments.com/eufaula-ok-74432/320-to-838',
        'https://www.apartments.com/sturgeon-bay-wi-54235/320-to-838',
        'https://www.apartments.com/homestead-fl-33034/319-to-478',
        'https://www.apartments.com/port-charlotte-fl-33981/1000-to-1200',
        'https://www.apartments.com/lecanto-fl-34461/320-to-838',
        'https://www.apartments.com/russellville-ar-72801/320-to-838',
        'https://www.apartments.com/northwood-oh-43619/320-to-838',
        'https://www.apartments.com/norwich-ct-6360/560-to-1198',
        'https://www.apartments.com/bradenton-fl-34205/560-to-1198',
        'https://www.apartments.com/northampton-ma-1060/1000-to-1200',
        'https://www.apartments.com/pittsburgh-pa-15219/400-to-1000',
        'https://www.apartments.com/taylor-mi-48180/560-to-1198',
        'https://www.apartments.com/tempe-az-85283/319-to-478',
        'https://www.apartments.com/mount-airy-ga-30563/319-to-478',
        'https://www.apartments.com/buffalo-ny-14212/560-to-1198',
        'https://www.apartments.com/south-milwaukee-wi-53172/320-to-838',
        'https://www.apartments.com/phoenix-az-85016/560-to-1198',
        'https://www.apartments.com/madera-ca-93638/319-to-478',
        'https://www.apartments.com/greenville-nc-27834/320-to-838',
        'https://www.apartments.com/tucson-az-85711/1000-to-1200',
        'https://www.apartments.com/orlando-fl-32837/400-to-1000',
        'https://www.apartments.com/elberton-ga-30635/320-to-838',
        'https://www.apartments.com/boise-id-83703/320-to-838',
        'https://www.apartments.com/cincinnati-oh-45207/400-to-1000',
        'https://www.apartments.com/las-vegas-nv-89121/320-to-838',
        'https://www.apartments.com/coldwater-mi-49036/320-to-838',
        'https://www.apartments.com/monroe-mi-48161/319-to-478',
        'https://www.apartments.com/timmonsville-sc-29161/400-to-1000',
        'https://www.apartments.com/reno-nv-89509/1000-to-1200',
        'https://www.apartments.com/columbus-ms-39701/320-to-838',
        'https://www.apartments.com/milwaukee-wi-53205/1000-to-1200',
        'https://www.apartments.com/new-bern-nc-28560/320-to-838',
        'https://www.apartments.com/riverton-wy-82501/320-to-838',
        'https://www.apartments.com/cuyahoga-falls-oh-44221/400-to-1000',
        'https://www.apartments.com/astoria-or-97103/1000-to-1200',
        'https://www.apartments.com/mobile-al-36608/560-to-1198',
        'https://www.apartments.com/calumet-city-il-60409/320-to-838',
        'https://www.apartments.com/tooele-ut-84074/560-to-1198',
        'https://www.apartments.com/cleveland-oh-44129/320-to-838',
        'https://www.apartments.com/linden-nj-7036/320-to-838',
        'https://www.apartments.com/oxford-ms-38655/319-to-478',
        'https://www.apartments.com/dinuba-ca-93618/400-to-1000',
        'https://www.apartments.com/kuna-id-83634/319-to-478',
        'https://www.apartments.com/akron-oh-44305/400-to-1000',
        'https://www.apartments.com/cleveland-ga-30528/400-to-1000',
        'https://www.apartments.com/west-columbia-sc-29169/560-to-1198',
        'https://www.apartments.com/shepherdsville-ky-40165/320-to-838',
        'https://www.apartments.com/lancaster-tx-75146/1000-to-1200',
        'https://www.apartments.com/charlotte-nc-28269/400-to-1000',
        'https://www.apartments.com/chicago-il-60639/320-to-838',
        'https://www.apartments.com/houston-tx-77072/320-to-838',
        'https://www.apartments.com/arab-al-35016/320-to-838',
        'https://www.apartments.com/sevierville-tn-37876/320-to-838',
        'https://www.apartments.com/modesto-ca-95350/560-to-1198',
        'https://www.apartments.com/nan-nan-89504/560-to-1198',
        'https://www.apartments.com/ada-ok-74820/319-to-478',
        'https://www.apartments.com/detroit-mi-48205/320-to-838',
        'https://www.apartments.com/reno-nv-89502/320-to-838',
        'https://www.apartments.com/san-diego-ca-92154/560-to-1198',
        'https://www.apartments.com/cheboygan-mi-49721/320-to-838',
        'https://www.apartments.com/mansfield-oh-44906/320-to-838',
        'https://www.apartments.com/chocowinity-nc-27817/319-to-478',
        'https://www.apartments.com/durango-co-81301/320-to-838',
        'https://www.apartments.com/silver-springs-nv-89429/400-to-1000',
        'https://www.apartments.com/tucson-az-85705/560-to-1198',
        'https://www.apartments.com/cantonment-fl-32533/320-to-838',
        'https://www.apartments.com/hagerstown-md-21740/560-to-1198',
        'https://www.apartments.com/lincoln-ne-68510/320-to-838',
        'https://www.apartments.com/palm-bay-fl-32905/319-to-478',
        'https://www.apartments.com/hamlet-nc-28345/320-to-838',
        'https://www.apartments.com/horn-lake-ms-38637/560-to-1198',
        'https://www.apartments.com/dallas-tx-75232/320-to-838',
        'https://www.apartments.com/siloam-springs-ar-72761/560-to-1198',
        'https://www.apartments.com/gresham-or-97030/320-to-838',
        'https://www.apartments.com/wichita-ks-67220/320-to-838'

        
            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
