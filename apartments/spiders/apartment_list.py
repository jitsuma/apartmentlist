import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/goldsboro-nc-27530/500-to-1500',
        'https://www.apartments.com/davisburg-mi-48350/500-to-1500',
        'https://www.apartments.com/covington-tn-38019/500-to-1500',
        'https://www.apartments.com/athens-ga-30607/500-to-1500',
        'https://www.apartments.com/houston-tx-77054/500-to-1500',
        'https://www.apartments.com/lynchburg-va-24504/500-to-1500',
        'https://www.apartments.com/milwaukee-wi-53212/500-to-1500',
        'https://www.apartments.com/palm-city-fl-34990/500-to-1500',
        'https://www.apartments.com/cincinnati-oh-0/500-to-1500',
        'https://www.apartments.com/fort-myers-fl-33913/500-to-1500',
        'https://www.apartments.com/plattsburg-mo-64477/500-to-1500',
        'https://www.apartments.com/fort-pierce-fl-34945/500-to-1500',
        'https://www.apartments.com/nan-nan-40904/500-to-1500',
        'https://www.apartments.com/plainfield-il-60544/500-to-1500',
        'https://www.apartments.com/collinsville-il-62234/500-to-1500',
        'https://www.apartments.com/las-vegas-nv-89119/500-to-1500',
        'https://www.apartments.com/inglewood-ca-90302/500-to-1500',
        'https://www.apartments.com/nan-nan-71156/500-to-1500',
        'https://www.apartments.com/pensacola-fl-32507/500-to-1500',
        'https://www.apartments.com/buffalo-ny-14207/500-to-1500',
        'https://www.apartments.com/salisbury-md-21801/500-to-1500',
        'https://www.apartments.com/dallas-tx-75210/500-to-1500',
        'https://www.apartments.com/bay-city-mi-48706/500-to-1500',
        'https://www.apartments.com/decatur-ga-30034/500-to-1500',
        'https://www.apartments.com/indianapolis-in-46204/500-to-1500',
        'https://www.apartments.com/hagerstown-md-21740/500-to-1500',
        'https://www.apartments.com/okeechobee-fl-34974/500-to-1500',
        'https://www.apartments.com/griffin-ga-30223/500-to-1500',
        'https://www.apartments.com/richmond-tx-77469/500-to-1500',
        'https://www.apartments.com/milwaukee-wi-53210/500-to-1500',
        'https://www.apartments.com/pittsburg-ks-66762/500-to-1500',
        'https://www.apartments.com/olympia-wa-98516/500-to-1500',
        'https://www.apartments.com/la-puente-ca-91746/500-to-1500',
        'https://www.apartments.com/middletown-ny-10940/500-to-1500',
        'https://www.apartments.com/diberville-ms-39540/500-to-1500',
        'https://www.apartments.com/philadelphia-pa-19134/500-to-1500',
        'https://www.apartments.com/memphis-mi-48041/500-to-1500',
        'https://www.apartments.com/little-rock-ar-72204/500-to-1500',
        'https://www.apartments.com/augusta-ks-67010/500-to-1500',
        'https://www.apartments.com/williamsburg-va-23185/500-to-1500',
        'https://www.apartments.com/sioux-falls-sd-57104/500-to-1500',
        'https://www.apartments.com/olivehurst-ca-95961/500-to-1500',
        'https://www.apartments.com/ellenwood-ga-30294/500-to-1500',
        'https://www.apartments.com/oak-park-mi-48237/500-to-1500',
        'https://www.apartments.com/baltimore-md-21206/500-to-1500',
        'https://www.apartments.com/west-columbia-sc-29172/500-to-1500',
        'https://www.apartments.com/lombard-il-60148/500-to-1500',
        'https://www.apartments.com/denver-co-80203/500-to-1500',
        'https://www.apartments.com/el-paso-tx-79924/500-to-1500',
        'https://www.apartments.com/dover-de-19901/500-to-1500',
        'https://www.apartments.com/hopkinsville-ky-42240/500-to-1500',
        'https://www.apartments.com/arlington-tx-76001/500-to-1500',
        'https://www.apartments.com/lehigh-acres-fl-33971/500-to-1500',
        'https://www.apartments.com/pompano-beach-fl-33064/500-to-1500',
        'https://www.apartments.com/north-adams-ma-1247/500-to-1500',
        'https://www.apartments.com/greensburg-la-70441/500-to-1500',
        'https://www.apartments.com/nashville-tn-37211/500-to-1500',
        'https://www.apartments.com/oklahoma-city-ok-73160/500-to-1500',
        'https://www.apartments.com/memphis-tn-38127/500-to-1500',
        'https://www.apartments.com/indianapolis-in-46229/500-to-1500',
        'https://www.apartments.com/mobile-al-36605/500-to-1500',
        'https://www.apartments.com/lagrange-ga-30240/500-to-1500',
        'https://www.apartments.com/aurora-co-80011/500-to-1500',
        'https://www.apartments.com/alliance-oh-44601/500-to-1500',
        'https://www.apartments.com/birmingham-al-35228/500-to-1500',
        'https://www.apartments.com/spring-hill-fl-34610/500-to-1500',
        'https://www.apartments.com/aliquippa-pa-15001/500-to-1500',
        'https://www.apartments.com/claymont-de-19703/500-to-1500',
        'https://www.apartments.com/auburn-ca-95603/500-to-1500',
        'https://www.apartments.com/nan-nan-27232/500-to-1500',
        'https://www.apartments.com/oceanside-ca-92056/500-to-1500',
        'https://www.apartments.com/palmdale-ca-93550/500-to-1500',
        'https://www.apartments.com/nan-nan-91572/500-to-1500',
        'https://www.apartments.com/elkton-md-21921/500-to-1500',
        'https://www.apartments.com/houston-tx-77016/500-to-1500',
        'https://www.apartments.com/goshen-in-46526/500-to-1500',
        'https://www.apartments.com/norwich-ct-6360/500-to-1500',
        'https://www.apartments.com/rockville-md-20850/500-to-1500',
        'https://www.apartments.com/brooklyn-ny-11234/500-to-1500',
        'https://www.apartments.com/long-beach-ca-90813/500-to-1500',
        'https://www.apartments.com/sheep-springs-nm-87364/500-to-1500',
        'https://www.apartments.com/anchorage-ak-99503/500-to-1500',
        'https://www.apartments.com/west-harrison-in-47060/500-to-1500',
        'https://www.apartments.com/philadelphia-pa-19136/500-to-1500',
        'https://www.apartments.com/kenner-la-70062/500-to-1500',
        'https://www.apartments.com/midland-ga-31820/500-to-1500',
        'https://www.apartments.com/phenix-city-al-36870/500-to-1500',
        'https://www.apartments.com/douglasville-ga-30134/500-to-1500',
        'https://www.apartments.com/dayton-oh-45406/500-to-1500',
        'https://www.apartments.com/sacramento-ca-95842/500-to-1500',
        'https://www.apartments.com/inverness-fl-34453/500-to-1500',
        'https://www.apartments.com/roanoke-al-36274/500-to-1500',
        'https://www.apartments.com/fort-lauderdale-fl-33312/500-to-1500',
        'https://www.apartments.com/rocky-mount-va-24151/500-to-1500',
        'https://www.apartments.com/las-vegas-nv-89115/500-to-1500',
        'https://www.apartments.com/bridgeport-ct-6608/500-to-1500',
        'https://www.apartments.com/evergreen-co-80439/500-to-1500',
        'https://www.apartments.com/tampa-fl-33612/500-to-1500',
        'https://www.apartments.com/houston-tx-77022/500-to-1500',
        'https://www.apartments.com/reading-pa-19601/500-to-1500',
        'https://www.apartments.com/henderson-tx-75654/500-to-1500',
        'https://www.apartments.com/stuttgart-ar-72160/500-to-1500',
        'https://www.apartments.com/springfield-oh-45506/500-to-1500',
        'https://www.apartments.com/daytona-beach-fl-32114/500-to-1500',
        'https://www.apartments.com/augusta-ga-30901/500-to-1500',
        'https://www.apartments.com/copperas-cove-tx-76522/500-to-1500',
        'https://www.apartments.com/jacksonville-nc-28546/500-to-1500',
        'https://www.apartments.com/petersburg-va-23805/500-to-1500',
        'https://www.apartments.com/buffalo-ny-14211/500-to-1500',
        'https://www.apartments.com/el-paso-tx-79930/500-to-1500',
        'https://www.apartments.com/ogden-ut-84401/500-to-1500',
        'https://www.apartments.com/chicago-il-60620/500-to-1500',
        'https://www.apartments.com/utica-mi-48317/500-to-1500',
        'https://www.apartments.com/homer-ga-30547/500-to-1500',
        'https://www.apartments.com/cumming-ga-30041/500-to-1500',
        'https://www.apartments.com/florence-ky-41042/500-to-1500',
        'https://www.apartments.com/baton-rouge-la-70816/500-to-1500',
        'https://www.apartments.com/huntsville-al-35805/500-to-1500',
        'https://www.apartments.com/hale-center-tx-79041/500-to-1500',
        'https://www.apartments.com/paragould-ar-72450/500-to-1500',
        'https://www.apartments.com/modesto-ca-95358/500-to-1500',
        'https://www.apartments.com/fairfield-oh-45014/500-to-1500',
        'https://www.apartments.com/central-islip-ny-11722/500-to-1500',
        'https://www.apartments.com/lancaster-tx-75134/500-to-1500',
        'https://www.apartments.com/scottsdale-az-85251/500-to-1500',
        'https://www.apartments.com/chicago-heights-il-60411/500-to-1500',
        'https://www.apartments.com/cathedral-city-ca-92234/500-to-1500',
        'https://www.apartments.com/rusk-tx-75785/500-to-1500',
        'https://www.apartments.com/douglasville-ga-30135/500-to-1500',
        'https://www.apartments.com/gastonia-nc-28054/500-to-1500',
        'https://www.apartments.com/visalia-ca-93291/500-to-1500',
        'https://www.apartments.com/denver-co-80215/500-to-1500',
        'https://www.apartments.com/garner-nc-27529/500-to-1500',
        'https://www.apartments.com/memphis-tn-38122/500-to-1500',
        'https://www.apartments.com/south-bend-in-46613/500-to-1500',
        'https://www.apartments.com/atoka-ok-74525/500-to-1500',
        'https://www.apartments.com/columbia-sc-29204/500-to-1500',
        'https://www.apartments.com/north-port-fl-34286/500-to-1500',
        'https://www.apartments.com/lincoln-park-mi-48146/500-to-1500',
        'https://www.apartments.com/saint-cloud-fl-34769/500-to-1500',
        'https://www.apartments.com/kalamazoo-mi-49001/500-to-1500',
        'https://www.apartments.com/port-saint-joe-fl-32456/500-to-1500',
        'https://www.apartments.com/tarpon-springs-fl-34689/500-to-1500',
        'https://www.apartments.com/san-antonio-tx-78223/500-to-1500',
        'https://www.apartments.com/sikeston-mo-63801/500-to-1500',
        'https://www.apartments.com/morgantown-wv-26501/500-to-1500',
        'https://www.apartments.com/tulsa-ok-74108/500-to-1500',
        'https://www.apartments.com/middletown-pa-17057/500-to-1500',
        'https://www.apartments.com/east-greenwich-ri-2818/500-to-1500',
        'https://www.apartments.com/north-fort-myers-fl-33903/500-to-1500',
        'https://www.apartments.com/adairville-ky-42202/500-to-1500',
        'https://www.apartments.com/charlotte-nc-28205/500-to-1500',
        'https://www.apartments.com/fayetteville-nc-28306/500-to-1500',
        'https://www.apartments.com/north-las-vegas-nv-89030/500-to-1500',
        'https://www.apartments.com/antelope-ca-95843/500-to-1500',
        'https://www.apartments.com/san-bernardino-ca-92407/500-to-1500',
        'https://www.apartments.com/apple-valley-ca-92307/500-to-1500',
        'https://www.apartments.com/albuquerque-nm-87110/500-to-1500',
        'https://www.apartments.com/bakersfield-ca-93307/500-to-1500',
        'https://www.apartments.com/akron-oh-44314/500-to-1500',
        'https://www.apartments.com/memphis-tn-38125/500-to-1500',
        'https://www.apartments.com/quincy-il-62305/500-to-1500',
        'https://www.apartments.com/los-angeles-ca-90044/500-to-1500',
        'https://www.apartments.com/riverdale-ga-30274/500-to-1500',
        'https://www.apartments.com/belfast-me-4915/500-to-1500',
        'https://www.apartments.com/seattle-wa-98121/500-to-1500',
        'https://www.apartments.com/la-place-la-70068/500-to-1500',
        'https://www.apartments.com/hawthorne-ca-90250/500-to-1500',
        'https://www.apartments.com/woodburn-or-97071/500-to-1500',
        'https://www.apartments.com/phoenix-az-85027/500-to-1500',
        'https://www.apartments.com/ashley-oh-43003/500-to-1500',
        'https://www.apartments.com/neptune-nj-7753/500-to-1500',
        'https://www.apartments.com/ramona-ca-92065/500-to-1500',
        'https://www.apartments.com/fort-walton-beach-fl-32547/500-to-1500',
        'https://www.apartments.com/lancaster-sc-29720/500-to-1500',
        'https://www.apartments.com/azusa-ca-91702/500-to-1500'

            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
