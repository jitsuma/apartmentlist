import scrapy


class ApartmentListSpider(scrapy.Spider):
    name = 'apartment_list'
    allowed_domains = ['https://www.apartments.com']
    
    start_urls = [
        'https://www.apartments.com/hesperia-ca-92345/1000-to-2000',
        'https://www.apartments.com/phoenix-az-85021/1000-to-2000',
        'https://www.apartments.com/baltimore-md-21206/1000-to-2000',
        'https://www.apartments.com/kenosha-wi-53143/1000-to-2000',
        'https://www.apartments.com/milwaukee-wi-53218/1000-to-2000',
        'https://www.apartments.com/chicago-il-60623/1000-to-2000',
        'https://www.apartments.com/gas-city-in-46933/1000-to-2000',
        'https://www.apartments.com/lake-worth-fl-33463/1000-to-2000',
        'https://www.apartments.com/amityville-ny-0/1000-to-2000',
        'https://www.apartments.com/north-las-vegas-nv-89030/1000-to-2000',
        'https://www.apartments.com/saint-petersburg-fl-33712/1000-to-2000',
        'https://www.apartments.com/kannapolis-nc-28081/1000-to-2000',
        'https://www.apartments.com/north-augusta-sc-29860/1000-to-2000',
        'https://www.apartments.com/richmond-va-23222/1000-to-2000',
        'https://www.apartments.com/benton-ar-72019/1000-to-2000',
        'https://www.apartments.com/warren-mi-48088/1000-to-2000',
        'https://www.apartments.com/dallas-ga-30157/1000-to-2000',
        'https://www.apartments.com/fayetteville-nc-28303/1000-to-2000',
        'https://www.apartments.com/white-plains-ny-10601/1000-to-2000',
        'https://www.apartments.com/syracuse-ny-13204/1000-to-2000',
        'https://www.apartments.com/nan-nan-28459/1000-to-2000',
        'https://www.apartments.com/chesapeake-va-23324/1000-to-2000',
        'https://www.apartments.com/panama-city-beach-fl-32413/1000-to-2000',
        'https://www.apartments.com/morrisville-nc-27560/1000-to-2000',
        'https://www.apartments.com/charlotte-nc-28216/1000-to-2000',
        'https://www.apartments.com/florence-ms-39073/1000-to-2000',
        'https://www.apartments.com/lowell-ma-1854/1000-to-2000',
        'https://www.apartments.com/rosedale-ny-11422/1000-to-2000',
        'https://www.apartments.com/corpus-christi-tx-78404/1000-to-2000',
        'https://www.apartments.com/warrensburg-mo-64093/1000-to-2000',
        'https://www.apartments.com/richmond-va-23237/1000-to-2000',
        'https://www.apartments.com/pontiac-mi-48342/1000-to-2000',
        'https://www.apartments.com/nan-nan-96408/1000-to-2000',
        'https://www.apartments.com/saco-me-4072/1000-to-2000',
        'https://www.apartments.com/medford-or-97501/1000-to-2000',
        'https://www.apartments.com/antioch-il-60002/1000-to-2000',
        'https://www.apartments.com/shelbyville-tn-37160/1000-to-2000',
        'https://www.apartments.com/durham-nc-27712/1000-to-2000',
        'https://www.apartments.com/denton-md-21629/1000-to-2000',
        'https://www.apartments.com/pensacola-fl-32501/1000-to-2000',
        'https://www.apartments.com/antioch-tn-37013/1000-to-2000',
        'https://www.apartments.com/hagerstown-md-21740/1000-to-2000',
        'https://www.apartments.com/saltillo-ms-38866/1000-to-2000',
        'https://www.apartments.com/las-vegas-nv-89148/1000-to-2000',
        'https://www.apartments.com/minneapolis-mn-55420/1000-to-2000',
        'https://www.apartments.com/philadelphia-pa-19143/1000-to-2000',
        'https://www.apartments.com/somerset-ky-42501/1000-to-2000',
        'https://www.apartments.com/fort-lauderdale-fl-33311/1000-to-2000',
        'https://www.apartments.com/junction-city-or-97448/1000-to-2000',
        'https://www.apartments.com/washington-dc-20017/1000-to-2000',
        'https://www.apartments.com/anderson-sc-29621/1000-to-2000',
        'https://www.apartments.com/newcastle-ok-73065/1000-to-2000',
        'https://www.apartments.com/los-angeles-ca-90059/1000-to-2000',
        'https://www.apartments.com/walterboro-sc-29488/1000-to-2000',
        'https://www.apartments.com/spring-hill-fl-34610/1000-to-2000',
        'https://www.apartments.com/shirley-ny-11967/1000-to-2000',
        'https://www.apartments.com/new-brunswick-nj-8901/1000-to-2000',
        'https://www.apartments.com/knightdale-nc-27545/1000-to-2000',
        'https://www.apartments.com/rhinelander-wi-54501/1000-to-2000',
        'https://www.apartments.com/nan-nan-29486/1000-to-2000',
        'https://www.apartments.com/vidalia-ga-30474/1000-to-2000',
        'https://www.apartments.com/henderson-nc-27536/1000-to-2000',
        'https://www.apartments.com/detroit-mi-48209/1000-to-2000',
        'https://www.apartments.com/colorado-springs-co-80918/1000-to-2000',
        'https://www.apartments.com/sterling-heights-mi-48310/1000-to-2000',
        'https://www.apartments.com/dunlap-tn-37327/1000-to-2000',
        'https://www.apartments.com/birmingham-al-35215/1000-to-2000',
        'https://www.apartments.com/burleson-tx-76028/1000-to-2000',
        'https://www.apartments.com/muncie-in-47302/1000-to-2000',
        'https://www.apartments.com/albuquerque-nm-87112/1000-to-2000',
        'https://www.apartments.com/ashville-oh-43103/1000-to-2000',
        'https://www.apartments.com/newark-de-19702/1000-to-2000',
        'https://www.apartments.com/winston-salem-nc-27127/1000-to-2000',
        'https://www.apartments.com/norfolk-va-23518/1000-to-2000',
        'https://www.apartments.com/pomona-ca-91768/1000-to-2000',
        'https://www.apartments.com/albertville-al-35950/1000-to-2000',
        'https://www.apartments.com/richmond-va-23223/1000-to-2000',
        'https://www.apartments.com/philadelphia-pa-19111/1000-to-2000',
        'https://www.apartments.com/detroit-mi-48213/1000-to-2000',
        'https://www.apartments.com/tampa-fl-33625/1000-to-2000',
        'https://www.apartments.com/springfield-mo-65804/1000-to-2000',
        'https://www.apartments.com/columbia-sc-29203/1000-to-2000',
        'https://www.apartments.com/jacksonville-fl-32216/1000-to-2000',
        'https://www.apartments.com/philadelphia-pa-19138/1000-to-2000',
        'https://www.apartments.com/kansas-city-mo-64131/1000-to-2000',
        'https://www.apartments.com/maysville-nc-28555/1000-to-2000',
        'https://www.apartments.com/hampton-va-23669/1000-to-2000',
        'https://www.apartments.com/dallas-tx-75232/1000-to-2000',
        'https://www.apartments.com/fort-wayne-in-46816/1000-to-2000',
        'https://www.apartments.com/tulsa-ok-74115/1000-to-2000',
        'https://www.apartments.com/largo-fl-33771/1000-to-2000',
        'https://www.apartments.com/richmond-va-23234/1000-to-2000',
        'https://www.apartments.com/defuniak-springs-fl-32435/1000-to-2000',
        'https://www.apartments.com/tarpon-springs-fl-34689/1000-to-2000',
        'https://www.apartments.com/niagara-falls-ny-14301/1000-to-2000',
        'https://www.apartments.com/nashville-tn-37214/1000-to-2000',
        'https://www.apartments.com/white-haven-pa-18661/1000-to-2000',
        'https://www.apartments.com/effort-pa-18330/1000-to-2000',
        'https://www.apartments.com/livingston-tx-77351/1000-to-2000',
        'https://www.apartments.com/savannah-ga-31408/1000-to-2000',
        'https://www.apartments.com/upper-darby-pa-19082/1000-to-2000',
        'https://www.apartments.com/lufkin-tx-75901/1000-to-2000',
        'https://www.apartments.com/bedford-in-47421/1000-to-2000',
        'https://www.apartments.com/winston-salem-nc-27105/1000-to-2000',
        'https://www.apartments.com/west-palm-beach-fl-33404/1000-to-2000',
        'https://www.apartments.com/corinth-ms-38834/1000-to-2000',
        'https://www.apartments.com/jackson-tn-38305/1000-to-2000',
        'https://www.apartments.com/pomona-ca-91766/1000-to-2000',
        'https://www.apartments.com/gary-in-46408/1000-to-2000',
        'https://www.apartments.com/far-rockaway-ny-11691/1000-to-2000',
        'https://www.apartments.com/victorville-ca-92395/1000-to-2000',
        'https://www.apartments.com/san-diego-ca-92115/1000-to-2000',
        'https://www.apartments.com/mcdonough-ga-30253/1000-to-2000',
        'https://www.apartments.com/lansing-mi-48917/1000-to-2000',
        'https://www.apartments.com/falconer-ny-14733/1000-to-2000',
        'https://www.apartments.com/maryland-heights-mo-63043/1000-to-2000',
        'https://www.apartments.com/palm-bay-fl-32905/1000-to-2000',
        'https://www.apartments.com/newark-nj-7103/1000-to-2000',
        'https://www.apartments.com/mentmore-nm-87319/1000-to-2000',
        'https://www.apartments.com/los-angeles-ca-90016/1000-to-2000',
        'https://www.apartments.com/lubbock-tx-79411/1000-to-2000',
        'https://www.apartments.com/tuscaloosa-al-35405/1000-to-2000',
        'https://www.apartments.com/linden-nj-7036/1000-to-2000',
        'https://www.apartments.com/atlanta-ga-30315/1000-to-2000',
        'https://www.apartments.com/knoxville-tn-37924/1000-to-2000',
        'https://www.apartments.com/bakersfield-ca-93309/1000-to-2000',
        'https://www.apartments.com/springfield-mo-65803/1000-to-2000',
        'https://www.apartments.com/bakersfield-ca-93304/1000-to-2000',
        'https://www.apartments.com/battle-creek-mi-49037/1000-to-2000',
        'https://www.apartments.com/patterson-ca-95363/1000-to-2000',
        'https://www.apartments.com/orlando-fl-32822/1000-to-2000',
        'https://www.apartments.com/chickamauga-ga-30707/1000-to-2000',
        'https://www.apartments.com/moreno-valley-ca-92553/1000-to-2000',
        'https://www.apartments.com/sacramento-ca-95815/1000-to-2000',
        'https://www.apartments.com/miami-fl-33143/1000-to-2000',
        'https://www.apartments.com/el-monte-ca-91732/1000-to-2000',
        'https://www.apartments.com/nan-nan-93278/1000-to-2000',
        'https://www.apartments.com/monroe-ga-30655/1000-to-2000',
        'https://www.apartments.com/essex-md-21221/1000-to-2000',
        'https://www.apartments.com/phillipsburg-nj-8865/1000-to-2000',
        'https://www.apartments.com/fayetteville-nc-28301/1000-to-2000',
        'https://www.apartments.com/richmond-hill-ga-31324/1000-to-2000',
        'https://www.apartments.com/montandon-pa-17850/1000-to-2000',
        'https://www.apartments.com/kansas-city-mo-64130/1000-to-2000',
        'https://www.apartments.com/baltimore-md-21229/1000-to-2000',
        'https://www.apartments.com/scottsville-va-24590/1000-to-2000',
        'https://www.apartments.com/huntington-ny-11743/1000-to-2000',
        'https://www.apartments.com/lansing-mi-48910/1000-to-2000',
        'https://www.apartments.com/miami-fl-33189/1000-to-2000',
        'https://www.apartments.com/oklahoma-city-ok-73109/1000-to-2000',
        'https://www.apartments.com/sparks-nv-89431/1000-to-2000',
        'https://www.apartments.com/lakeland-fl-33815/1000-to-2000',
        'https://www.apartments.com/syracuse-ny-13210/1000-to-2000',
        'https://www.apartments.com/atlanta-ga-30344/1000-to-2000',
        'https://www.apartments.com/lutz-fl-33549/1000-to-2000',
        'https://www.apartments.com/carbondale-pa-18407/1000-to-2000',
        'https://www.apartments.com/providence-ri-2908/1000-to-2000',
        'https://www.apartments.com/peoria-az-85345/1000-to-2000',
        'https://www.apartments.com/sarasota-fl-34234/1000-to-2000',
        'https://www.apartments.com/hartford-ct-6106/1000-to-2000',
        'https://www.apartments.com/temperance-mi-48182/1000-to-2000',
        'https://www.apartments.com/hanford-ca-93230/1000-to-2000',
        'https://www.apartments.com/clarksville-tn-37042/1000-to-2000',
        'https://www.apartments.com/corpus-christi-tx-78414/1000-to-2000',
        'https://www.apartments.com/westland-mi-48185/1000-to-2000',
        'https://www.apartments.com/springfield-mo-65806/1000-to-2000',
        'https://www.apartments.com/houston-tx-77073/1000-to-2000',
        'https://www.apartments.com/spokane-wa-99223/1000-to-2000',
        'https://www.apartments.com/erwin-nc-28339/1000-to-2000',
        'https://www.apartments.com/greenville-sc-29611/1000-to-2000',
        'https://www.apartments.com/fitchburg-ma-1420/1000-to-2000',
        'https://www.apartments.com/rock-hill-sc-29730/1000-to-2000',
        'https://www.apartments.com/janesville-wi-53545/1000-to-2000',
        'https://www.apartments.com/savannah-ga-31407/1000-to-2000',
        'https://www.apartments.com/kansas-city-mo-64133/1000-to-2000',
        'https://www.apartments.com/mesa-az-85205/1000-to-2000',
        'https://www.apartments.com/rosedale-md-21237/1000-to-2000',
        'https://www.apartments.com/memphis-tn-38114/1000-to-2000',
        'https://www.apartments.com/tampa-fl-33613/1000-to-2000',
        'https://www.apartments.com/uniondale-ny-11553/1000-to-2000',
        'https://www.apartments.com/lockport-ny-14094/1000-to-2000',
        'https://www.apartments.com/lagrange-ga-30240/1000-to-2000',
        'https://www.apartments.com/whiteville-nc-28472/1000-to-2000',
        'https://www.apartments.com/greenwood-sc-29646/1000-to-2000',
        'https://www.apartments.com/memphis-tn-38118/1000-to-2000',
        'https://www.apartments.com/nan-nan-6030/1000-to-2000',
        'https://www.apartments.com/bronx-ny-10457/1000-to-2000',
        'https://www.apartments.com/lemoore-ca-93245/1000-to-2000',
        'https://www.apartments.com/atlanta-ga-30349/1000-to-2000',
        'https://www.apartments.com/loma-linda-ca-92354/1000-to-2000',
        'https://www.apartments.com/nan-nan-39502/1000-to-2000',
        'https://www.apartments.com/damariscotta-me-4543/1000-to-2000',
        'https://www.apartments.com/aurora-co-80012/1000-to-2000',
        'https://www.apartments.com/china-grove-nc-28023/1000-to-2000',
        'https://www.apartments.com/goose-creek-sc-29445/1000-to-2000',
        'https://www.apartments.com/corinna-me-4928/1000-to-2000',
        'https://www.apartments.com/lake-cormorant-ms-38641/1000-to-2000',
        'https://www.apartments.com/milledgeville-ga-31061/1000-to-2000',
        'https://www.apartments.com/richmond-va-23225/1000-to-2000',
        'https://www.apartments.com/phoenix-az-85006/1000-to-2000',
        'https://www.apartments.com/stone-mountain-ga-30083/1000-to-2000',
        'https://www.apartments.com/chicago-il-60628/1000-to-2000',
        'https://www.apartments.com/colton-ca-92324/1000-to-2000',
        'https://www.apartments.com/saint-marys-ga-31558/1000-to-2000',
        'https://www.apartments.com/phoenix-az-85051/1000-to-2000',
        'https://www.apartments.com/priest-river-id-83856/1000-to-2000',
        'https://www.apartments.com/san-diego-ca-92104/1000-to-2000',
        'https://www.apartments.com/nampa-id-83651/1000-to-2000',
        'https://www.apartments.com/angels-camp-ca-95222/1000-to-2000',
        'https://www.apartments.com/springdale-ar-72764/1000-to-2000',
        'https://www.apartments.com/nan-nan-34174/1000-to-2000'


            ]

    def parse(self, response):
        print("procesing:"+response.url)
        #Extract data using css selectors
        propertyname = response.xpath("//div[@class='property-title']/span/text()").extract()
        address=response.xpath("//div[@class='property-address js-url']/text()").extract()
        phone_number=response.xpath("//div[@class='phone-wrapper']/a/span/text()").extract()
        link_url=response.xpath("//div[@class='property-information']/a/@href").extract()

        row_data=zip(propertyname,address,phone_number,link_url)

        #Making extracted data row wise
        for item in row_data:
            #create a dictionary to store the scraped info
            scraped_info = {
                #key:value
                'page':response.url,
                'name':item[0],
                'address' : item[1], #item[0] means product in the list and so on, index tells what value to assign
                'phone_number' : item[2],
                'link_url' : item[3]
            }

            #yield or give the scraped info to scrapy
            yield scraped_info
